function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-0oy81giI.js","assets/index-DsKnwHMO.js","assets/index-9nitxYe8.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{y as Yw,z as zn,D as Hu,F as si,G as Yr,g as Ku,_ as Qw}from"./index-DsKnwHMO.js";import{e as zr,Y as ku}from"./events-CqGEG7jR.js";var Vu={},sa={},Le={},ep={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});function e(f,g){var p=f>>>16&65535,v=f&65535,b=g>>>16&65535,D=g&65535;return v*D+(p*D+v*b<<16>>>0)|0}i.mul=Math.imul||e;function t(f,g){return f+g|0}i.add=t;function s(f,g){return f-g|0}i.sub=s;function o(f,g){return f<<g|f>>>32-g}i.rotl=o;function c(f,g){return f<<32-g|f>>>g}i.rotr=c;function l(f){return typeof f=="number"&&isFinite(f)&&Math.floor(f)===f}i.isInteger=Number.isInteger||l,i.MAX_SAFE_INTEGER=9007199254740991,i.isSafeInteger=function(f){return i.isInteger(f)&&f>=-i.MAX_SAFE_INTEGER&&f<=i.MAX_SAFE_INTEGER}})(ep);Object.defineProperty(Le,"__esModule",{value:!0});var tp=ep;function Xw(i,e){return e===void 0&&(e=0),(i[e+0]<<8|i[e+1])<<16>>16}Le.readInt16BE=Xw;function Zw(i,e){return e===void 0&&(e=0),(i[e+0]<<8|i[e+1])>>>0}Le.readUint16BE=Zw;function e1(i,e){return e===void 0&&(e=0),(i[e+1]<<8|i[e])<<16>>16}Le.readInt16LE=e1;function t1(i,e){return e===void 0&&(e=0),(i[e+1]<<8|i[e])>>>0}Le.readUint16LE=t1;function rp(i,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=i>>>8,e[t+1]=i>>>0,e}Le.writeUint16BE=rp;Le.writeInt16BE=rp;function ip(i,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=i>>>0,e[t+1]=i>>>8,e}Le.writeUint16LE=ip;Le.writeInt16LE=ip;function lu(i,e){return e===void 0&&(e=0),i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3]}Le.readInt32BE=lu;function fu(i,e){return e===void 0&&(e=0),(i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3])>>>0}Le.readUint32BE=fu;function du(i,e){return e===void 0&&(e=0),i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e]}Le.readInt32LE=du;function pu(i,e){return e===void 0&&(e=0),(i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e])>>>0}Le.readUint32LE=pu;function Xo(i,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=i>>>24,e[t+1]=i>>>16,e[t+2]=i>>>8,e[t+3]=i>>>0,e}Le.writeUint32BE=Xo;Le.writeInt32BE=Xo;function Zo(i,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=i>>>0,e[t+1]=i>>>8,e[t+2]=i>>>16,e[t+3]=i>>>24,e}Le.writeUint32LE=Zo;Le.writeInt32LE=Zo;function r1(i,e){e===void 0&&(e=0);var t=lu(i,e),s=lu(i,e+4);return t*4294967296+s-(s>>31)*4294967296}Le.readInt64BE=r1;function i1(i,e){e===void 0&&(e=0);var t=fu(i,e),s=fu(i,e+4);return t*4294967296+s}Le.readUint64BE=i1;function n1(i,e){e===void 0&&(e=0);var t=du(i,e),s=du(i,e+4);return s*4294967296+t-(t>>31)*4294967296}Le.readInt64LE=n1;function s1(i,e){e===void 0&&(e=0);var t=pu(i,e),s=pu(i,e+4);return s*4294967296+t}Le.readUint64LE=s1;function np(i,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Xo(i/4294967296>>>0,e,t),Xo(i>>>0,e,t+4),e}Le.writeUint64BE=np;Le.writeInt64BE=np;function sp(i,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Zo(i>>>0,e,t),Zo(i/4294967296>>>0,e,t+4),e}Le.writeUint64LE=sp;Le.writeInt64LE=sp;function o1(i,e,t){if(t===void 0&&(t=0),i%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(i/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,o=1,c=i/8+t-1;c>=t;c--)s+=e[c]*o,o*=256;return s}Le.readUintBE=o1;function a1(i,e,t){if(t===void 0&&(t=0),i%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(i/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,o=1,c=t;c<t+i/8;c++)s+=e[c]*o,o*=256;return s}Le.readUintLE=a1;function c1(i,e,t,s){if(t===void 0&&(t=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!tp.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,c=i/8+s-1;c>=s;c--)t[c]=e/o&255,o*=256;return t}Le.writeUintBE=c1;function u1(i,e,t,s){if(t===void 0&&(t=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!tp.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,c=s;c<s+i/8;c++)t[c]=e/o&255,o*=256;return t}Le.writeUintLE=u1;function h1(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat32(e)}Le.readFloat32BE=h1;function l1(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat32(e,!0)}Le.readFloat32LE=l1;function f1(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat64(e)}Le.readFloat64BE=f1;function d1(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat64(e,!0)}Le.readFloat64LE=d1;function p1(i,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,i),e}Le.writeFloat32BE=p1;function g1(i,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,i,!0),e}Le.writeFloat32LE=g1;function y1(i,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,i),e}Le.writeFloat64BE=y1;function v1(i,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,i,!0),e}Le.writeFloat64LE=v1;var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});function _1(i){for(var e=0;e<i.length;e++)i[e]=0;return i}Tr.wipe=_1;Object.defineProperty(sa,"__esModule",{value:!0});var er=Le,gu=Tr,m1=20;function w1(i,e,t){for(var s=1634760805,o=857760878,c=2036477234,l=1797285236,f=t[3]<<24|t[2]<<16|t[1]<<8|t[0],g=t[7]<<24|t[6]<<16|t[5]<<8|t[4],p=t[11]<<24|t[10]<<16|t[9]<<8|t[8],v=t[15]<<24|t[14]<<16|t[13]<<8|t[12],b=t[19]<<24|t[18]<<16|t[17]<<8|t[16],D=t[23]<<24|t[22]<<16|t[21]<<8|t[20],O=t[27]<<24|t[26]<<16|t[25]<<8|t[24],x=t[31]<<24|t[30]<<16|t[29]<<8|t[28],F=e[3]<<24|e[2]<<16|e[1]<<8|e[0],B=e[7]<<24|e[6]<<16|e[5]<<8|e[4],te=e[11]<<24|e[10]<<16|e[9]<<8|e[8],$=e[15]<<24|e[14]<<16|e[13]<<8|e[12],L=s,C=o,A=c,S=l,u=f,w=g,G=p,W=v,se=b,ue=D,de=O,E=x,T=F,ee=B,Q=te,k=$,V=0;V<m1;V+=2)L=L+u|0,T^=L,T=T>>>16|T<<16,se=se+T|0,u^=se,u=u>>>20|u<<12,C=C+w|0,ee^=C,ee=ee>>>16|ee<<16,ue=ue+ee|0,w^=ue,w=w>>>20|w<<12,A=A+G|0,Q^=A,Q=Q>>>16|Q<<16,de=de+Q|0,G^=de,G=G>>>20|G<<12,S=S+W|0,k^=S,k=k>>>16|k<<16,E=E+k|0,W^=E,W=W>>>20|W<<12,A=A+G|0,Q^=A,Q=Q>>>24|Q<<8,de=de+Q|0,G^=de,G=G>>>25|G<<7,S=S+W|0,k^=S,k=k>>>24|k<<8,E=E+k|0,W^=E,W=W>>>25|W<<7,C=C+w|0,ee^=C,ee=ee>>>24|ee<<8,ue=ue+ee|0,w^=ue,w=w>>>25|w<<7,L=L+u|0,T^=L,T=T>>>24|T<<8,se=se+T|0,u^=se,u=u>>>25|u<<7,L=L+w|0,k^=L,k=k>>>16|k<<16,de=de+k|0,w^=de,w=w>>>20|w<<12,C=C+G|0,T^=C,T=T>>>16|T<<16,E=E+T|0,G^=E,G=G>>>20|G<<12,A=A+W|0,ee^=A,ee=ee>>>16|ee<<16,se=se+ee|0,W^=se,W=W>>>20|W<<12,S=S+u|0,Q^=S,Q=Q>>>16|Q<<16,ue=ue+Q|0,u^=ue,u=u>>>20|u<<12,A=A+W|0,ee^=A,ee=ee>>>24|ee<<8,se=se+ee|0,W^=se,W=W>>>25|W<<7,S=S+u|0,Q^=S,Q=Q>>>24|Q<<8,ue=ue+Q|0,u^=ue,u=u>>>25|u<<7,C=C+G|0,T^=C,T=T>>>24|T<<8,E=E+T|0,G^=E,G=G>>>25|G<<7,L=L+w|0,k^=L,k=k>>>24|k<<8,de=de+k|0,w^=de,w=w>>>25|w<<7;er.writeUint32LE(L+s|0,i,0),er.writeUint32LE(C+o|0,i,4),er.writeUint32LE(A+c|0,i,8),er.writeUint32LE(S+l|0,i,12),er.writeUint32LE(u+f|0,i,16),er.writeUint32LE(w+g|0,i,20),er.writeUint32LE(G+p|0,i,24),er.writeUint32LE(W+v|0,i,28),er.writeUint32LE(se+b|0,i,32),er.writeUint32LE(ue+D|0,i,36),er.writeUint32LE(de+O|0,i,40),er.writeUint32LE(E+x|0,i,44),er.writeUint32LE(T+F|0,i,48),er.writeUint32LE(ee+B|0,i,52),er.writeUint32LE(Q+te|0,i,56),er.writeUint32LE(k+$|0,i,60)}function op(i,e,t,s,o){if(o===void 0&&(o=0),i.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<t.length)throw new Error("ChaCha: destination is shorter than source");var c,l;if(o===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");c=new Uint8Array(16),l=c.length-e.length,c.set(e,l)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");c=e,l=o}for(var f=new Uint8Array(64),g=0;g<t.length;g+=64){w1(f,c,i);for(var p=g;p<g+64&&p<t.length;p++)s[p]=t[p]^f[p-g];E1(c,0,l)}return gu.wipe(f),o===0&&gu.wipe(c),s}sa.streamXOR=op;function b1(i,e,t,s){return s===void 0&&(s=0),gu.wipe(t),op(i,e,t,t,s)}sa.stream=b1;function E1(i,e,t){for(var s=1;t--;)s=s+(i[e]&255)|0,i[e]=s&255,s>>>=8,e++;if(s>0)throw new Error("ChaCha: counter overflow")}var ap={},Fi={};Object.defineProperty(Fi,"__esModule",{value:!0});function D1(i,e,t){return~(i-1)&e|i-1&t}Fi.select=D1;function S1(i,e){return(i|0)-(e|0)-1>>>31&1}Fi.lessOrEqual=S1;function cp(i,e){if(i.length!==e.length)return 0;for(var t=0,s=0;s<i.length;s++)t|=i[s]^e[s];return 1&t-1>>>8}Fi.compare=cp;function I1(i,e){return i.length===0||e.length===0?!1:cp(i,e)!==0}Fi.equal=I1;(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Fi,t=Tr;i.DIGEST_LENGTH=16;var s=function(){function l(f){this.digestLength=i.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var g=f[0]|f[1]<<8;this._r[0]=g&8191;var p=f[2]|f[3]<<8;this._r[1]=(g>>>13|p<<3)&8191;var v=f[4]|f[5]<<8;this._r[2]=(p>>>10|v<<6)&7939;var b=f[6]|f[7]<<8;this._r[3]=(v>>>7|b<<9)&8191;var D=f[8]|f[9]<<8;this._r[4]=(b>>>4|D<<12)&255,this._r[5]=D>>>1&8190;var O=f[10]|f[11]<<8;this._r[6]=(D>>>14|O<<2)&8191;var x=f[12]|f[13]<<8;this._r[7]=(O>>>11|x<<5)&8065;var F=f[14]|f[15]<<8;this._r[8]=(x>>>8|F<<8)&8191,this._r[9]=F>>>5&127,this._pad[0]=f[16]|f[17]<<8,this._pad[1]=f[18]|f[19]<<8,this._pad[2]=f[20]|f[21]<<8,this._pad[3]=f[22]|f[23]<<8,this._pad[4]=f[24]|f[25]<<8,this._pad[5]=f[26]|f[27]<<8,this._pad[6]=f[28]|f[29]<<8,this._pad[7]=f[30]|f[31]<<8}return l.prototype._blocks=function(f,g,p){for(var v=this._fin?0:2048,b=this._h[0],D=this._h[1],O=this._h[2],x=this._h[3],F=this._h[4],B=this._h[5],te=this._h[6],$=this._h[7],L=this._h[8],C=this._h[9],A=this._r[0],S=this._r[1],u=this._r[2],w=this._r[3],G=this._r[4],W=this._r[5],se=this._r[6],ue=this._r[7],de=this._r[8],E=this._r[9];p>=16;){var T=f[g+0]|f[g+1]<<8;b+=T&8191;var ee=f[g+2]|f[g+3]<<8;D+=(T>>>13|ee<<3)&8191;var Q=f[g+4]|f[g+5]<<8;O+=(ee>>>10|Q<<6)&8191;var k=f[g+6]|f[g+7]<<8;x+=(Q>>>7|k<<9)&8191;var V=f[g+8]|f[g+9]<<8;F+=(k>>>4|V<<12)&8191,B+=V>>>1&8191;var Y=f[g+10]|f[g+11]<<8;te+=(V>>>14|Y<<2)&8191;var ie=f[g+12]|f[g+13]<<8;$+=(Y>>>11|ie<<5)&8191;var we=f[g+14]|f[g+15]<<8;L+=(ie>>>8|we<<8)&8191,C+=we>>>5|v;var oe=0,be=oe;be+=b*A,be+=D*(5*E),be+=O*(5*de),be+=x*(5*ue),be+=F*(5*se),oe=be>>>13,be&=8191,be+=B*(5*W),be+=te*(5*G),be+=$*(5*w),be+=L*(5*u),be+=C*(5*S),oe+=be>>>13,be&=8191;var le=oe;le+=b*S,le+=D*A,le+=O*(5*E),le+=x*(5*de),le+=F*(5*ue),oe=le>>>13,le&=8191,le+=B*(5*se),le+=te*(5*W),le+=$*(5*G),le+=L*(5*w),le+=C*(5*u),oe+=le>>>13,le&=8191;var _e=oe;_e+=b*u,_e+=D*S,_e+=O*A,_e+=x*(5*E),_e+=F*(5*de),oe=_e>>>13,_e&=8191,_e+=B*(5*ue),_e+=te*(5*se),_e+=$*(5*W),_e+=L*(5*G),_e+=C*(5*w),oe+=_e>>>13,_e&=8191;var H=oe;H+=b*w,H+=D*u,H+=O*S,H+=x*A,H+=F*(5*E),oe=H>>>13,H&=8191,H+=B*(5*de),H+=te*(5*ue),H+=$*(5*se),H+=L*(5*W),H+=C*(5*G),oe+=H>>>13,H&=8191;var z=oe;z+=b*G,z+=D*w,z+=O*u,z+=x*S,z+=F*A,oe=z>>>13,z&=8191,z+=B*(5*E),z+=te*(5*de),z+=$*(5*ue),z+=L*(5*se),z+=C*(5*W),oe+=z>>>13,z&=8191;var U=oe;U+=b*W,U+=D*G,U+=O*w,U+=x*u,U+=F*S,oe=U>>>13,U&=8191,U+=B*A,U+=te*(5*E),U+=$*(5*de),U+=L*(5*ue),U+=C*(5*se),oe+=U>>>13,U&=8191;var d=oe;d+=b*se,d+=D*W,d+=O*G,d+=x*w,d+=F*u,oe=d>>>13,d&=8191,d+=B*S,d+=te*A,d+=$*(5*E),d+=L*(5*de),d+=C*(5*ue),oe+=d>>>13,d&=8191;var R=oe;R+=b*ue,R+=D*se,R+=O*W,R+=x*G,R+=F*w,oe=R>>>13,R&=8191,R+=B*u,R+=te*S,R+=$*A,R+=L*(5*E),R+=C*(5*de),oe+=R>>>13,R&=8191;var ae=oe;ae+=b*de,ae+=D*ue,ae+=O*se,ae+=x*W,ae+=F*G,oe=ae>>>13,ae&=8191,ae+=B*w,ae+=te*u,ae+=$*S,ae+=L*A,ae+=C*(5*E),oe+=ae>>>13,ae&=8191;var fe=oe;fe+=b*E,fe+=D*de,fe+=O*ue,fe+=x*se,fe+=F*W,oe=fe>>>13,fe&=8191,fe+=B*G,fe+=te*w,fe+=$*u,fe+=L*S,fe+=C*A,oe+=fe>>>13,fe&=8191,oe=(oe<<2)+oe|0,oe=oe+be|0,be=oe&8191,oe=oe>>>13,le+=oe,b=be,D=le,O=_e,x=H,F=z,B=U,te=d,$=R,L=ae,C=fe,g+=16,p-=16}this._h[0]=b,this._h[1]=D,this._h[2]=O,this._h[3]=x,this._h[4]=F,this._h[5]=B,this._h[6]=te,this._h[7]=$,this._h[8]=L,this._h[9]=C},l.prototype.finish=function(f,g){g===void 0&&(g=0);var p=new Uint16Array(10),v,b,D,O;if(this._leftover){for(O=this._leftover,this._buffer[O++]=1;O<16;O++)this._buffer[O]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(v=this._h[1]>>>13,this._h[1]&=8191,O=2;O<10;O++)this._h[O]+=v,v=this._h[O]>>>13,this._h[O]&=8191;for(this._h[0]+=v*5,v=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=v,v=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=v,p[0]=this._h[0]+5,v=p[0]>>>13,p[0]&=8191,O=1;O<10;O++)p[O]=this._h[O]+v,v=p[O]>>>13,p[O]&=8191;for(p[9]-=8192,b=(v^1)-1,O=0;O<10;O++)p[O]&=b;for(b=~b,O=0;O<10;O++)this._h[O]=this._h[O]&b|p[O];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,D=this._h[0]+this._pad[0],this._h[0]=D&65535,O=1;O<8;O++)D=(this._h[O]+this._pad[O]|0)+(D>>>16)|0,this._h[O]=D&65535;return f[g+0]=this._h[0]>>>0,f[g+1]=this._h[0]>>>8,f[g+2]=this._h[1]>>>0,f[g+3]=this._h[1]>>>8,f[g+4]=this._h[2]>>>0,f[g+5]=this._h[2]>>>8,f[g+6]=this._h[3]>>>0,f[g+7]=this._h[3]>>>8,f[g+8]=this._h[4]>>>0,f[g+9]=this._h[4]>>>8,f[g+10]=this._h[5]>>>0,f[g+11]=this._h[5]>>>8,f[g+12]=this._h[6]>>>0,f[g+13]=this._h[6]>>>8,f[g+14]=this._h[7]>>>0,f[g+15]=this._h[7]>>>8,this._finished=!0,this},l.prototype.update=function(f){var g=0,p=f.length,v;if(this._leftover){v=16-this._leftover,v>p&&(v=p);for(var b=0;b<v;b++)this._buffer[this._leftover+b]=f[g+b];if(p-=v,g+=v,this._leftover+=v,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(p>=16&&(v=p-p%16,this._blocks(f,g,v),g+=v,p-=v),p){for(var b=0;b<p;b++)this._buffer[this._leftover+b]=f[g+b];this._leftover+=p}return this},l.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var f=new Uint8Array(16);return this.finish(f),f},l.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},l}();i.Poly1305=s;function o(l,f){var g=new s(l);g.update(f);var p=g.digest();return g.clean(),p}i.oneTimeAuth=o;function c(l,f){return l.length!==i.DIGEST_LENGTH||f.length!==i.DIGEST_LENGTH?!1:e.equal(l,f)}i.equal=c})(ap);(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=sa,t=ap,s=Tr,o=Le,c=Fi;i.KEY_LENGTH=32,i.NONCE_LENGTH=12,i.TAG_LENGTH=16;var l=new Uint8Array(16),f=function(){function g(p){if(this.nonceLength=i.NONCE_LENGTH,this.tagLength=i.TAG_LENGTH,p.length!==i.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(p)}return g.prototype.seal=function(p,v,b,D){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var O=new Uint8Array(16);O.set(p,O.length-p.length);var x=new Uint8Array(32);e.stream(this._key,O,x,4);var F=v.length+this.tagLength,B;if(D){if(D.length!==F)throw new Error("ChaCha20Poly1305: incorrect destination length");B=D}else B=new Uint8Array(F);return e.streamXOR(this._key,O,v,B,4),this._authenticate(B.subarray(B.length-this.tagLength,B.length),x,B.subarray(0,B.length-this.tagLength),b),s.wipe(O),B},g.prototype.open=function(p,v,b,D){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(v.length<this.tagLength)return null;var O=new Uint8Array(16);O.set(p,O.length-p.length);var x=new Uint8Array(32);e.stream(this._key,O,x,4);var F=new Uint8Array(this.tagLength);if(this._authenticate(F,x,v.subarray(0,v.length-this.tagLength),b),!c.equal(F,v.subarray(v.length-this.tagLength,v.length)))return null;var B=v.length-this.tagLength,te;if(D){if(D.length!==B)throw new Error("ChaCha20Poly1305: incorrect destination length");te=D}else te=new Uint8Array(B);return e.streamXOR(this._key,O,v.subarray(0,v.length-this.tagLength),te,4),s.wipe(O),te},g.prototype.clean=function(){return s.wipe(this._key),this},g.prototype._authenticate=function(p,v,b,D){var O=new t.Poly1305(v);D&&(O.update(D),D.length%16>0&&O.update(l.subarray(D.length%16))),O.update(b),b.length%16>0&&O.update(l.subarray(b.length%16));var x=new Uint8Array(8);D&&o.writeUint64LE(D.length,x),O.update(x),o.writeUint64LE(b.length,x),O.update(x);for(var F=O.digest(),B=0;B<F.length;B++)p[B]=F[B];O.clean(),s.wipe(F),s.wipe(x)},g}();i.ChaCha20Poly1305=f})(Vu);var up={},Rs={},Gu={};Object.defineProperty(Gu,"__esModule",{value:!0});function O1(i){return typeof i.saveState<"u"&&typeof i.restoreState<"u"&&typeof i.cleanSavedState<"u"}Gu.isSerializableHash=O1;Object.defineProperty(Rs,"__esModule",{value:!0});var ii=Gu,x1=Fi,P1=Tr,hp=function(){function i(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(s).clean():s.set(t);for(var o=0;o<s.length;o++)s[o]^=54;this._inner.update(s);for(var o=0;o<s.length;o++)s[o]^=106;this._outer.update(s),ii.isSerializableHash(this._inner)&&ii.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),P1.wipe(s)}return i.prototype.reset=function(){if(!ii.isSerializableHash(this._inner)||!ii.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.clean=function(){ii.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),ii.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},i.prototype.update=function(e){return this._inner.update(e),this},i.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},i.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},i.prototype.saveState=function(){if(!ii.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},i.prototype.restoreState=function(e){if(!ii.isSerializableHash(this._inner)||!ii.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.cleanSavedState=function(e){if(!ii.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},i}();Rs.HMAC=hp;function C1(i,e,t){var s=new hp(i,e);s.update(t);var o=s.digest();return s.clean(),o}Rs.hmac=C1;Rs.equal=x1.equal;Object.defineProperty(up,"__esModule",{value:!0});var pf=Rs,gf=Tr,T1=function(){function i(e,t,s,o){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=o;var c=pf.hmac(this._hash,s,t);this._hmac=new pf.HMAC(e,c),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return i.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},i.prototype.expand=function(e){for(var t=new Uint8Array(e),s=0;s<t.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[s]=this._buffer[this._bufpos++];return t},i.prototype.clean=function(){this._hmac.clean(),gf.wipe(this._buffer),gf.wipe(this._counter),this._bufpos=0},i}(),A1=up.HKDF=T1,Bn={},oa={},aa={};Object.defineProperty(aa,"__esModule",{value:!0});aa.BrowserRandomSource=void 0;const yf=65536;class R1{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let s=0;s<t.length;s+=yf)this._crypto.getRandomValues(t.subarray(s,s+Math.min(t.length-s,yf)));return t}}aa.BrowserRandomSource=R1;function N1(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ca={};Object.defineProperty(ca,"__esModule",{value:!0});ca.NodeRandomSource=void 0;const $1=Tr;class U1{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof N1<"u"){const e=Yw;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(e);for(let o=0;o<s.length;o++)s[o]=t[o];return(0,$1.wipe)(t),s}}ca.NodeRandomSource=U1;Object.defineProperty(oa,"__esModule",{value:!0});oa.SystemRandomSource=void 0;const L1=aa,j1=ca;class M1{constructor(){if(this.isAvailable=!1,this.name="",this._source=new L1.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new j1.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}oa.SystemRandomSource=M1;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.randomStringForEntropy=i.randomString=i.randomUint32=i.randomBytes=i.defaultRandomSource=void 0;const e=oa,t=Le,s=Tr;i.defaultRandomSource=new e.SystemRandomSource;function o(p,v=i.defaultRandomSource){return v.randomBytes(p)}i.randomBytes=o;function c(p=i.defaultRandomSource){const v=o(4,p),b=(0,t.readUint32LE)(v);return(0,s.wipe)(v),b}i.randomUint32=c;const l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function f(p,v=l,b=i.defaultRandomSource){if(v.length<2)throw new Error("randomString charset is too short");if(v.length>256)throw new Error("randomString charset is too long");let D="";const O=v.length,x=256-256%O;for(;p>0;){const F=o(Math.ceil(p*256/x),b);for(let B=0;B<F.length&&p>0;B++){const te=F[B];te<x&&(D+=v.charAt(te%O),p--)}(0,s.wipe)(F)}return D}i.randomString=f;function g(p,v=l,b=i.defaultRandomSource){const D=Math.ceil(p/(Math.log(v.length)/Math.LN2));return f(D,v,b)}i.randomStringForEntropy=g})(Bn);var ua={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Le,t=Tr;i.DIGEST_LENGTH=32,i.BLOCK_SIZE=64;var s=function(){function f(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return f.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},f.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},f.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},f.prototype.update=function(g,p){if(p===void 0&&(p=g.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var v=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&p>0;)this._buffer[this._bufferLength++]=g[v++],p--;this._bufferLength===this.blockSize&&(c(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(v=c(this._temp,this._state,g,v,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=g[v++],p--;return this},f.prototype.finish=function(g){if(!this._finished){var p=this._bytesHashed,v=this._bufferLength,b=p/536870912|0,D=p<<3,O=p%64<56?64:128;this._buffer[v]=128;for(var x=v+1;x<O-8;x++)this._buffer[x]=0;e.writeUint32BE(b,this._buffer,O-8),e.writeUint32BE(D,this._buffer,O-4),c(this._temp,this._state,this._buffer,0,O),this._finished=!0}for(var x=0;x<this.digestLength/4;x++)e.writeUint32BE(this._state[x],g,x*4);return this},f.prototype.digest=function(){var g=new Uint8Array(this.digestLength);return this.finish(g),g},f.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},f.prototype.restoreState=function(g){return this._state.set(g.state),this._bufferLength=g.bufferLength,g.buffer&&this._buffer.set(g.buffer),this._bytesHashed=g.bytesHashed,this._finished=!1,this},f.prototype.cleanSavedState=function(g){t.wipe(g.state),g.buffer&&t.wipe(g.buffer),g.bufferLength=0,g.bytesHashed=0},f}();i.SHA256=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function c(f,g,p,v,b){for(;b>=64;){for(var D=g[0],O=g[1],x=g[2],F=g[3],B=g[4],te=g[5],$=g[6],L=g[7],C=0;C<16;C++){var A=v+C*4;f[C]=e.readUint32BE(p,A)}for(var C=16;C<64;C++){var S=f[C-2],u=(S>>>17|S<<15)^(S>>>19|S<<13)^S>>>10;S=f[C-15];var w=(S>>>7|S<<25)^(S>>>18|S<<14)^S>>>3;f[C]=(u+f[C-7]|0)+(w+f[C-16]|0)}for(var C=0;C<64;C++){var u=(((B>>>6|B<<26)^(B>>>11|B<<21)^(B>>>25|B<<7))+(B&te^~B&$)|0)+(L+(o[C]+f[C]|0)|0)|0,w=((D>>>2|D<<30)^(D>>>13|D<<19)^(D>>>22|D<<10))+(D&O^D&x^O&x)|0;L=$,$=te,te=B,B=F+u|0,F=x,x=O,O=D,D=u+w|0}g[0]+=D,g[1]+=O,g[2]+=x,g[3]+=F,g[4]+=B,g[5]+=te,g[6]+=$,g[7]+=L,v+=64,b-=64}return v}function l(f){var g=new s;g.update(f);var p=g.digest();return g.clean(),p}i.hash=l})(ua);var Wu={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.sharedKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.scalarMultBase=i.scalarMult=i.SHARED_KEY_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=void 0;const e=Bn,t=Tr;i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=32,i.SHARED_KEY_LENGTH=32;function s(C){const A=new Float64Array(16);if(C)for(let S=0;S<C.length;S++)A[S]=C[S];return A}const o=new Uint8Array(32);o[0]=9;const c=s([56129,1]);function l(C){let A=1;for(let S=0;S<16;S++){let u=C[S]+A+65535;A=Math.floor(u/65536),C[S]=u-A*65536}C[0]+=A-1+37*(A-1)}function f(C,A,S){const u=~(S-1);for(let w=0;w<16;w++){const G=u&(C[w]^A[w]);C[w]^=G,A[w]^=G}}function g(C,A){const S=s(),u=s();for(let w=0;w<16;w++)u[w]=A[w];l(u),l(u),l(u);for(let w=0;w<2;w++){S[0]=u[0]-65517;for(let W=1;W<15;W++)S[W]=u[W]-65535-(S[W-1]>>16&1),S[W-1]&=65535;S[15]=u[15]-32767-(S[14]>>16&1);const G=S[15]>>16&1;S[14]&=65535,f(u,S,1-G)}for(let w=0;w<16;w++)C[2*w]=u[w]&255,C[2*w+1]=u[w]>>8}function p(C,A){for(let S=0;S<16;S++)C[S]=A[2*S]+(A[2*S+1]<<8);C[15]&=32767}function v(C,A,S){for(let u=0;u<16;u++)C[u]=A[u]+S[u]}function b(C,A,S){for(let u=0;u<16;u++)C[u]=A[u]-S[u]}function D(C,A,S){let u,w,G=0,W=0,se=0,ue=0,de=0,E=0,T=0,ee=0,Q=0,k=0,V=0,Y=0,ie=0,we=0,oe=0,be=0,le=0,_e=0,H=0,z=0,U=0,d=0,R=0,ae=0,fe=0,Ie=0,Be=0,ke=0,je=0,gt=0,yt=0,qe=S[0],Oe=S[1],Ne=S[2],$e=S[3],Fe=S[4],Pe=S[5],Ue=S[6],Se=S[7],Ce=S[8],He=S[9],xe=S[10],Ve=S[11],We=S[12],et=S[13],tt=S[14],Qe=S[15];u=A[0],G+=u*qe,W+=u*Oe,se+=u*Ne,ue+=u*$e,de+=u*Fe,E+=u*Pe,T+=u*Ue,ee+=u*Se,Q+=u*Ce,k+=u*He,V+=u*xe,Y+=u*Ve,ie+=u*We,we+=u*et,oe+=u*tt,be+=u*Qe,u=A[1],W+=u*qe,se+=u*Oe,ue+=u*Ne,de+=u*$e,E+=u*Fe,T+=u*Pe,ee+=u*Ue,Q+=u*Se,k+=u*Ce,V+=u*He,Y+=u*xe,ie+=u*Ve,we+=u*We,oe+=u*et,be+=u*tt,le+=u*Qe,u=A[2],se+=u*qe,ue+=u*Oe,de+=u*Ne,E+=u*$e,T+=u*Fe,ee+=u*Pe,Q+=u*Ue,k+=u*Se,V+=u*Ce,Y+=u*He,ie+=u*xe,we+=u*Ve,oe+=u*We,be+=u*et,le+=u*tt,_e+=u*Qe,u=A[3],ue+=u*qe,de+=u*Oe,E+=u*Ne,T+=u*$e,ee+=u*Fe,Q+=u*Pe,k+=u*Ue,V+=u*Se,Y+=u*Ce,ie+=u*He,we+=u*xe,oe+=u*Ve,be+=u*We,le+=u*et,_e+=u*tt,H+=u*Qe,u=A[4],de+=u*qe,E+=u*Oe,T+=u*Ne,ee+=u*$e,Q+=u*Fe,k+=u*Pe,V+=u*Ue,Y+=u*Se,ie+=u*Ce,we+=u*He,oe+=u*xe,be+=u*Ve,le+=u*We,_e+=u*et,H+=u*tt,z+=u*Qe,u=A[5],E+=u*qe,T+=u*Oe,ee+=u*Ne,Q+=u*$e,k+=u*Fe,V+=u*Pe,Y+=u*Ue,ie+=u*Se,we+=u*Ce,oe+=u*He,be+=u*xe,le+=u*Ve,_e+=u*We,H+=u*et,z+=u*tt,U+=u*Qe,u=A[6],T+=u*qe,ee+=u*Oe,Q+=u*Ne,k+=u*$e,V+=u*Fe,Y+=u*Pe,ie+=u*Ue,we+=u*Se,oe+=u*Ce,be+=u*He,le+=u*xe,_e+=u*Ve,H+=u*We,z+=u*et,U+=u*tt,d+=u*Qe,u=A[7],ee+=u*qe,Q+=u*Oe,k+=u*Ne,V+=u*$e,Y+=u*Fe,ie+=u*Pe,we+=u*Ue,oe+=u*Se,be+=u*Ce,le+=u*He,_e+=u*xe,H+=u*Ve,z+=u*We,U+=u*et,d+=u*tt,R+=u*Qe,u=A[8],Q+=u*qe,k+=u*Oe,V+=u*Ne,Y+=u*$e,ie+=u*Fe,we+=u*Pe,oe+=u*Ue,be+=u*Se,le+=u*Ce,_e+=u*He,H+=u*xe,z+=u*Ve,U+=u*We,d+=u*et,R+=u*tt,ae+=u*Qe,u=A[9],k+=u*qe,V+=u*Oe,Y+=u*Ne,ie+=u*$e,we+=u*Fe,oe+=u*Pe,be+=u*Ue,le+=u*Se,_e+=u*Ce,H+=u*He,z+=u*xe,U+=u*Ve,d+=u*We,R+=u*et,ae+=u*tt,fe+=u*Qe,u=A[10],V+=u*qe,Y+=u*Oe,ie+=u*Ne,we+=u*$e,oe+=u*Fe,be+=u*Pe,le+=u*Ue,_e+=u*Se,H+=u*Ce,z+=u*He,U+=u*xe,d+=u*Ve,R+=u*We,ae+=u*et,fe+=u*tt,Ie+=u*Qe,u=A[11],Y+=u*qe,ie+=u*Oe,we+=u*Ne,oe+=u*$e,be+=u*Fe,le+=u*Pe,_e+=u*Ue,H+=u*Se,z+=u*Ce,U+=u*He,d+=u*xe,R+=u*Ve,ae+=u*We,fe+=u*et,Ie+=u*tt,Be+=u*Qe,u=A[12],ie+=u*qe,we+=u*Oe,oe+=u*Ne,be+=u*$e,le+=u*Fe,_e+=u*Pe,H+=u*Ue,z+=u*Se,U+=u*Ce,d+=u*He,R+=u*xe,ae+=u*Ve,fe+=u*We,Ie+=u*et,Be+=u*tt,ke+=u*Qe,u=A[13],we+=u*qe,oe+=u*Oe,be+=u*Ne,le+=u*$e,_e+=u*Fe,H+=u*Pe,z+=u*Ue,U+=u*Se,d+=u*Ce,R+=u*He,ae+=u*xe,fe+=u*Ve,Ie+=u*We,Be+=u*et,ke+=u*tt,je+=u*Qe,u=A[14],oe+=u*qe,be+=u*Oe,le+=u*Ne,_e+=u*$e,H+=u*Fe,z+=u*Pe,U+=u*Ue,d+=u*Se,R+=u*Ce,ae+=u*He,fe+=u*xe,Ie+=u*Ve,Be+=u*We,ke+=u*et,je+=u*tt,gt+=u*Qe,u=A[15],be+=u*qe,le+=u*Oe,_e+=u*Ne,H+=u*$e,z+=u*Fe,U+=u*Pe,d+=u*Ue,R+=u*Se,ae+=u*Ce,fe+=u*He,Ie+=u*xe,Be+=u*Ve,ke+=u*We,je+=u*et,gt+=u*tt,yt+=u*Qe,G+=38*le,W+=38*_e,se+=38*H,ue+=38*z,de+=38*U,E+=38*d,T+=38*R,ee+=38*ae,Q+=38*fe,k+=38*Ie,V+=38*Be,Y+=38*ke,ie+=38*je,we+=38*gt,oe+=38*yt,w=1,u=G+w+65535,w=Math.floor(u/65536),G=u-w*65536,u=W+w+65535,w=Math.floor(u/65536),W=u-w*65536,u=se+w+65535,w=Math.floor(u/65536),se=u-w*65536,u=ue+w+65535,w=Math.floor(u/65536),ue=u-w*65536,u=de+w+65535,w=Math.floor(u/65536),de=u-w*65536,u=E+w+65535,w=Math.floor(u/65536),E=u-w*65536,u=T+w+65535,w=Math.floor(u/65536),T=u-w*65536,u=ee+w+65535,w=Math.floor(u/65536),ee=u-w*65536,u=Q+w+65535,w=Math.floor(u/65536),Q=u-w*65536,u=k+w+65535,w=Math.floor(u/65536),k=u-w*65536,u=V+w+65535,w=Math.floor(u/65536),V=u-w*65536,u=Y+w+65535,w=Math.floor(u/65536),Y=u-w*65536,u=ie+w+65535,w=Math.floor(u/65536),ie=u-w*65536,u=we+w+65535,w=Math.floor(u/65536),we=u-w*65536,u=oe+w+65535,w=Math.floor(u/65536),oe=u-w*65536,u=be+w+65535,w=Math.floor(u/65536),be=u-w*65536,G+=w-1+37*(w-1),w=1,u=G+w+65535,w=Math.floor(u/65536),G=u-w*65536,u=W+w+65535,w=Math.floor(u/65536),W=u-w*65536,u=se+w+65535,w=Math.floor(u/65536),se=u-w*65536,u=ue+w+65535,w=Math.floor(u/65536),ue=u-w*65536,u=de+w+65535,w=Math.floor(u/65536),de=u-w*65536,u=E+w+65535,w=Math.floor(u/65536),E=u-w*65536,u=T+w+65535,w=Math.floor(u/65536),T=u-w*65536,u=ee+w+65535,w=Math.floor(u/65536),ee=u-w*65536,u=Q+w+65535,w=Math.floor(u/65536),Q=u-w*65536,u=k+w+65535,w=Math.floor(u/65536),k=u-w*65536,u=V+w+65535,w=Math.floor(u/65536),V=u-w*65536,u=Y+w+65535,w=Math.floor(u/65536),Y=u-w*65536,u=ie+w+65535,w=Math.floor(u/65536),ie=u-w*65536,u=we+w+65535,w=Math.floor(u/65536),we=u-w*65536,u=oe+w+65535,w=Math.floor(u/65536),oe=u-w*65536,u=be+w+65535,w=Math.floor(u/65536),be=u-w*65536,G+=w-1+37*(w-1),C[0]=G,C[1]=W,C[2]=se,C[3]=ue,C[4]=de,C[5]=E,C[6]=T,C[7]=ee,C[8]=Q,C[9]=k,C[10]=V,C[11]=Y,C[12]=ie,C[13]=we,C[14]=oe,C[15]=be}function O(C,A){D(C,A,A)}function x(C,A){const S=s();for(let u=0;u<16;u++)S[u]=A[u];for(let u=253;u>=0;u--)O(S,S),u!==2&&u!==4&&D(S,S,A);for(let u=0;u<16;u++)C[u]=S[u]}function F(C,A){const S=new Uint8Array(32),u=new Float64Array(80),w=s(),G=s(),W=s(),se=s(),ue=s(),de=s();for(let Q=0;Q<31;Q++)S[Q]=C[Q];S[31]=C[31]&127|64,S[0]&=248,p(u,A);for(let Q=0;Q<16;Q++)G[Q]=u[Q];w[0]=se[0]=1;for(let Q=254;Q>=0;--Q){const k=S[Q>>>3]>>>(Q&7)&1;f(w,G,k),f(W,se,k),v(ue,w,W),b(w,w,W),v(W,G,se),b(G,G,se),O(se,ue),O(de,w),D(w,W,w),D(W,G,ue),v(ue,w,W),b(w,w,W),O(G,w),b(W,se,de),D(w,W,c),v(w,w,se),D(W,W,w),D(w,se,de),D(se,G,u),O(G,ue),f(w,G,k),f(W,se,k)}for(let Q=0;Q<16;Q++)u[Q+16]=w[Q],u[Q+32]=W[Q],u[Q+48]=G[Q],u[Q+64]=se[Q];const E=u.subarray(32),T=u.subarray(16);x(E,E),D(T,T,E);const ee=new Uint8Array(32);return g(ee,T),ee}i.scalarMult=F;function B(C){return F(C,o)}i.scalarMultBase=B;function te(C){if(C.length!==i.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${i.SECRET_KEY_LENGTH} bytes`);const A=new Uint8Array(C);return{publicKey:B(A),secretKey:A}}i.generateKeyPairFromSeed=te;function $(C){const A=(0,e.randomBytes)(32,C),S=te(A);return(0,t.wipe)(A),S}i.generateKeyPair=$;function L(C,A,S=!1){if(C.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(A.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const u=F(C,A);if(S){let w=0;for(let G=0;G<u.length;G++)w|=u[G];if(w===0)throw new Error("X25519: invalid shared key")}return u}i.sharedKey=L})(Wu);function Ju(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function lp(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Ju(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function yu(i,e){e||(e=i.reduce((o,c)=>o+c.length,0));const t=lp(e);let s=0;for(const o of i)t.set(o,s),s+=o.length;return Ju(t)}function q1(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<i.length;o++){var c=i.charAt(o),l=c.charCodeAt(0);if(t[l]!==255)throw new TypeError(c+" is ambiguous");t[l]=o}var f=i.length,g=i.charAt(0),p=Math.log(f)/Math.log(256),v=Math.log(256)/Math.log(f);function b(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var F=0,B=0,te=0,$=x.length;te!==$&&x[te]===0;)te++,F++;for(var L=($-te)*v+1>>>0,C=new Uint8Array(L);te!==$;){for(var A=x[te],S=0,u=L-1;(A!==0||S<B)&&u!==-1;u--,S++)A+=256*C[u]>>>0,C[u]=A%f>>>0,A=A/f>>>0;if(A!==0)throw new Error("Non-zero carry");B=S,te++}for(var w=L-B;w!==L&&C[w]===0;)w++;for(var G=g.repeat(F);w<L;++w)G+=i.charAt(C[w]);return G}function D(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;var F=0;if(x[F]!==" "){for(var B=0,te=0;x[F]===g;)B++,F++;for(var $=(x.length-F)*p+1>>>0,L=new Uint8Array($);x[F];){var C=t[x.charCodeAt(F)];if(C===255)return;for(var A=0,S=$-1;(C!==0||A<te)&&S!==-1;S--,A++)C+=f*L[S]>>>0,L[S]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");te=A,F++}if(x[F]!==" "){for(var u=$-te;u!==$&&L[u]===0;)u++;for(var w=new Uint8Array(B+($-u)),G=B;u!==$;)w[G++]=L[u++];return w}}}function O(x){var F=D(x);if(F)return F;throw new Error(`Non-${e} character`)}return{encode:b,decodeUnsafe:D,decode:O}}var F1=q1,z1=F1;const B1=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},H1=i=>new TextEncoder().encode(i),K1=i=>new TextDecoder().decode(i);class k1{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class V1{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return fp(this,e)}}class G1{constructor(e){this.decoders=e}or(e){return fp(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const fp=(i,e)=>new G1({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});class W1{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new k1(e,t,s),this.decoder=new V1(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ha=({name:i,prefix:e,encode:t,decode:s})=>new W1(i,e,t,s),Ns=({prefix:i,name:e,alphabet:t})=>{const{encode:s,decode:o}=z1(t,e);return ha({prefix:i,name:e,encode:s,decode:c=>B1(o(c))})},J1=(i,e,t,s)=>{const o={};for(let v=0;v<e.length;++v)o[e[v]]=v;let c=i.length;for(;i[c-1]==="=";)--c;const l=new Uint8Array(c*t/8|0);let f=0,g=0,p=0;for(let v=0;v<c;++v){const b=o[i[v]];if(b===void 0)throw new SyntaxError(`Non-${s} character`);g=g<<t|b,f+=t,f>=8&&(f-=8,l[p++]=255&g>>f)}if(f>=t||255&g<<8-f)throw new SyntaxError("Unexpected end of data");return l},Y1=(i,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let c="",l=0,f=0;for(let g=0;g<i.length;++g)for(f=f<<8|i[g],l+=8;l>t;)l-=t,c+=e[o&f>>l];if(l&&(c+=e[o&f<<t-l]),s)for(;c.length*t&7;)c+="=";return c},Yt=({name:i,prefix:e,bitsPerChar:t,alphabet:s})=>ha({prefix:e,name:i,encode(o){return Y1(o,s,t)},decode(o){return J1(o,s,t,i)}}),Q1=ha({prefix:"\0",name:"identity",encode:i=>K1(i),decode:i=>H1(i)}),X1=Object.freeze(Object.defineProperty({__proto__:null,identity:Q1},Symbol.toStringTag,{value:"Module"})),Z1=Yt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),eb=Object.freeze(Object.defineProperty({__proto__:null,base2:Z1},Symbol.toStringTag,{value:"Module"})),tb=Yt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),rb=Object.freeze(Object.defineProperty({__proto__:null,base8:tb},Symbol.toStringTag,{value:"Module"})),ib=Ns({prefix:"9",name:"base10",alphabet:"0123456789"}),nb=Object.freeze(Object.defineProperty({__proto__:null,base10:ib},Symbol.toStringTag,{value:"Module"})),sb=Yt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ob=Yt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),ab=Object.freeze(Object.defineProperty({__proto__:null,base16:sb,base16upper:ob},Symbol.toStringTag,{value:"Module"})),cb=Yt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ub=Yt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),hb=Yt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),lb=Yt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),fb=Yt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),db=Yt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),pb=Yt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),gb=Yt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),yb=Yt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),vb=Object.freeze(Object.defineProperty({__proto__:null,base32:cb,base32hex:fb,base32hexpad:pb,base32hexpadupper:gb,base32hexupper:db,base32pad:hb,base32padupper:lb,base32upper:ub,base32z:yb},Symbol.toStringTag,{value:"Module"})),_b=Ns({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),mb=Ns({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),wb=Object.freeze(Object.defineProperty({__proto__:null,base36:_b,base36upper:mb},Symbol.toStringTag,{value:"Module"})),bb=Ns({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Eb=Ns({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Db=Object.freeze(Object.defineProperty({__proto__:null,base58btc:bb,base58flickr:Eb},Symbol.toStringTag,{value:"Module"})),Sb=Yt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ib=Yt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ob=Yt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),xb=Yt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Pb=Object.freeze(Object.defineProperty({__proto__:null,base64:Sb,base64pad:Ib,base64url:Ob,base64urlpad:xb},Symbol.toStringTag,{value:"Module"})),dp=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Cb=dp.reduce((i,e,t)=>(i[t]=e,i),[]),Tb=dp.reduce((i,e,t)=>(i[e.codePointAt(0)]=t,i),[]);function Ab(i){return i.reduce((e,t)=>(e+=Cb[t],e),"")}function Rb(i){const e=[];for(const t of i){const s=Tb[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const Nb=ha({prefix:"🚀",name:"base256emoji",encode:Ab,decode:Rb}),$b=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Nb},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const vf={...X1,...eb,...rb,...nb,...ab,...vb,...wb,...Db,...Pb,...$b};function pp(i,e,t,s){return{name:i,prefix:e,encoder:{name:i,prefix:e,encode:t},decoder:{decode:s}}}const _f=pp("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),Bc=pp("ascii","a",i=>{let e="a";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e},i=>{i=i.substring(1);const e=lp(i.length);for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e}),gp={utf8:_f,"utf-8":_f,hex:vf.base16,latin1:Bc,ascii:Bc,binary:Bc,...vf};function br(i,e="utf8"){const t=gp[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ju(globalThis.Buffer.from(i,"utf-8")):t.decoder.decode(`${t.prefix}${i}`)}function fr(i,e="utf8"){const t=gp[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(i.buffer,i.byteOffset,i.byteLength).toString("utf8"):t.encoder.encode(i).substring(1)}var ve={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vu=function(i,e){return vu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},vu(i,e)};function Ub(i,e){vu(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var _u=function(){return _u=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},_u.apply(this,arguments)};function Lb(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function jb(i,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,s);else for(var f=i.length-1;f>=0;f--)(l=i[f])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function Mb(i,e){return function(t,s){e(t,s,i)}}function qb(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function Fb(i,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function f(v){try{p(s.next(v))}catch(b){l(b)}}function g(v){try{p(s.throw(v))}catch(b){l(b)}}function p(v){v.done?c(v.value):o(v.value).then(f,g)}p((s=s.apply(i,e||[])).next())})}function zb(i,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(v){return g([p,v])}}function g(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(i,t)}catch(v){p=[6,v],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function Bb(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}function Hb(i,e){for(var t in i)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=i[t])}function mu(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yp(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(f){l={error:f}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function Kb(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(yp(arguments[e]));return i}function kb(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,f=c.length;l<f;l++,o++)s[o]=c[l];return s}function Is(i){return this instanceof Is?(this.v=i,this):new Is(i)}function Vb(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(D){s[D]&&(o[D]=function(O){return new Promise(function(x,F){c.push([D,O,x,F])>1||f(D,O)})})}function f(D,O){try{g(s[D](O))}catch(x){b(c[0][3],x)}}function g(D){D.value instanceof Is?Promise.resolve(D.value.v).then(p,v):b(c[0][2],D)}function p(D){f("next",D)}function v(D){f("throw",D)}function b(D,O){D(O),c.shift(),c.length&&f(c[0][0],c[0][1])}}function Gb(i){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=i[o]?function(l){return(t=!t)?{value:Is(i[o](l)),done:o==="return"}:c?c(l):l}:c}}function Wb(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof mu=="function"?mu(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=i[c]&&function(l){return new Promise(function(f,g){l=i[c](l),o(f,g,l.done,l.value)})}}function o(c,l,f,g){Promise.resolve(g).then(function(p){c({value:p,done:f})},l)}}function Jb(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function Yb(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e.default=i,e}function Qb(i){return i&&i.__esModule?i:{default:i}}function Xb(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)}function Zb(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t}const eE=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return _u},__asyncDelegator:Gb,__asyncGenerator:Vb,__asyncValues:Wb,__await:Is,__awaiter:Fb,__classPrivateFieldGet:Xb,__classPrivateFieldSet:Zb,__createBinding:Bb,__decorate:jb,__exportStar:Hb,__extends:Ub,__generator:zb,__importDefault:Qb,__importStar:Yb,__makeTemplateObject:Jb,__metadata:qb,__param:Mb,__read:yp,__rest:Lb,__spread:Kb,__spreadArrays:kb,__values:mu},Symbol.toStringTag,{value:"Module"})),la=zn(eE);var Hc={},ps={},mf;function tE(){if(mf)return ps;mf=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.delay=void 0;function i(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return ps.delay=i,ps}var rn={},Kc={},nn={},wf;function rE(){return wf||(wf=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.ONE_THOUSAND=nn.ONE_HUNDRED=void 0,nn.ONE_HUNDRED=100,nn.ONE_THOUSAND=1e3),nn}var kc={},bf;function iE(){return bf||(bf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ONE_YEAR=i.FOUR_WEEKS=i.THREE_WEEKS=i.TWO_WEEKS=i.ONE_WEEK=i.THIRTY_DAYS=i.SEVEN_DAYS=i.FIVE_DAYS=i.THREE_DAYS=i.ONE_DAY=i.TWENTY_FOUR_HOURS=i.TWELVE_HOURS=i.SIX_HOURS=i.THREE_HOURS=i.ONE_HOUR=i.SIXTY_MINUTES=i.THIRTY_MINUTES=i.TEN_MINUTES=i.FIVE_MINUTES=i.ONE_MINUTE=i.SIXTY_SECONDS=i.THIRTY_SECONDS=i.TEN_SECONDS=i.FIVE_SECONDS=i.ONE_SECOND=void 0,i.ONE_SECOND=1,i.FIVE_SECONDS=5,i.TEN_SECONDS=10,i.THIRTY_SECONDS=30,i.SIXTY_SECONDS=60,i.ONE_MINUTE=i.SIXTY_SECONDS,i.FIVE_MINUTES=i.ONE_MINUTE*5,i.TEN_MINUTES=i.ONE_MINUTE*10,i.THIRTY_MINUTES=i.ONE_MINUTE*30,i.SIXTY_MINUTES=i.ONE_MINUTE*60,i.ONE_HOUR=i.SIXTY_MINUTES,i.THREE_HOURS=i.ONE_HOUR*3,i.SIX_HOURS=i.ONE_HOUR*6,i.TWELVE_HOURS=i.ONE_HOUR*12,i.TWENTY_FOUR_HOURS=i.ONE_HOUR*24,i.ONE_DAY=i.TWENTY_FOUR_HOURS,i.THREE_DAYS=i.ONE_DAY*3,i.FIVE_DAYS=i.ONE_DAY*5,i.SEVEN_DAYS=i.ONE_DAY*7,i.THIRTY_DAYS=i.ONE_DAY*30,i.ONE_WEEK=i.SEVEN_DAYS,i.TWO_WEEKS=i.ONE_WEEK*2,i.THREE_WEEKS=i.ONE_WEEK*3,i.FOUR_WEEKS=i.ONE_WEEK*4,i.ONE_YEAR=i.ONE_DAY*365}(kc)),kc}var Ef;function vp(){return Ef||(Ef=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=la;e.__exportStar(rE(),i),e.__exportStar(iE(),i)}(Kc)),Kc}var Df;function nE(){if(Df)return rn;Df=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.fromMiliseconds=rn.toMiliseconds=void 0;const i=vp();function e(s){return s*i.ONE_THOUSAND}rn.toMiliseconds=e;function t(s){return Math.floor(s/i.ONE_THOUSAND)}return rn.fromMiliseconds=t,rn}var Sf;function sE(){return Sf||(Sf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=la;e.__exportStar(tE(),i),e.__exportStar(nE(),i)}(Hc)),Hc}var Un={},If;function oE(){if(If)return Un;If=1,Object.defineProperty(Un,"__esModule",{value:!0}),Un.Watch=void 0;class i{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const s=this.get(t);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const o=Date.now()-s.started;this.timestamps.set(t,{started:s.started,elapsed:o})}get(t){const s=this.timestamps.get(t);if(typeof s>"u")throw new Error(`No timestamp found for label: ${t}`);return s}elapsed(t){const s=this.get(t);return s.elapsed||Date.now()-s.started}}return Un.Watch=i,Un.default=i,Un}var Vc={},gs={},Of;function aE(){if(Of)return gs;Of=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.IWatch=void 0;class i{}return gs.IWatch=i,gs}var xf;function cE(){return xf||(xf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),la.__exportStar(aE(),i)}(Vc)),Vc}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=la;e.__exportStar(sE(),i),e.__exportStar(oE(),i),e.__exportStar(cE(),i),e.__exportStar(vp(),i)})(ve);var lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.getLocalStorage=lt.getLocalStorageOrThrow=lt.getCrypto=lt.getCryptoOrThrow=lt.getLocation=lt.getLocationOrThrow=lt.getNavigator=lt.getNavigatorOrThrow=lt.getDocument=lt.getDocumentOrThrow=lt.getFromWindowOrThrow=lt.getFromWindow=void 0;function un(i){let e;return typeof window<"u"&&typeof window[i]<"u"&&(e=window[i]),e}lt.getFromWindow=un;function Hn(i){const e=un(i);if(!e)throw new Error(`${i} is not defined in Window`);return e}lt.getFromWindowOrThrow=Hn;function uE(){return Hn("document")}lt.getDocumentOrThrow=uE;function hE(){return un("document")}lt.getDocument=hE;function lE(){return Hn("navigator")}lt.getNavigatorOrThrow=lE;function fE(){return un("navigator")}lt.getNavigator=fE;function dE(){return Hn("location")}lt.getLocationOrThrow=dE;function pE(){return un("location")}lt.getLocation=pE;function gE(){return Hn("crypto")}lt.getCryptoOrThrow=gE;function yE(){return un("crypto")}lt.getCrypto=yE;function vE(){return Hn("localStorage")}lt.getLocalStorageOrThrow=vE;function _E(){return un("localStorage")}lt.getLocalStorage=_E;var Yu={};Object.defineProperty(Yu,"__esModule",{value:!0});Yu.getWindowMetadata=void 0;const Pf=lt;function mE(){let i,e;try{i=Pf.getDocumentOrThrow(),e=Pf.getLocationOrThrow()}catch{return null}function t(){const b=i.getElementsByTagName("link"),D=[];for(let O=0;O<b.length;O++){const x=b[O],F=x.getAttribute("rel");if(F&&F.toLowerCase().indexOf("icon")>-1){const B=x.getAttribute("href");if(B)if(B.toLowerCase().indexOf("https:")===-1&&B.toLowerCase().indexOf("http:")===-1&&B.indexOf("//")!==0){let te=e.protocol+"//"+e.host;if(B.indexOf("/")===0)te+=B;else{const $=e.pathname.split("/");$.pop();const L=$.join("/");te+=L+"/"+B}D.push(te)}else if(B.indexOf("//")===0){const te=e.protocol+B;D.push(te)}else D.push(B)}}return D}function s(...b){const D=i.getElementsByTagName("meta");for(let O=0;O<D.length;O++){const x=D[O],F=["itemprop","property","name"].map(B=>x.getAttribute(B)).filter(B=>B?b.includes(B):!1);if(F.length&&F){const B=x.getAttribute("content");if(B)return B}}return""}function o(){let b=s("name","og:site_name","og:title","twitter:title");return b||(b=i.title),b}function c(){return s("description","og:description","twitter:description","keywords")}const l=o(),f=c(),g=e.origin,p=t();return{description:f,url:g,icons:p,name:l}}Yu.getWindowMetadata=mE;var Os={},wE=i=>encodeURIComponent(i).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),_p="%[a-f0-9]{2}",Cf=new RegExp("("+_p+")|([^%]+?)","gi"),Tf=new RegExp("("+_p+")+","gi");function wu(i,e){try{return[decodeURIComponent(i.join(""))]}catch{}if(i.length===1)return i;e=e||1;var t=i.slice(0,e),s=i.slice(e);return Array.prototype.concat.call([],wu(t),wu(s))}function bE(i){try{return decodeURIComponent(i)}catch{for(var e=i.match(Cf)||[],t=1;t<e.length;t++)i=wu(e,t).join(""),e=i.match(Cf)||[];return i}}function EE(i){for(var e={"%FE%FF":"��","%FF%FE":"��"},t=Tf.exec(i);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var s=bE(t[0]);s!==t[0]&&(e[t[0]]=s)}t=Tf.exec(i)}e["%C2"]="�";for(var o=Object.keys(e),c=0;c<o.length;c++){var l=o[c];i=i.replace(new RegExp(l,"g"),e[l])}return i}var DE=function(i){if(typeof i!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof i+"`");try{return i=i.replace(/\+/g," "),decodeURIComponent(i)}catch{return EE(i)}},SE=(i,e)=>{if(!(typeof i=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[i];const t=i.indexOf(e);return t===-1?[i]:[i.slice(0,t),i.slice(t+e.length)]},IE=function(i,e){for(var t={},s=Object.keys(i),o=Array.isArray(e),c=0;c<s.length;c++){var l=s[c],f=i[l];(o?e.indexOf(l)!==-1:e(l,f,i))&&(t[l]=f)}return t};(function(i){const e=wE,t=DE,s=SE,o=IE,c=$=>$==null,l=Symbol("encodeFragmentIdentifier");function f($){switch($.arrayFormat){case"index":return L=>(C,A)=>{const S=C.length;return A===void 0||$.skipNull&&A===null||$.skipEmptyString&&A===""?C:A===null?[...C,[v(L,$),"[",S,"]"].join("")]:[...C,[v(L,$),"[",v(S,$),"]=",v(A,$)].join("")]};case"bracket":return L=>(C,A)=>A===void 0||$.skipNull&&A===null||$.skipEmptyString&&A===""?C:A===null?[...C,[v(L,$),"[]"].join("")]:[...C,[v(L,$),"[]=",v(A,$)].join("")];case"colon-list-separator":return L=>(C,A)=>A===void 0||$.skipNull&&A===null||$.skipEmptyString&&A===""?C:A===null?[...C,[v(L,$),":list="].join("")]:[...C,[v(L,$),":list=",v(A,$)].join("")];case"comma":case"separator":case"bracket-separator":{const L=$.arrayFormat==="bracket-separator"?"[]=":"=";return C=>(A,S)=>S===void 0||$.skipNull&&S===null||$.skipEmptyString&&S===""?A:(S=S===null?"":S,A.length===0?[[v(C,$),L,v(S,$)].join("")]:[[A,v(S,$)].join($.arrayFormatSeparator)])}default:return L=>(C,A)=>A===void 0||$.skipNull&&A===null||$.skipEmptyString&&A===""?C:A===null?[...C,v(L,$)]:[...C,[v(L,$),"=",v(A,$)].join("")]}}function g($){let L;switch($.arrayFormat){case"index":return(C,A,S)=>{if(L=/\[(\d*)\]$/.exec(C),C=C.replace(/\[\d*\]$/,""),!L){S[C]=A;return}S[C]===void 0&&(S[C]={}),S[C][L[1]]=A};case"bracket":return(C,A,S)=>{if(L=/(\[\])$/.exec(C),C=C.replace(/\[\]$/,""),!L){S[C]=A;return}if(S[C]===void 0){S[C]=[A];return}S[C]=[].concat(S[C],A)};case"colon-list-separator":return(C,A,S)=>{if(L=/(:list)$/.exec(C),C=C.replace(/:list$/,""),!L){S[C]=A;return}if(S[C]===void 0){S[C]=[A];return}S[C]=[].concat(S[C],A)};case"comma":case"separator":return(C,A,S)=>{const u=typeof A=="string"&&A.includes($.arrayFormatSeparator),w=typeof A=="string"&&!u&&b(A,$).includes($.arrayFormatSeparator);A=w?b(A,$):A;const G=u||w?A.split($.arrayFormatSeparator).map(W=>b(W,$)):A===null?A:b(A,$);S[C]=G};case"bracket-separator":return(C,A,S)=>{const u=/(\[\])$/.test(C);if(C=C.replace(/\[\]$/,""),!u){S[C]=A&&b(A,$);return}const w=A===null?[]:A.split($.arrayFormatSeparator).map(G=>b(G,$));if(S[C]===void 0){S[C]=w;return}S[C]=[].concat(S[C],w)};default:return(C,A,S)=>{if(S[C]===void 0){S[C]=A;return}S[C]=[].concat(S[C],A)}}}function p($){if(typeof $!="string"||$.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function v($,L){return L.encode?L.strict?e($):encodeURIComponent($):$}function b($,L){return L.decode?t($):$}function D($){return Array.isArray($)?$.sort():typeof $=="object"?D(Object.keys($)).sort((L,C)=>Number(L)-Number(C)).map(L=>$[L]):$}function O($){const L=$.indexOf("#");return L!==-1&&($=$.slice(0,L)),$}function x($){let L="";const C=$.indexOf("#");return C!==-1&&(L=$.slice(C)),L}function F($){$=O($);const L=$.indexOf("?");return L===-1?"":$.slice(L+1)}function B($,L){return L.parseNumbers&&!Number.isNaN(Number($))&&typeof $=="string"&&$.trim()!==""?$=Number($):L.parseBooleans&&$!==null&&($.toLowerCase()==="true"||$.toLowerCase()==="false")&&($=$.toLowerCase()==="true"),$}function te($,L){L=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},L),p(L.arrayFormatSeparator);const C=g(L),A=Object.create(null);if(typeof $!="string"||($=$.trim().replace(/^[?#&]/,""),!$))return A;for(const S of $.split("&")){if(S==="")continue;let[u,w]=s(L.decode?S.replace(/\+/g," "):S,"=");w=w===void 0?null:["comma","separator","bracket-separator"].includes(L.arrayFormat)?w:b(w,L),C(b(u,L),w,A)}for(const S of Object.keys(A)){const u=A[S];if(typeof u=="object"&&u!==null)for(const w of Object.keys(u))u[w]=B(u[w],L);else A[S]=B(u,L)}return L.sort===!1?A:(L.sort===!0?Object.keys(A).sort():Object.keys(A).sort(L.sort)).reduce((S,u)=>{const w=A[u];return w&&typeof w=="object"&&!Array.isArray(w)?S[u]=D(w):S[u]=w,S},Object.create(null))}i.extract=F,i.parse=te,i.stringify=($,L)=>{if(!$)return"";L=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},L),p(L.arrayFormatSeparator);const C=w=>L.skipNull&&c($[w])||L.skipEmptyString&&$[w]==="",A=f(L),S={};for(const w of Object.keys($))C(w)||(S[w]=$[w]);const u=Object.keys(S);return L.sort!==!1&&u.sort(L.sort),u.map(w=>{const G=$[w];return G===void 0?"":G===null?v(w,L):Array.isArray(G)?G.length===0&&L.arrayFormat==="bracket-separator"?v(w,L)+"[]":G.reduce(A(w),[]).join("&"):v(w,L)+"="+v(G,L)}).filter(w=>w.length>0).join("&")},i.parseUrl=($,L)=>{L=Object.assign({decode:!0},L);const[C,A]=s($,"#");return Object.assign({url:C.split("?")[0]||"",query:te(F($),L)},L&&L.parseFragmentIdentifier&&A?{fragmentIdentifier:b(A,L)}:{})},i.stringifyUrl=($,L)=>{L=Object.assign({encode:!0,strict:!0,[l]:!0},L);const C=O($.url).split("?")[0]||"",A=i.extract($.url),S=i.parse(A,{sort:!1}),u=Object.assign(S,$.query);let w=i.stringify(u,L);w&&(w=`?${w}`);let G=x($.url);return $.fragmentIdentifier&&(G=`#${L[l]?v($.fragmentIdentifier,L):$.fragmentIdentifier}`),`${C}${w}${G}`},i.pick=($,L,C)=>{C=Object.assign({parseFragmentIdentifier:!0,[l]:!1},C);const{url:A,query:S,fragmentIdentifier:u}=i.parseUrl($,C);return i.stringifyUrl({url:A,query:o(S,L),fragmentIdentifier:u},C)},i.exclude=($,L,C)=>{const A=Array.isArray(L)?S=>!L.includes(S):(S,u)=>!L(S,u);return i.pick($,A,C)}})(Os);const OE={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function xE(i,e=[]){const t=[];return Object.keys(i).forEach(s=>{if(e.length&&!e.includes(s))return;const o=i[s];t.push(...o.accounts)}),t}const PE={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function CE(i,e){const{message:t,code:s}=PE[i];return{message:e?`${t} ${e}`:t,code:s}}function bu(i,e){return Array.isArray(i)?typeof e<"u"&&i.length?i.every(e):!0:!1}const TE=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,AE=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,RE=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function NE(i,e){if(i==="__proto__"||i==="constructor"&&e&&typeof e=="object"&&"prototype"in e){$E(i);return}return e}function $E(i){console.warn(`[destr] Dropping "${i}" key to prevent prototype pollution.`)}function Ho(i,e={}){if(typeof i!="string")return i;const t=i.trim();if(i[0]==='"'&&i.endsWith('"')&&!i.includes("\\"))return t.slice(1,-1);if(t.length<=9){const s=t.toLowerCase();if(s==="true")return!0;if(s==="false")return!1;if(s==="undefined")return;if(s==="null")return null;if(s==="nan")return Number.NaN;if(s==="infinity")return Number.POSITIVE_INFINITY;if(s==="-infinity")return Number.NEGATIVE_INFINITY}if(!RE.test(i)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return i}try{if(TE.test(i)||AE.test(i)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(i,NE)}return JSON.parse(i)}catch(s){if(e.strict)throw s;return i}}function UE(i){return!i||typeof i.then!="function"?Promise.resolve(i):i}function Gt(i,...e){try{return UE(i(...e))}catch(t){return Promise.reject(t)}}function LE(i){const e=typeof i;return i===null||e!=="object"&&e!=="function"}function jE(i){const e=Object.getPrototypeOf(i);return!e||e.isPrototypeOf(Object)}function Jo(i){if(LE(i))return String(i);if(jE(i)||Array.isArray(i))return JSON.stringify(i);if(typeof i.toJSON=="function")return Jo(i.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function mp(){if(typeof Hu.Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const Eu="base64:";function ME(i){if(typeof i=="string")return i;mp();const e=Hu.Buffer.from(i).toString("base64");return Eu+e}function qE(i){return typeof i!="string"||!i.startsWith(Eu)?i:(mp(),Hu.Buffer.from(i.slice(Eu.length),"base64"))}function mr(i){return i?i.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function FE(...i){return mr(i.join(":"))}function Ko(i){return i=mr(i),i?i+":":""}const zE="memory",BE=()=>{const i=new Map;return{name:zE,options:{},hasItem(e){return i.has(e)},getItem(e){return i.get(e)??null},getItemRaw(e){return i.get(e)??null},setItem(e,t){i.set(e,t)},setItemRaw(e,t){i.set(e,t)},removeItem(e){i.delete(e)},getKeys(){return Array.from(i.keys())},clear(){i.clear()},dispose(){i.clear()}}};function HE(i={}){const e={mounts:{"":i.driver||BE()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=p=>{for(const v of e.mountpoints)if(p.startsWith(v))return{base:v,relativeKey:p.slice(v.length),driver:e.mounts[v]};return{base:"",relativeKey:p,driver:e.mounts[""]}},s=(p,v)=>e.mountpoints.filter(b=>b.startsWith(p)||v&&p.startsWith(b)).map(b=>({relativeBase:p.length>b.length?p.slice(b.length):void 0,mountpoint:b,driver:e.mounts[b]})),o=(p,v)=>{if(e.watching){v=mr(v);for(const b of e.watchListeners)b(p,v)}},c=async()=>{if(!e.watching){e.watching=!0;for(const p in e.mounts)e.unwatch[p]=await Af(e.mounts[p],o,p)}},l=async()=>{if(e.watching){for(const p in e.unwatch)await e.unwatch[p]();e.unwatch={},e.watching=!1}},f=(p,v,b)=>{const D=new Map,O=x=>{let F=D.get(x.base);return F||(F={driver:x.driver,base:x.base,items:[]},D.set(x.base,F)),F};for(const x of p){const F=typeof x=="string",B=mr(F?x:x.key),te=F?void 0:x.value,$=F||!x.options?v:{...v,...x.options},L=t(B);O(L).items.push({key:B,value:te,relativeKey:L.relativeKey,options:$})}return Promise.all([...D.values()].map(x=>b(x))).then(x=>x.flat())},g={hasItem(p,v={}){p=mr(p);const{relativeKey:b,driver:D}=t(p);return Gt(D.hasItem,b,v)},getItem(p,v={}){p=mr(p);const{relativeKey:b,driver:D}=t(p);return Gt(D.getItem,b,v).then(O=>Ho(O))},getItems(p,v){return f(p,v,b=>b.driver.getItems?Gt(b.driver.getItems,b.items.map(D=>({key:D.relativeKey,options:D.options})),v).then(D=>D.map(O=>({key:FE(b.base,O.key),value:Ho(O.value)}))):Promise.all(b.items.map(D=>Gt(b.driver.getItem,D.relativeKey,D.options).then(O=>({key:D.key,value:Ho(O)})))))},getItemRaw(p,v={}){p=mr(p);const{relativeKey:b,driver:D}=t(p);return D.getItemRaw?Gt(D.getItemRaw,b,v):Gt(D.getItem,b,v).then(O=>qE(O))},async setItem(p,v,b={}){if(v===void 0)return g.removeItem(p);p=mr(p);const{relativeKey:D,driver:O}=t(p);O.setItem&&(await Gt(O.setItem,D,Jo(v),b),O.watch||o("update",p))},async setItems(p,v){await f(p,v,async b=>{if(b.driver.setItems)return Gt(b.driver.setItems,b.items.map(D=>({key:D.relativeKey,value:Jo(D.value),options:D.options})),v);b.driver.setItem&&await Promise.all(b.items.map(D=>Gt(b.driver.setItem,D.relativeKey,Jo(D.value),D.options)))})},async setItemRaw(p,v,b={}){if(v===void 0)return g.removeItem(p,b);p=mr(p);const{relativeKey:D,driver:O}=t(p);if(O.setItemRaw)await Gt(O.setItemRaw,D,v,b);else if(O.setItem)await Gt(O.setItem,D,ME(v),b);else return;O.watch||o("update",p)},async removeItem(p,v={}){typeof v=="boolean"&&(v={removeMeta:v}),p=mr(p);const{relativeKey:b,driver:D}=t(p);D.removeItem&&(await Gt(D.removeItem,b,v),(v.removeMeta||v.removeMata)&&await Gt(D.removeItem,b+"$",v),D.watch||o("remove",p))},async getMeta(p,v={}){typeof v=="boolean"&&(v={nativeOnly:v}),p=mr(p);const{relativeKey:b,driver:D}=t(p),O=Object.create(null);if(D.getMeta&&Object.assign(O,await Gt(D.getMeta,b,v)),!v.nativeOnly){const x=await Gt(D.getItem,b+"$",v).then(F=>Ho(F));x&&typeof x=="object"&&(typeof x.atime=="string"&&(x.atime=new Date(x.atime)),typeof x.mtime=="string"&&(x.mtime=new Date(x.mtime)),Object.assign(O,x))}return O},setMeta(p,v,b={}){return this.setItem(p+"$",v,b)},removeMeta(p,v={}){return this.removeItem(p+"$",v)},async getKeys(p,v={}){p=Ko(p);const b=s(p,!0);let D=[];const O=[];for(const x of b){const B=(await Gt(x.driver.getKeys,x.relativeBase,v)).map(te=>x.mountpoint+mr(te)).filter(te=>!D.some($=>te.startsWith($)));O.push(...B),D=[x.mountpoint,...D.filter(te=>!te.startsWith(x.mountpoint))]}return p?O.filter(x=>x.startsWith(p)&&!x.endsWith("$")):O.filter(x=>!x.endsWith("$"))},async clear(p,v={}){p=Ko(p),await Promise.all(s(p,!1).map(async b=>{if(b.driver.clear)return Gt(b.driver.clear,b.relativeBase,v);if(b.driver.removeItem){const D=await b.driver.getKeys(b.relativeBase||"",v);return Promise.all(D.map(O=>b.driver.removeItem(O,v)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(p=>Rf(p)))},async watch(p){return await c(),e.watchListeners.push(p),async()=>{e.watchListeners=e.watchListeners.filter(v=>v!==p),e.watchListeners.length===0&&await l()}},async unwatch(){e.watchListeners=[],await l()},mount(p,v){if(p=Ko(p),p&&e.mounts[p])throw new Error(`already mounted at ${p}`);return p&&(e.mountpoints.push(p),e.mountpoints.sort((b,D)=>D.length-b.length)),e.mounts[p]=v,e.watching&&Promise.resolve(Af(v,o,p)).then(b=>{e.unwatch[p]=b}).catch(console.error),g},async unmount(p,v=!0){p=Ko(p),!(!p||!e.mounts[p])&&(e.watching&&p in e.unwatch&&(e.unwatch[p](),delete e.unwatch[p]),v&&await Rf(e.mounts[p]),e.mountpoints=e.mountpoints.filter(b=>b!==p),delete e.mounts[p])},getMount(p=""){p=mr(p)+":";const v=t(p);return{driver:v.driver,base:v.base}},getMounts(p="",v={}){return p=mr(p),s(p,v.parents).map(D=>({driver:D.driver,base:D.mountpoint}))}};return g}function Af(i,e,t){return i.watch?i.watch((s,o)=>e(s,t+o)):()=>{}}async function Rf(i){typeof i.dispose=="function"&&await Gt(i.dispose)}function hn(i){return new Promise((e,t)=>{i.oncomplete=i.onsuccess=()=>e(i.result),i.onabort=i.onerror=()=>t(i.error)})}function wp(i,e){const t=indexedDB.open(i);t.onupgradeneeded=()=>t.result.createObjectStore(e);const s=hn(t);return(o,c)=>s.then(l=>c(l.transaction(e,o).objectStore(e)))}let Gc;function $s(){return Gc||(Gc=wp("keyval-store","keyval")),Gc}function Nf(i,e=$s()){return e("readonly",t=>hn(t.get(i)))}function KE(i,e,t=$s()){return t("readwrite",s=>(s.put(e,i),hn(s.transaction)))}function kE(i,e=$s()){return e("readwrite",t=>(t.delete(i),hn(t.transaction)))}function VE(i=$s()){return i("readwrite",e=>(e.clear(),hn(e.transaction)))}function GE(i,e){return i.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},hn(i.transaction)}function WE(i=$s()){return i("readonly",e=>{if(e.getAllKeys)return hn(e.getAllKeys());const t=[];return GE(e,s=>t.push(s.key)).then(()=>t)})}const JE=i=>JSON.stringify(i,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),YE=i=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=i.replace(e,'$1"$2n"$3');return JSON.parse(t,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function bp(i){if(typeof i!="string")throw new Error(`Cannot safe json parse value of type ${typeof i}`);try{return YE(i)}catch{return i}}function Ep(i){return typeof i=="string"?i:JE(i)||""}const QE="idb-keyval";var XE=(i={})=>{const e=i.base&&i.base.length>0?`${i.base}:`:"",t=o=>e+o;let s;return i.dbName&&i.storeName&&(s=wp(i.dbName,i.storeName)),{name:QE,options:i,async hasItem(o){return!(typeof await Nf(t(o),s)>"u")},async getItem(o){return await Nf(t(o),s)??null},setItem(o,c){return KE(t(o),c,s)},removeItem(o){return kE(t(o),s)},getKeys(){return WE(s)},clear(){return VE(s)}}};const ZE="WALLET_CONNECT_V2_INDEXED_DB",eD="keyvaluestorage";let tD=class{constructor(){this.indexedDb=HE({driver:XE({dbName:ZE,storeName:eD})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,Ep(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Wc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yo={exports:{}};(function(){let i;function e(){}i=e,i.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},i.prototype.setItem=function(t,s){this[t]=String(s)},i.prototype.removeItem=function(t){delete this[t]},i.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(s){t[s]=void 0,delete t[s]})},i.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},i.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Wc<"u"&&Wc.localStorage?Yo.exports=Wc.localStorage:typeof window<"u"&&window.localStorage?Yo.exports=window.localStorage:Yo.exports=new e})();function rD(i){var e;return[i[0],bp((e=i[1])!=null?e:"")]}let iD=class{constructor(){this.localStorage=Yo.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(rD)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return bp(t)}async setItem(e,t){this.localStorage.setItem(e,Ep(t))}async removeItem(e){this.localStorage.removeItem(e)}};const nD="wc_storage_version",$f=1,sD=async(i,e,t)=>{const s=nD,o=await e.getItem(s);if(o&&o>=$f){t(e);return}const c=await i.getKeys();if(!c.length){t(e);return}const l=[];for(;c.length;){const f=c.shift();if(!f)continue;const g=f.toLowerCase();if(g.includes("wc@")||g.includes("walletconnect")||g.includes("wc_")||g.includes("wallet_connect")){const p=await i.getItem(f);await e.setItem(f,p),l.push(f)}}await e.setItem(s,$f),t(e),oD(i,l)},oD=async(i,e)=>{e.length&&e.forEach(async t=>{await i.removeItem(t)})};let aD=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new iD;this.storage=e;try{const t=new tD;sD(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};var Kn={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Du=function(i,e){return Du=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},Du(i,e)};function cD(i,e){Du(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Su=function(){return Su=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},Su.apply(this,arguments)};function uD(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function hD(i,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,s);else for(var f=i.length-1;f>=0;f--)(l=i[f])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function lD(i,e){return function(t,s){e(t,s,i)}}function fD(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function dD(i,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function f(v){try{p(s.next(v))}catch(b){l(b)}}function g(v){try{p(s.throw(v))}catch(b){l(b)}}function p(v){v.done?c(v.value):o(v.value).then(f,g)}p((s=s.apply(i,e||[])).next())})}function pD(i,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(v){return g([p,v])}}function g(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(i,t)}catch(v){p=[6,v],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function gD(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}function yD(i,e){for(var t in i)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=i[t])}function Iu(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Dp(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(f){l={error:f}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function vD(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(Dp(arguments[e]));return i}function _D(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,f=c.length;l<f;l++,o++)s[o]=c[l];return s}function xs(i){return this instanceof xs?(this.v=i,this):new xs(i)}function mD(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(D){s[D]&&(o[D]=function(O){return new Promise(function(x,F){c.push([D,O,x,F])>1||f(D,O)})})}function f(D,O){try{g(s[D](O))}catch(x){b(c[0][3],x)}}function g(D){D.value instanceof xs?Promise.resolve(D.value.v).then(p,v):b(c[0][2],D)}function p(D){f("next",D)}function v(D){f("throw",D)}function b(D,O){D(O),c.shift(),c.length&&f(c[0][0],c[0][1])}}function wD(i){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=i[o]?function(l){return(t=!t)?{value:xs(i[o](l)),done:o==="return"}:c?c(l):l}:c}}function bD(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof Iu=="function"?Iu(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=i[c]&&function(l){return new Promise(function(f,g){l=i[c](l),o(f,g,l.done,l.value)})}}function o(c,l,f,g){Promise.resolve(g).then(function(p){c({value:p,done:f})},l)}}function ED(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function DD(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e.default=i,e}function SD(i){return i&&i.__esModule?i:{default:i}}function ID(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)}function OD(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t}const xD=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Su},__asyncDelegator:wD,__asyncGenerator:mD,__asyncValues:bD,__await:xs,__awaiter:dD,__classPrivateFieldGet:ID,__classPrivateFieldSet:OD,__createBinding:gD,__decorate:hD,__exportStar:yD,__extends:cD,__generator:pD,__importDefault:SD,__importStar:DD,__makeTemplateObject:ED,__metadata:fD,__param:lD,__read:Dp,__rest:uD,__spread:vD,__spreadArrays:_D,__values:Iu},Symbol.toStringTag,{value:"Module"})),fa=zn(xD);var ys={},Jc={},vs={};let ln=class{};const PD=Object.freeze(Object.defineProperty({__proto__:null,IEvents:ln},Symbol.toStringTag,{value:"Module"})),CD=zn(PD);var Uf;function TD(){if(Uf)return vs;Uf=1,Object.defineProperty(vs,"__esModule",{value:!0}),vs.IHeartBeat=void 0;const i=CD;class e extends i.IEvents{constructor(s){super()}}return vs.IHeartBeat=e,vs}var Lf;function Sp(){return Lf||(Lf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),fa.__exportStar(TD(),i)}(Jc)),Jc}var Yc={},sn={},jf;function AD(){if(jf)return sn;jf=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.HEARTBEAT_EVENTS=sn.HEARTBEAT_INTERVAL=void 0;const i=ve;return sn.HEARTBEAT_INTERVAL=i.FIVE_SECONDS,sn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},sn}var Mf;function Ip(){return Mf||(Mf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),fa.__exportStar(AD(),i)}(Yc)),Yc}var qf;function RD(){if(qf)return ys;qf=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.HeartBeat=void 0;const i=fa,e=zr,t=ve,s=Sp(),o=Ip();class c extends s.IHeartBeat{constructor(f){super(f),this.events=new e.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=(f==null?void 0:f.interval)||o.HEARTBEAT_INTERVAL}static init(f){return i.__awaiter(this,void 0,void 0,function*(){const g=new c(f);return yield g.init(),g})}init(){return i.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(f,g){this.events.on(f,g)}once(f,g){this.events.once(f,g)}off(f,g){this.events.off(f,g)}removeListener(f,g){this.events.removeListener(f,g)}initialize(){return i.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return ys.HeartBeat=c,ys}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=fa;e.__exportStar(RD(),i),e.__exportStar(Sp(),i),e.__exportStar(Ip(),i)})(Kn);var Ye={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ou=function(i,e){return Ou=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},Ou(i,e)};function ND(i,e){Ou(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var xu=function(){return xu=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},xu.apply(this,arguments)};function $D(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function UD(i,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,s);else for(var f=i.length-1;f>=0;f--)(l=i[f])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function LD(i,e){return function(t,s){e(t,s,i)}}function jD(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function MD(i,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function f(v){try{p(s.next(v))}catch(b){l(b)}}function g(v){try{p(s.throw(v))}catch(b){l(b)}}function p(v){v.done?c(v.value):o(v.value).then(f,g)}p((s=s.apply(i,e||[])).next())})}function qD(i,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(v){return g([p,v])}}function g(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(i,t)}catch(v){p=[6,v],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function FD(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}function zD(i,e){for(var t in i)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=i[t])}function Pu(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Op(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(f){l={error:f}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function BD(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(Op(arguments[e]));return i}function HD(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,f=c.length;l<f;l++,o++)s[o]=c[l];return s}function Ps(i){return this instanceof Ps?(this.v=i,this):new Ps(i)}function KD(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(D){s[D]&&(o[D]=function(O){return new Promise(function(x,F){c.push([D,O,x,F])>1||f(D,O)})})}function f(D,O){try{g(s[D](O))}catch(x){b(c[0][3],x)}}function g(D){D.value instanceof Ps?Promise.resolve(D.value.v).then(p,v):b(c[0][2],D)}function p(D){f("next",D)}function v(D){f("throw",D)}function b(D,O){D(O),c.shift(),c.length&&f(c[0][0],c[0][1])}}function kD(i){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=i[o]?function(l){return(t=!t)?{value:Ps(i[o](l)),done:o==="return"}:c?c(l):l}:c}}function VD(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof Pu=="function"?Pu(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=i[c]&&function(l){return new Promise(function(f,g){l=i[c](l),o(f,g,l.done,l.value)})}}function o(c,l,f,g){Promise.resolve(g).then(function(p){c({value:p,done:f})},l)}}function GD(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function WD(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e.default=i,e}function JD(i){return i&&i.__esModule?i:{default:i}}function YD(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)}function QD(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t}const XD=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return xu},__asyncDelegator:kD,__asyncGenerator:KD,__asyncValues:VD,__await:Ps,__awaiter:MD,__classPrivateFieldGet:YD,__classPrivateFieldSet:QD,__createBinding:FD,__decorate:UD,__exportStar:zD,__extends:ND,__generator:qD,__importDefault:JD,__importStar:WD,__makeTemplateObject:GD,__metadata:jD,__param:LD,__read:Op,__rest:$D,__spread:BD,__spreadArrays:HD,__values:Pu},Symbol.toStringTag,{value:"Module"})),ZD=zn(XD);var Qc,Ff;function e3(){if(Ff)return Qc;Ff=1;function i(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}Qc=e;function e(t,s,o){var c=o&&o.stringify||i,l=1;if(typeof t=="object"&&t!==null){var f=s.length+l;if(f===1)return t;var g=new Array(f);g[0]=c(t);for(var p=1;p<f;p++)g[p]=c(s[p]);return g.join(" ")}if(typeof t!="string")return t;var v=s.length;if(v===0)return t;for(var b="",D=1-l,O=-1,x=t&&t.length||0,F=0;F<x;){if(t.charCodeAt(F)===37&&F+1<x){switch(O=O>-1?O:0,t.charCodeAt(F+1)){case 100:case 102:if(D>=v||s[D]==null)break;O<F&&(b+=t.slice(O,F)),b+=Number(s[D]),O=F+2,F++;break;case 105:if(D>=v||s[D]==null)break;O<F&&(b+=t.slice(O,F)),b+=Math.floor(Number(s[D])),O=F+2,F++;break;case 79:case 111:case 106:if(D>=v||s[D]===void 0)break;O<F&&(b+=t.slice(O,F));var B=typeof s[D];if(B==="string"){b+="'"+s[D]+"'",O=F+2,F++;break}if(B==="function"){b+=s[D].name||"<anonymous>",O=F+2,F++;break}b+=c(s[D]),O=F+2,F++;break;case 115:if(D>=v)break;O<F&&(b+=t.slice(O,F)),b+=String(s[D]),O=F+2,F++;break;case 37:O<F&&(b+=t.slice(O,F)),b+="%",O=F+2,F++,D--;break}++D}++F}return O===-1?t:(O<x&&(b+=t.slice(O)),b)}return Qc}var Xc,zf;function t3(){if(zf)return Xc;zf=1;const i=e3();Xc=o;const e=A().console||{},t={mapHttpRequest:x,mapHttpResponse:x,wrapRequestSerializer:F,wrapResponseSerializer:F,wrapErrorSerializer:F,req:x,res:x,err:D};function s(S,u){return Array.isArray(S)?S.filter(function(G){return G!=="!stdSerializers.err"}):S===!0?Object.keys(u):!1}function o(S){S=S||{},S.browser=S.browser||{};const u=S.browser.transmit;if(u&&typeof u.send!="function")throw Error("pino: transmit option must have a send function");const w=S.browser.write||e;S.browser.write&&(S.browser.asObject=!0);const G=S.serializers||{},W=s(S.browser.serialize,G);let se=S.browser.serialize;Array.isArray(S.browser.serialize)&&S.browser.serialize.indexOf("!stdSerializers.err")>-1&&(se=!1);const ue=["error","fatal","warn","info","debug","trace"];typeof w=="function"&&(w.error=w.fatal=w.warn=w.info=w.debug=w.trace=w),S.enabled===!1&&(S.level="silent");const de=S.level||"info",E=Object.create(w);E.log||(E.log=B),Object.defineProperty(E,"levelVal",{get:ee}),Object.defineProperty(E,"level",{get:Q,set:k});const T={transmit:u,serialize:W,asObject:S.browser.asObject,levels:ue,timestamp:O(S)};E.levels=o.levels,E.level=de,E.setMaxListeners=E.getMaxListeners=E.emit=E.addListener=E.on=E.prependListener=E.once=E.prependOnceListener=E.removeListener=E.removeAllListeners=E.listeners=E.listenerCount=E.eventNames=E.write=E.flush=B,E.serializers=G,E._serialize=W,E._stdErrSerialize=se,E.child=V,u&&(E._logEvent=b());function ee(){return this.level==="silent"?1/0:this.levels.values[this.level]}function Q(){return this._level}function k(Y){if(Y!=="silent"&&!this.levels.values[Y])throw Error("unknown level "+Y);this._level=Y,c(T,E,"error","log"),c(T,E,"fatal","error"),c(T,E,"warn","error"),c(T,E,"info","log"),c(T,E,"debug","log"),c(T,E,"trace","log")}function V(Y,ie){if(!Y)throw new Error("missing bindings for child Pino");ie=ie||{},W&&Y.serializers&&(ie.serializers=Y.serializers);const we=ie.serializers;if(W&&we){var oe=Object.assign({},G,we),be=S.browser.serialize===!0?Object.keys(oe):W;delete Y.serializers,g([Y],be,oe,this._stdErrSerialize)}function le(_e){this._childLevel=(_e._childLevel|0)+1,this.error=p(_e,Y,"error"),this.fatal=p(_e,Y,"fatal"),this.warn=p(_e,Y,"warn"),this.info=p(_e,Y,"info"),this.debug=p(_e,Y,"debug"),this.trace=p(_e,Y,"trace"),oe&&(this.serializers=oe,this._serialize=be),u&&(this._logEvent=b([].concat(_e._logEvent.bindings,Y)))}return le.prototype=this,new le(this)}return E}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=t,o.stdTimeFunctions=Object.assign({},{nullTime:te,epochTime:$,unixTime:L,isoTime:C});function c(S,u,w,G){const W=Object.getPrototypeOf(u);u[w]=u.levelVal>u.levels.values[w]?B:W[w]?W[w]:e[w]||e[G]||B,l(S,u,w)}function l(S,u,w){!S.transmit&&u[w]===B||(u[w]=function(G){return function(){const se=S.timestamp(),ue=new Array(arguments.length),de=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var E=0;E<ue.length;E++)ue[E]=arguments[E];if(S.serialize&&!S.asObject&&g(ue,this._serialize,this.serializers,this._stdErrSerialize),S.asObject?G.call(de,f(this,w,ue,se)):G.apply(de,ue),S.transmit){const T=S.transmit.level||u.level,ee=o.levels.values[T],Q=o.levels.values[w];if(Q<ee)return;v(this,{ts:se,methodLevel:w,methodValue:Q,transmitLevel:T,transmitValue:o.levels.values[S.transmit.level||u.level],send:S.transmit.send,val:u.levelVal},ue)}}}(u[w]))}function f(S,u,w,G){S._serialize&&g(w,S._serialize,S.serializers,S._stdErrSerialize);const W=w.slice();let se=W[0];const ue={};G&&(ue.time=G),ue.level=o.levels.values[u];let de=(S._childLevel|0)+1;if(de<1&&(de=1),se!==null&&typeof se=="object"){for(;de--&&typeof W[0]=="object";)Object.assign(ue,W.shift());se=W.length?i(W.shift(),W):void 0}else typeof se=="string"&&(se=i(W.shift(),W));return se!==void 0&&(ue.msg=se),ue}function g(S,u,w,G){for(const W in S)if(G&&S[W]instanceof Error)S[W]=o.stdSerializers.err(S[W]);else if(typeof S[W]=="object"&&!Array.isArray(S[W]))for(const se in S[W])u&&u.indexOf(se)>-1&&se in w&&(S[W][se]=w[se](S[W][se]))}function p(S,u,w){return function(){const G=new Array(1+arguments.length);G[0]=u;for(var W=1;W<G.length;W++)G[W]=arguments[W-1];return S[w].apply(this,G)}}function v(S,u,w){const G=u.send,W=u.ts,se=u.methodLevel,ue=u.methodValue,de=u.val,E=S._logEvent.bindings;g(w,S._serialize||Object.keys(S.serializers),S.serializers,S._stdErrSerialize===void 0?!0:S._stdErrSerialize),S._logEvent.ts=W,S._logEvent.messages=w.filter(function(T){return E.indexOf(T)===-1}),S._logEvent.level.label=se,S._logEvent.level.value=ue,G(se,S._logEvent,de),S._logEvent=b(E)}function b(S){return{ts:0,messages:[],bindings:S||[],level:{label:"",value:0}}}function D(S){const u={type:S.constructor.name,msg:S.message,stack:S.stack};for(const w in S)u[w]===void 0&&(u[w]=S[w]);return u}function O(S){return typeof S.timestamp=="function"?S.timestamp:S.timestamp===!1?te:$}function x(){return{}}function F(S){return S}function B(){}function te(){return!1}function $(){return Date.now()}function L(){return Math.round(Date.now()/1e3)}function C(){return new Date(Date.now()).toISOString()}function A(){function S(u){return typeof u<"u"&&u}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return S(self)||S(window)||S(this)||{}}}return Xc}var on={},Bf;function xp(){return Bf||(Bf=1,Object.defineProperty(on,"__esModule",{value:!0}),on.PINO_CUSTOM_CONTEXT_KEY=on.PINO_LOGGER_DEFAULTS=void 0,on.PINO_LOGGER_DEFAULTS={level:"info"},on.PINO_CUSTOM_CONTEXT_KEY="custom_context"),on}var cr={},Hf;function r3(){if(Hf)return cr;Hf=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.generateChildLogger=cr.formatChildLoggerContext=cr.getLoggerContext=cr.setBrowserLoggerContext=cr.getBrowserLoggerContext=cr.getDefaultLoggerOptions=void 0;const i=xp();function e(f){return Object.assign(Object.assign({},f),{level:(f==null?void 0:f.level)||i.PINO_LOGGER_DEFAULTS.level})}cr.getDefaultLoggerOptions=e;function t(f,g=i.PINO_CUSTOM_CONTEXT_KEY){return f[g]||""}cr.getBrowserLoggerContext=t;function s(f,g,p=i.PINO_CUSTOM_CONTEXT_KEY){return f[p]=g,f}cr.setBrowserLoggerContext=s;function o(f,g=i.PINO_CUSTOM_CONTEXT_KEY){let p="";return typeof f.bindings>"u"?p=t(f,g):p=f.bindings().context||"",p}cr.getLoggerContext=o;function c(f,g,p=i.PINO_CUSTOM_CONTEXT_KEY){const v=o(f,p);return v.trim()?`${v}/${g}`:g}cr.formatChildLoggerContext=c;function l(f,g,p=i.PINO_CUSTOM_CONTEXT_KEY){const v=c(f,g,p),b=f.child({context:v});return s(b,v,p)}return cr.generateChildLogger=l,cr}(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.pino=void 0;const e=ZD,t=e.__importDefault(t3());Object.defineProperty(i,"pino",{enumerable:!0,get:function(){return t.default}}),e.__exportStar(xp(),i),e.__exportStar(r3(),i)})(Ye);class i3 extends ln{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}let n3=class extends ln{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}},s3=class{constructor(e,t){this.logger=e,this.core=t}},o3=class extends ln{constructor(e,t){super(),this.relayer=e,this.logger=t}},a3=class extends ln{constructor(e){super()}},c3=class{constructor(e,t,s,o){this.core=e,this.logger=t,this.name=s}};class u3 extends ln{constructor(e,t){super(),this.relayer=e,this.logger=t}}let h3=class extends ln{constructor(e,t){super(),this.core=e,this.logger=t}},l3=class{constructor(e,t){this.projectId=e,this.logger=t}},f3=class{constructor(e,t){this.projectId=e,this.logger=t}},d3=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},p3=class{constructor(e){this.client=e}};const g3=i=>JSON.stringify(i,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),y3=i=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=i.replace(e,'$1"$2n"$3');return JSON.parse(t,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function v3(i){if(typeof i!="string")throw new Error(`Cannot safe json parse value of type ${typeof i}`);try{return y3(i)}catch{return i}}function _3(i){return typeof i=="string"?i:g3(i)||""}var Qu={},Pp={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Le,t=Tr;i.DIGEST_LENGTH=64,i.BLOCK_SIZE=128;var s=function(){function f(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return f.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},f.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},f.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},f.prototype.update=function(g,p){if(p===void 0&&(p=g.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var v=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<i.BLOCK_SIZE&&p>0;)this._buffer[this._bufferLength++]=g[v++],p--;this._bufferLength===this.blockSize&&(c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(v=c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,g,v,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=g[v++],p--;return this},f.prototype.finish=function(g){if(!this._finished){var p=this._bytesHashed,v=this._bufferLength,b=p/536870912|0,D=p<<3,O=p%128<112?128:256;this._buffer[v]=128;for(var x=v+1;x<O-8;x++)this._buffer[x]=0;e.writeUint32BE(b,this._buffer,O-8),e.writeUint32BE(D,this._buffer,O-4),c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,O),this._finished=!0}for(var x=0;x<this.digestLength/8;x++)e.writeUint32BE(this._stateHi[x],g,x*8),e.writeUint32BE(this._stateLo[x],g,x*8+4);return this},f.prototype.digest=function(){var g=new Uint8Array(this.digestLength);return this.finish(g),g},f.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},f.prototype.restoreState=function(g){return this._stateHi.set(g.stateHi),this._stateLo.set(g.stateLo),this._bufferLength=g.bufferLength,g.buffer&&this._buffer.set(g.buffer),this._bytesHashed=g.bytesHashed,this._finished=!1,this},f.prototype.cleanSavedState=function(g){t.wipe(g.stateHi),t.wipe(g.stateLo),g.buffer&&t.wipe(g.buffer),g.bufferLength=0,g.bytesHashed=0},f}();i.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function c(f,g,p,v,b,D,O){for(var x=p[0],F=p[1],B=p[2],te=p[3],$=p[4],L=p[5],C=p[6],A=p[7],S=v[0],u=v[1],w=v[2],G=v[3],W=v[4],se=v[5],ue=v[6],de=v[7],E,T,ee,Q,k,V,Y,ie;O>=128;){for(var we=0;we<16;we++){var oe=8*we+D;f[we]=e.readUint32BE(b,oe),g[we]=e.readUint32BE(b,oe+4)}for(var we=0;we<80;we++){var be=x,le=F,_e=B,H=te,z=$,U=L,d=C,R=A,ae=S,fe=u,Ie=w,Be=G,ke=W,je=se,gt=ue,yt=de;if(E=A,T=de,k=T&65535,V=T>>>16,Y=E&65535,ie=E>>>16,E=($>>>14|W<<18)^($>>>18|W<<14)^(W>>>9|$<<23),T=(W>>>14|$<<18)^(W>>>18|$<<14)^($>>>9|W<<23),k+=T&65535,V+=T>>>16,Y+=E&65535,ie+=E>>>16,E=$&L^~$&C,T=W&se^~W&ue,k+=T&65535,V+=T>>>16,Y+=E&65535,ie+=E>>>16,E=o[we*2],T=o[we*2+1],k+=T&65535,V+=T>>>16,Y+=E&65535,ie+=E>>>16,E=f[we%16],T=g[we%16],k+=T&65535,V+=T>>>16,Y+=E&65535,ie+=E>>>16,V+=k>>>16,Y+=V>>>16,ie+=Y>>>16,ee=Y&65535|ie<<16,Q=k&65535|V<<16,E=ee,T=Q,k=T&65535,V=T>>>16,Y=E&65535,ie=E>>>16,E=(x>>>28|S<<4)^(S>>>2|x<<30)^(S>>>7|x<<25),T=(S>>>28|x<<4)^(x>>>2|S<<30)^(x>>>7|S<<25),k+=T&65535,V+=T>>>16,Y+=E&65535,ie+=E>>>16,E=x&F^x&B^F&B,T=S&u^S&w^u&w,k+=T&65535,V+=T>>>16,Y+=E&65535,ie+=E>>>16,V+=k>>>16,Y+=V>>>16,ie+=Y>>>16,R=Y&65535|ie<<16,yt=k&65535|V<<16,E=H,T=Be,k=T&65535,V=T>>>16,Y=E&65535,ie=E>>>16,E=ee,T=Q,k+=T&65535,V+=T>>>16,Y+=E&65535,ie+=E>>>16,V+=k>>>16,Y+=V>>>16,ie+=Y>>>16,H=Y&65535|ie<<16,Be=k&65535|V<<16,F=be,B=le,te=_e,$=H,L=z,C=U,A=d,x=R,u=ae,w=fe,G=Ie,W=Be,se=ke,ue=je,de=gt,S=yt,we%16===15)for(var oe=0;oe<16;oe++)E=f[oe],T=g[oe],k=T&65535,V=T>>>16,Y=E&65535,ie=E>>>16,E=f[(oe+9)%16],T=g[(oe+9)%16],k+=T&65535,V+=T>>>16,Y+=E&65535,ie+=E>>>16,ee=f[(oe+1)%16],Q=g[(oe+1)%16],E=(ee>>>1|Q<<31)^(ee>>>8|Q<<24)^ee>>>7,T=(Q>>>1|ee<<31)^(Q>>>8|ee<<24)^(Q>>>7|ee<<25),k+=T&65535,V+=T>>>16,Y+=E&65535,ie+=E>>>16,ee=f[(oe+14)%16],Q=g[(oe+14)%16],E=(ee>>>19|Q<<13)^(Q>>>29|ee<<3)^ee>>>6,T=(Q>>>19|ee<<13)^(ee>>>29|Q<<3)^(Q>>>6|ee<<26),k+=T&65535,V+=T>>>16,Y+=E&65535,ie+=E>>>16,V+=k>>>16,Y+=V>>>16,ie+=Y>>>16,f[oe]=Y&65535|ie<<16,g[oe]=k&65535|V<<16}E=x,T=S,k=T&65535,V=T>>>16,Y=E&65535,ie=E>>>16,E=p[0],T=v[0],k+=T&65535,V+=T>>>16,Y+=E&65535,ie+=E>>>16,V+=k>>>16,Y+=V>>>16,ie+=Y>>>16,p[0]=x=Y&65535|ie<<16,v[0]=S=k&65535|V<<16,E=F,T=u,k=T&65535,V=T>>>16,Y=E&65535,ie=E>>>16,E=p[1],T=v[1],k+=T&65535,V+=T>>>16,Y+=E&65535,ie+=E>>>16,V+=k>>>16,Y+=V>>>16,ie+=Y>>>16,p[1]=F=Y&65535|ie<<16,v[1]=u=k&65535|V<<16,E=B,T=w,k=T&65535,V=T>>>16,Y=E&65535,ie=E>>>16,E=p[2],T=v[2],k+=T&65535,V+=T>>>16,Y+=E&65535,ie+=E>>>16,V+=k>>>16,Y+=V>>>16,ie+=Y>>>16,p[2]=B=Y&65535|ie<<16,v[2]=w=k&65535|V<<16,E=te,T=G,k=T&65535,V=T>>>16,Y=E&65535,ie=E>>>16,E=p[3],T=v[3],k+=T&65535,V+=T>>>16,Y+=E&65535,ie+=E>>>16,V+=k>>>16,Y+=V>>>16,ie+=Y>>>16,p[3]=te=Y&65535|ie<<16,v[3]=G=k&65535|V<<16,E=$,T=W,k=T&65535,V=T>>>16,Y=E&65535,ie=E>>>16,E=p[4],T=v[4],k+=T&65535,V+=T>>>16,Y+=E&65535,ie+=E>>>16,V+=k>>>16,Y+=V>>>16,ie+=Y>>>16,p[4]=$=Y&65535|ie<<16,v[4]=W=k&65535|V<<16,E=L,T=se,k=T&65535,V=T>>>16,Y=E&65535,ie=E>>>16,E=p[5],T=v[5],k+=T&65535,V+=T>>>16,Y+=E&65535,ie+=E>>>16,V+=k>>>16,Y+=V>>>16,ie+=Y>>>16,p[5]=L=Y&65535|ie<<16,v[5]=se=k&65535|V<<16,E=C,T=ue,k=T&65535,V=T>>>16,Y=E&65535,ie=E>>>16,E=p[6],T=v[6],k+=T&65535,V+=T>>>16,Y+=E&65535,ie+=E>>>16,V+=k>>>16,Y+=V>>>16,ie+=Y>>>16,p[6]=C=Y&65535|ie<<16,v[6]=ue=k&65535|V<<16,E=A,T=de,k=T&65535,V=T>>>16,Y=E&65535,ie=E>>>16,E=p[7],T=v[7],k+=T&65535,V+=T>>>16,Y+=E&65535,ie+=E>>>16,V+=k>>>16,Y+=V>>>16,ie+=Y>>>16,p[7]=A=Y&65535|ie<<16,v[7]=de=k&65535|V<<16,D+=128,O-=128}return D}function l(f){var g=new s;g.update(f);var p=g.digest();return g.clean(),p}i.hash=l})(Pp);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.convertSecretKeyToX25519=i.convertPublicKeyToX25519=i.verify=i.sign=i.extractPublicKeyFromSecretKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.SEED_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=i.SIGNATURE_LENGTH=void 0;const e=Bn,t=Pp,s=Tr;i.SIGNATURE_LENGTH=64,i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=64,i.SEED_LENGTH=32;function o(H){const z=new Float64Array(16);if(H)for(let U=0;U<H.length;U++)z[U]=H[U];return z}const c=new Uint8Array(32);c[0]=9;const l=o(),f=o([1]),g=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),p=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),v=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),b=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),D=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function O(H,z){for(let U=0;U<16;U++)H[U]=z[U]|0}function x(H){let z=1;for(let U=0;U<16;U++){let d=H[U]+z+65535;z=Math.floor(d/65536),H[U]=d-z*65536}H[0]+=z-1+37*(z-1)}function F(H,z,U){const d=~(U-1);for(let R=0;R<16;R++){const ae=d&(H[R]^z[R]);H[R]^=ae,z[R]^=ae}}function B(H,z){const U=o(),d=o();for(let R=0;R<16;R++)d[R]=z[R];x(d),x(d),x(d);for(let R=0;R<2;R++){U[0]=d[0]-65517;for(let fe=1;fe<15;fe++)U[fe]=d[fe]-65535-(U[fe-1]>>16&1),U[fe-1]&=65535;U[15]=d[15]-32767-(U[14]>>16&1);const ae=U[15]>>16&1;U[14]&=65535,F(d,U,1-ae)}for(let R=0;R<16;R++)H[2*R]=d[R]&255,H[2*R+1]=d[R]>>8}function te(H,z){let U=0;for(let d=0;d<32;d++)U|=H[d]^z[d];return(1&U-1>>>8)-1}function $(H,z){const U=new Uint8Array(32),d=new Uint8Array(32);return B(U,H),B(d,z),te(U,d)}function L(H){const z=new Uint8Array(32);return B(z,H),z[0]&1}function C(H,z){for(let U=0;U<16;U++)H[U]=z[2*U]+(z[2*U+1]<<8);H[15]&=32767}function A(H,z,U){for(let d=0;d<16;d++)H[d]=z[d]+U[d]}function S(H,z,U){for(let d=0;d<16;d++)H[d]=z[d]-U[d]}function u(H,z,U){let d,R,ae=0,fe=0,Ie=0,Be=0,ke=0,je=0,gt=0,yt=0,qe=0,Oe=0,Ne=0,$e=0,Fe=0,Pe=0,Ue=0,Se=0,Ce=0,He=0,xe=0,Ve=0,We=0,et=0,tt=0,Qe=0,rr=0,dr=0,Qr=0,ir=0,oi=0,Oi=0,Bi=0,St=U[0],vt=U[1],It=U[2],Ot=U[3],bt=U[4],_t=U[5],Lt=U[6],jt=U[7],xt=U[8],Mt=U[9],Pt=U[10],At=U[11],Ct=U[12],ht=U[13],qt=U[14],Ft=U[15];d=z[0],ae+=d*St,fe+=d*vt,Ie+=d*It,Be+=d*Ot,ke+=d*bt,je+=d*_t,gt+=d*Lt,yt+=d*jt,qe+=d*xt,Oe+=d*Mt,Ne+=d*Pt,$e+=d*At,Fe+=d*Ct,Pe+=d*ht,Ue+=d*qt,Se+=d*Ft,d=z[1],fe+=d*St,Ie+=d*vt,Be+=d*It,ke+=d*Ot,je+=d*bt,gt+=d*_t,yt+=d*Lt,qe+=d*jt,Oe+=d*xt,Ne+=d*Mt,$e+=d*Pt,Fe+=d*At,Pe+=d*Ct,Ue+=d*ht,Se+=d*qt,Ce+=d*Ft,d=z[2],Ie+=d*St,Be+=d*vt,ke+=d*It,je+=d*Ot,gt+=d*bt,yt+=d*_t,qe+=d*Lt,Oe+=d*jt,Ne+=d*xt,$e+=d*Mt,Fe+=d*Pt,Pe+=d*At,Ue+=d*Ct,Se+=d*ht,Ce+=d*qt,He+=d*Ft,d=z[3],Be+=d*St,ke+=d*vt,je+=d*It,gt+=d*Ot,yt+=d*bt,qe+=d*_t,Oe+=d*Lt,Ne+=d*jt,$e+=d*xt,Fe+=d*Mt,Pe+=d*Pt,Ue+=d*At,Se+=d*Ct,Ce+=d*ht,He+=d*qt,xe+=d*Ft,d=z[4],ke+=d*St,je+=d*vt,gt+=d*It,yt+=d*Ot,qe+=d*bt,Oe+=d*_t,Ne+=d*Lt,$e+=d*jt,Fe+=d*xt,Pe+=d*Mt,Ue+=d*Pt,Se+=d*At,Ce+=d*Ct,He+=d*ht,xe+=d*qt,Ve+=d*Ft,d=z[5],je+=d*St,gt+=d*vt,yt+=d*It,qe+=d*Ot,Oe+=d*bt,Ne+=d*_t,$e+=d*Lt,Fe+=d*jt,Pe+=d*xt,Ue+=d*Mt,Se+=d*Pt,Ce+=d*At,He+=d*Ct,xe+=d*ht,Ve+=d*qt,We+=d*Ft,d=z[6],gt+=d*St,yt+=d*vt,qe+=d*It,Oe+=d*Ot,Ne+=d*bt,$e+=d*_t,Fe+=d*Lt,Pe+=d*jt,Ue+=d*xt,Se+=d*Mt,Ce+=d*Pt,He+=d*At,xe+=d*Ct,Ve+=d*ht,We+=d*qt,et+=d*Ft,d=z[7],yt+=d*St,qe+=d*vt,Oe+=d*It,Ne+=d*Ot,$e+=d*bt,Fe+=d*_t,Pe+=d*Lt,Ue+=d*jt,Se+=d*xt,Ce+=d*Mt,He+=d*Pt,xe+=d*At,Ve+=d*Ct,We+=d*ht,et+=d*qt,tt+=d*Ft,d=z[8],qe+=d*St,Oe+=d*vt,Ne+=d*It,$e+=d*Ot,Fe+=d*bt,Pe+=d*_t,Ue+=d*Lt,Se+=d*jt,Ce+=d*xt,He+=d*Mt,xe+=d*Pt,Ve+=d*At,We+=d*Ct,et+=d*ht,tt+=d*qt,Qe+=d*Ft,d=z[9],Oe+=d*St,Ne+=d*vt,$e+=d*It,Fe+=d*Ot,Pe+=d*bt,Ue+=d*_t,Se+=d*Lt,Ce+=d*jt,He+=d*xt,xe+=d*Mt,Ve+=d*Pt,We+=d*At,et+=d*Ct,tt+=d*ht,Qe+=d*qt,rr+=d*Ft,d=z[10],Ne+=d*St,$e+=d*vt,Fe+=d*It,Pe+=d*Ot,Ue+=d*bt,Se+=d*_t,Ce+=d*Lt,He+=d*jt,xe+=d*xt,Ve+=d*Mt,We+=d*Pt,et+=d*At,tt+=d*Ct,Qe+=d*ht,rr+=d*qt,dr+=d*Ft,d=z[11],$e+=d*St,Fe+=d*vt,Pe+=d*It,Ue+=d*Ot,Se+=d*bt,Ce+=d*_t,He+=d*Lt,xe+=d*jt,Ve+=d*xt,We+=d*Mt,et+=d*Pt,tt+=d*At,Qe+=d*Ct,rr+=d*ht,dr+=d*qt,Qr+=d*Ft,d=z[12],Fe+=d*St,Pe+=d*vt,Ue+=d*It,Se+=d*Ot,Ce+=d*bt,He+=d*_t,xe+=d*Lt,Ve+=d*jt,We+=d*xt,et+=d*Mt,tt+=d*Pt,Qe+=d*At,rr+=d*Ct,dr+=d*ht,Qr+=d*qt,ir+=d*Ft,d=z[13],Pe+=d*St,Ue+=d*vt,Se+=d*It,Ce+=d*Ot,He+=d*bt,xe+=d*_t,Ve+=d*Lt,We+=d*jt,et+=d*xt,tt+=d*Mt,Qe+=d*Pt,rr+=d*At,dr+=d*Ct,Qr+=d*ht,ir+=d*qt,oi+=d*Ft,d=z[14],Ue+=d*St,Se+=d*vt,Ce+=d*It,He+=d*Ot,xe+=d*bt,Ve+=d*_t,We+=d*Lt,et+=d*jt,tt+=d*xt,Qe+=d*Mt,rr+=d*Pt,dr+=d*At,Qr+=d*Ct,ir+=d*ht,oi+=d*qt,Oi+=d*Ft,d=z[15],Se+=d*St,Ce+=d*vt,He+=d*It,xe+=d*Ot,Ve+=d*bt,We+=d*_t,et+=d*Lt,tt+=d*jt,Qe+=d*xt,rr+=d*Mt,dr+=d*Pt,Qr+=d*At,ir+=d*Ct,oi+=d*ht,Oi+=d*qt,Bi+=d*Ft,ae+=38*Ce,fe+=38*He,Ie+=38*xe,Be+=38*Ve,ke+=38*We,je+=38*et,gt+=38*tt,yt+=38*Qe,qe+=38*rr,Oe+=38*dr,Ne+=38*Qr,$e+=38*ir,Fe+=38*oi,Pe+=38*Oi,Ue+=38*Bi,R=1,d=ae+R+65535,R=Math.floor(d/65536),ae=d-R*65536,d=fe+R+65535,R=Math.floor(d/65536),fe=d-R*65536,d=Ie+R+65535,R=Math.floor(d/65536),Ie=d-R*65536,d=Be+R+65535,R=Math.floor(d/65536),Be=d-R*65536,d=ke+R+65535,R=Math.floor(d/65536),ke=d-R*65536,d=je+R+65535,R=Math.floor(d/65536),je=d-R*65536,d=gt+R+65535,R=Math.floor(d/65536),gt=d-R*65536,d=yt+R+65535,R=Math.floor(d/65536),yt=d-R*65536,d=qe+R+65535,R=Math.floor(d/65536),qe=d-R*65536,d=Oe+R+65535,R=Math.floor(d/65536),Oe=d-R*65536,d=Ne+R+65535,R=Math.floor(d/65536),Ne=d-R*65536,d=$e+R+65535,R=Math.floor(d/65536),$e=d-R*65536,d=Fe+R+65535,R=Math.floor(d/65536),Fe=d-R*65536,d=Pe+R+65535,R=Math.floor(d/65536),Pe=d-R*65536,d=Ue+R+65535,R=Math.floor(d/65536),Ue=d-R*65536,d=Se+R+65535,R=Math.floor(d/65536),Se=d-R*65536,ae+=R-1+37*(R-1),R=1,d=ae+R+65535,R=Math.floor(d/65536),ae=d-R*65536,d=fe+R+65535,R=Math.floor(d/65536),fe=d-R*65536,d=Ie+R+65535,R=Math.floor(d/65536),Ie=d-R*65536,d=Be+R+65535,R=Math.floor(d/65536),Be=d-R*65536,d=ke+R+65535,R=Math.floor(d/65536),ke=d-R*65536,d=je+R+65535,R=Math.floor(d/65536),je=d-R*65536,d=gt+R+65535,R=Math.floor(d/65536),gt=d-R*65536,d=yt+R+65535,R=Math.floor(d/65536),yt=d-R*65536,d=qe+R+65535,R=Math.floor(d/65536),qe=d-R*65536,d=Oe+R+65535,R=Math.floor(d/65536),Oe=d-R*65536,d=Ne+R+65535,R=Math.floor(d/65536),Ne=d-R*65536,d=$e+R+65535,R=Math.floor(d/65536),$e=d-R*65536,d=Fe+R+65535,R=Math.floor(d/65536),Fe=d-R*65536,d=Pe+R+65535,R=Math.floor(d/65536),Pe=d-R*65536,d=Ue+R+65535,R=Math.floor(d/65536),Ue=d-R*65536,d=Se+R+65535,R=Math.floor(d/65536),Se=d-R*65536,ae+=R-1+37*(R-1),H[0]=ae,H[1]=fe,H[2]=Ie,H[3]=Be,H[4]=ke,H[5]=je,H[6]=gt,H[7]=yt,H[8]=qe,H[9]=Oe,H[10]=Ne,H[11]=$e,H[12]=Fe,H[13]=Pe,H[14]=Ue,H[15]=Se}function w(H,z){u(H,z,z)}function G(H,z){const U=o();let d;for(d=0;d<16;d++)U[d]=z[d];for(d=253;d>=0;d--)w(U,U),d!==2&&d!==4&&u(U,U,z);for(d=0;d<16;d++)H[d]=U[d]}function W(H,z){const U=o();let d;for(d=0;d<16;d++)U[d]=z[d];for(d=250;d>=0;d--)w(U,U),d!==1&&u(U,U,z);for(d=0;d<16;d++)H[d]=U[d]}function se(H,z){const U=o(),d=o(),R=o(),ae=o(),fe=o(),Ie=o(),Be=o(),ke=o(),je=o();S(U,H[1],H[0]),S(je,z[1],z[0]),u(U,U,je),A(d,H[0],H[1]),A(je,z[0],z[1]),u(d,d,je),u(R,H[3],z[3]),u(R,R,p),u(ae,H[2],z[2]),A(ae,ae,ae),S(fe,d,U),S(Ie,ae,R),A(Be,ae,R),A(ke,d,U),u(H[0],fe,Ie),u(H[1],ke,Be),u(H[2],Be,Ie),u(H[3],fe,ke)}function ue(H,z,U){for(let d=0;d<4;d++)F(H[d],z[d],U)}function de(H,z){const U=o(),d=o(),R=o();G(R,z[2]),u(U,z[0],R),u(d,z[1],R),B(H,d),H[31]^=L(U)<<7}function E(H,z,U){O(H[0],l),O(H[1],f),O(H[2],f),O(H[3],l);for(let d=255;d>=0;--d){const R=U[d/8|0]>>(d&7)&1;ue(H,z,R),se(z,H),se(H,H),ue(H,z,R)}}function T(H,z){const U=[o(),o(),o(),o()];O(U[0],v),O(U[1],b),O(U[2],f),u(U[3],v,b),E(H,U,z)}function ee(H){if(H.length!==i.SEED_LENGTH)throw new Error(`ed25519: seed must be ${i.SEED_LENGTH} bytes`);const z=(0,t.hash)(H);z[0]&=248,z[31]&=127,z[31]|=64;const U=new Uint8Array(32),d=[o(),o(),o(),o()];T(d,z),de(U,d);const R=new Uint8Array(64);return R.set(H),R.set(U,32),{publicKey:U,secretKey:R}}i.generateKeyPairFromSeed=ee;function Q(H){const z=(0,e.randomBytes)(32,H),U=ee(z);return(0,s.wipe)(z),U}i.generateKeyPair=Q;function k(H){if(H.length!==i.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${i.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(H.subarray(32))}i.extractPublicKeyFromSecretKey=k;const V=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Y(H,z){let U,d,R,ae;for(d=63;d>=32;--d){for(U=0,R=d-32,ae=d-12;R<ae;++R)z[R]+=U-16*z[d]*V[R-(d-32)],U=Math.floor((z[R]+128)/256),z[R]-=U*256;z[R]+=U,z[d]=0}for(U=0,R=0;R<32;R++)z[R]+=U-(z[31]>>4)*V[R],U=z[R]>>8,z[R]&=255;for(R=0;R<32;R++)z[R]-=U*V[R];for(d=0;d<32;d++)z[d+1]+=z[d]>>8,H[d]=z[d]&255}function ie(H){const z=new Float64Array(64);for(let U=0;U<64;U++)z[U]=H[U];for(let U=0;U<64;U++)H[U]=0;Y(H,z)}function we(H,z){const U=new Float64Array(64),d=[o(),o(),o(),o()],R=(0,t.hash)(H.subarray(0,32));R[0]&=248,R[31]&=127,R[31]|=64;const ae=new Uint8Array(64);ae.set(R.subarray(32),32);const fe=new t.SHA512;fe.update(ae.subarray(32)),fe.update(z);const Ie=fe.digest();fe.clean(),ie(Ie),T(d,Ie),de(ae,d),fe.reset(),fe.update(ae.subarray(0,32)),fe.update(H.subarray(32)),fe.update(z);const Be=fe.digest();ie(Be);for(let ke=0;ke<32;ke++)U[ke]=Ie[ke];for(let ke=0;ke<32;ke++)for(let je=0;je<32;je++)U[ke+je]+=Be[ke]*R[je];return Y(ae.subarray(32),U),ae}i.sign=we;function oe(H,z){const U=o(),d=o(),R=o(),ae=o(),fe=o(),Ie=o(),Be=o();return O(H[2],f),C(H[1],z),w(R,H[1]),u(ae,R,g),S(R,R,H[2]),A(ae,H[2],ae),w(fe,ae),w(Ie,fe),u(Be,Ie,fe),u(U,Be,R),u(U,U,ae),W(U,U),u(U,U,R),u(U,U,ae),u(U,U,ae),u(H[0],U,ae),w(d,H[0]),u(d,d,ae),$(d,R)&&u(H[0],H[0],D),w(d,H[0]),u(d,d,ae),$(d,R)?-1:(L(H[0])===z[31]>>7&&S(H[0],l,H[0]),u(H[3],H[0],H[1]),0)}function be(H,z,U){const d=new Uint8Array(32),R=[o(),o(),o(),o()],ae=[o(),o(),o(),o()];if(U.length!==i.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${i.SIGNATURE_LENGTH} bytes`);if(oe(ae,H))return!1;const fe=new t.SHA512;fe.update(U.subarray(0,32)),fe.update(H),fe.update(z);const Ie=fe.digest();return ie(Ie),E(R,ae,Ie),T(ae,U.subarray(32)),se(R,ae),de(d,R),!te(U,d)}i.verify=be;function le(H){let z=[o(),o(),o(),o()];if(oe(z,H))throw new Error("Ed25519: invalid public key");let U=o(),d=o(),R=z[1];A(U,f,R),S(d,f,R),G(d,d),u(U,U,d);let ae=new Uint8Array(32);return B(ae,U),ae}i.convertPublicKeyToX25519=le;function _e(H){const z=(0,t.hash)(H.subarray(0,32));z[0]&=248,z[31]&=127,z[31]|=64;const U=new Uint8Array(z.subarray(0,32));return(0,s.wipe)(z),U}i.convertSecretKeyToX25519=_e})(Qu);const m3="EdDSA",w3="JWT",Cp=".",Tp="base64url",b3="utf8",E3="utf8",D3=":",S3="did",I3="key",Kf="base58btc",O3="z",x3="K36",P3=32,C3=i=>JSON.stringify(i,(e,t)=>typeof t=="bigint"?t.toString()+"n":t);function T3(i){return typeof i=="string"?i:C3(i)||""}function ea(i){return fr(br(T3(i),b3),Tp)}function Ap(i){const e=br(x3,Kf),t=O3+fr(yu([e,i]),Kf);return[S3,I3,t].join(D3)}function A3(i){return fr(i,Tp)}function R3(i){return br([ea(i.header),ea(i.payload)].join(Cp),E3)}function N3(i){return[ea(i.header),ea(i.payload),A3(i.signature)].join(Cp)}function kf(i=Bn.randomBytes(P3)){return Qu.generateKeyPairFromSeed(i)}async function $3(i,e,t,s,o=ve.fromMiliseconds(Date.now())){const c={alg:m3,typ:w3},l=Ap(s.publicKey),f=o+t,g={iss:l,sub:i,aud:e,iat:o,exp:f},p=R3({header:c,payload:g}),v=Qu.sign(s.secretKey,p);return N3({header:c,payload:g,signature:v})}var Vf=function(i,e,t){if(t||arguments.length===2)for(var s=0,o=e.length,c;s<o;s++)(c||!(s in e))&&(c||(c=Array.prototype.slice.call(e,0,s)),c[s]=e[s]);return i.concat(c||Array.prototype.slice.call(e))},U3=function(){function i(e,t,s){this.name=e,this.version=t,this.os=s,this.type="browser"}return i}(),L3=function(){function i(e){this.version=e,this.type="node",this.name="node",this.os=si.platform}return i}(),j3=function(){function i(e,t,s,o){this.name=e,this.version=t,this.os=s,this.bot=o,this.type="bot-device"}return i}(),M3=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),q3=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),F3=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,z3=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Gf=3,B3=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",F3]],Wf=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function H3(i){return i?Jf(i):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new q3:typeof navigator<"u"?Jf(navigator.userAgent):V3()}function K3(i){return i!==""&&B3.reduce(function(e,t){var s=t[0],o=t[1];if(e)return e;var c=o.exec(i);return!!c&&[s,c]},!1)}function Jf(i){var e=K3(i);if(!e)return null;var t=e[0],s=e[1];if(t==="searchbot")return new M3;var o=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);o?o.length<Gf&&(o=Vf(Vf([],o,!0),G3(Gf-o.length),!0)):o=[];var c=o.join("."),l=k3(i),f=z3.exec(i);return f&&f[1]?new j3(t,c,l,f[1]):new U3(t,c,l)}function k3(i){for(var e=0,t=Wf.length;e<t;e++){var s=Wf[e],o=s[0],c=s[1],l=c.exec(i);if(l)return o}return null}function V3(){var i=typeof si<"u"&&si.version;return i?new L3(si.version.slice(1)):null}function G3(i){for(var e=[],t=0;t<i;t++)e.push("0");return e}var ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.getLocalStorage=ft.getLocalStorageOrThrow=ft.getCrypto=ft.getCryptoOrThrow=Rp=ft.getLocation=ft.getLocationOrThrow=Zu=ft.getNavigator=ft.getNavigatorOrThrow=Xu=ft.getDocument=ft.getDocumentOrThrow=ft.getFromWindowOrThrow=ft.getFromWindow=void 0;function fn(i){let e;return typeof window<"u"&&typeof window[i]<"u"&&(e=window[i]),e}ft.getFromWindow=fn;function kn(i){const e=fn(i);if(!e)throw new Error(`${i} is not defined in Window`);return e}ft.getFromWindowOrThrow=kn;function W3(){return kn("document")}ft.getDocumentOrThrow=W3;function J3(){return fn("document")}var Xu=ft.getDocument=J3;function Y3(){return kn("navigator")}ft.getNavigatorOrThrow=Y3;function Q3(){return fn("navigator")}var Zu=ft.getNavigator=Q3;function X3(){return kn("location")}ft.getLocationOrThrow=X3;function Z3(){return fn("location")}var Rp=ft.getLocation=Z3;function eS(){return kn("crypto")}ft.getCryptoOrThrow=eS;function tS(){return fn("crypto")}ft.getCrypto=tS;function rS(){return kn("localStorage")}ft.getLocalStorageOrThrow=rS;function iS(){return fn("localStorage")}ft.getLocalStorage=iS;var eh={};Object.defineProperty(eh,"__esModule",{value:!0});var Np=eh.getWindowMetadata=void 0;const Yf=ft;function nS(){let i,e;try{i=Yf.getDocumentOrThrow(),e=Yf.getLocationOrThrow()}catch{return null}function t(){const b=i.getElementsByTagName("link"),D=[];for(let O=0;O<b.length;O++){const x=b[O],F=x.getAttribute("rel");if(F&&F.toLowerCase().indexOf("icon")>-1){const B=x.getAttribute("href");if(B)if(B.toLowerCase().indexOf("https:")===-1&&B.toLowerCase().indexOf("http:")===-1&&B.indexOf("//")!==0){let te=e.protocol+"//"+e.host;if(B.indexOf("/")===0)te+=B;else{const $=e.pathname.split("/");$.pop();const L=$.join("/");te+=L+"/"+B}D.push(te)}else if(B.indexOf("//")===0){const te=e.protocol+B;D.push(te)}else D.push(B)}}return D}function s(...b){const D=i.getElementsByTagName("meta");for(let O=0;O<D.length;O++){const x=D[O],F=["itemprop","property","name"].map(B=>x.getAttribute(B)).filter(B=>B?b.includes(B):!1);if(F.length&&F){const B=x.getAttribute("content");if(B)return B}}return""}function o(){let b=s("name","og:site_name","og:title","twitter:title");return b||(b=i.title),b}function c(){return s("description","og:description","twitter:description","keywords")}const l=o(),f=c(),g=e.origin,p=t();return{description:f,url:g,icons:p,name:l}}Np=eh.getWindowMetadata=nS;const sS=":";function oS(i){const[e,t]=i.split(sS);return{namespace:e,reference:t}}function $p(i,e){return i.includes(":")?[i]:e.chains||[]}const Up="base10",lr="base16",Cu="base64pad",th="utf8",Lp=0,dn=1,aS=0,Qf=1,Tu=12,rh=32;function cS(){const i=Wu.generateKeyPair();return{privateKey:fr(i.secretKey,lr),publicKey:fr(i.publicKey,lr)}}function Au(){const i=Bn.randomBytes(rh);return fr(i,lr)}function uS(i,e){const t=Wu.sharedKey(br(i,lr),br(e,lr),!0),s=new A1(ua.SHA256,t).expand(rh);return fr(s,lr)}function hS(i){const e=ua.hash(br(i,lr));return fr(e,lr)}function qn(i){const e=ua.hash(br(i,th));return fr(e,lr)}function lS(i){return br(`${i}`,Up)}function Us(i){return Number(fr(i,Up))}function fS(i){const e=lS(typeof i.type<"u"?i.type:Lp);if(Us(e)===dn&&typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof i.senderPublicKey<"u"?br(i.senderPublicKey,lr):void 0,s=typeof i.iv<"u"?br(i.iv,lr):Bn.randomBytes(Tu),o=new Vu.ChaCha20Poly1305(br(i.symKey,lr)).seal(s,br(i.message,th));return pS({type:e,sealed:o,iv:s,senderPublicKey:t})}function dS(i){const e=new Vu.ChaCha20Poly1305(br(i.symKey,lr)),{sealed:t,iv:s}=ta(i.encoded),o=e.open(s,t);if(o===null)throw new Error("Failed to decrypt");return fr(o,th)}function pS(i){if(Us(i.type)===dn){if(typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return fr(yu([i.type,i.senderPublicKey,i.iv,i.sealed]),Cu)}return fr(yu([i.type,i.iv,i.sealed]),Cu)}function ta(i){const e=br(i,Cu),t=e.slice(aS,Qf),s=Qf;if(Us(t)===dn){const f=s+rh,g=f+Tu,p=e.slice(s,f),v=e.slice(f,g),b=e.slice(g);return{type:t,sealed:b,iv:v,senderPublicKey:p}}const o=s+Tu,c=e.slice(s,o),l=e.slice(o);return{type:t,sealed:l,iv:c}}function gS(i,e){const t=ta(i);return jp({type:Us(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?fr(t.senderPublicKey,lr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function jp(i){const e=(i==null?void 0:i.type)||Lp;if(e===dn){if(typeof(i==null?void 0:i.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(i==null?void 0:i.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:i==null?void 0:i.senderPublicKey,receiverPublicKey:i==null?void 0:i.receiverPublicKey}}function Xf(i){return i.type===dn&&typeof i.senderPublicKey=="string"&&typeof i.receiverPublicKey=="string"}var yS=Object.defineProperty,Zf=Object.getOwnPropertySymbols,vS=Object.prototype.hasOwnProperty,_S=Object.prototype.propertyIsEnumerable,ed=(i,e,t)=>e in i?yS(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,td=(i,e)=>{for(var t in e||(e={}))vS.call(e,t)&&ed(i,t,e[t]);if(Zf)for(var t of Zf(e))_S.call(e,t)&&ed(i,t,e[t]);return i};const mS="ReactNative",Cr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},wS="js";function ih(){return typeof si<"u"&&typeof si.versions<"u"&&typeof si.versions.node<"u"}function Vn(){return!Xu()&&!!Zu()&&navigator.product===mS}function Gn(){return!ih()&&!!Zu()&&!!Xu()}function Ls(){return Vn()?Cr.reactNative:ih()?Cr.node:Gn()?Cr.browser:Cr.unknown}function bS(){var i;try{return Vn()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(i=global.Application)==null?void 0:i.applicationId:void 0}catch{return}}function ES(i,e){let t=Os.parse(i);return t=td(td({},t),e),i=Os.stringify(t),i}function DS(){return Np()||{name:"",description:"",url:"",icons:[""]}}function SS(){if(Ls()===Cr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:s}=global.Platform;return[t,s].join("-")}const i=H3();if(i===null)return"unknown";const e=i.os?i.os.replace(" ","").toLowerCase():"unknown";return i.type==="browser"?[e,i.name,i.version].join("-"):[e,i.version].join("-")}function IS(){var i;const e=Ls();return e===Cr.browser?[e,((i=Rp())==null?void 0:i.host)||"unknown"].join(":"):e}function OS(i,e,t){const s=SS(),o=IS();return[[i,e].join("-"),[wS,t].join("-"),s,o].join("/")}function xS({protocol:i,version:e,relayUrl:t,sdkVersion:s,auth:o,projectId:c,useOnCloseEvent:l,bundleId:f}){const g=t.split("?"),p=OS(i,e,s),v={auth:o,ua:p,projectId:c,useOnCloseEvent:l||void 0,origin:f||void 0},b=ES(g[1]||"",v);return g[0]+"?"+b}function an(i,e){return i.filter(t=>e.includes(t)).length===i.length}function Mp(i){return Object.fromEntries(i.entries())}function qp(i){return new Map(Object.entries(i))}function jn(i=ve.FIVE_MINUTES,e){const t=ve.toMiliseconds(i||ve.FIVE_MINUTES);let s,o,c;return{resolve:l=>{c&&s&&(clearTimeout(c),s(l))},reject:l=>{c&&o&&(clearTimeout(c),o(l))},done:()=>new Promise((l,f)=>{c=setTimeout(()=>{f(new Error(e))},t),s=l,o=f})}}function Cs(i,e,t){return new Promise(async(s,o)=>{const c=setTimeout(()=>o(new Error(t)),e);try{const l=await i;s(l)}catch(l){o(l)}clearTimeout(c)})}function Fp(i,e){if(typeof e=="string"&&e.startsWith(`${i}:`))return e;if(i.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(i.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${i}`)}function PS(i){return Fp("topic",i)}function CS(i){return Fp("id",i)}function zp(i){const[e,t]=i.split(":"),s={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")s.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))s.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return s}function Pr(i,e){return ve.fromMiliseconds((e||Date.now())+ve.toMiliseconds(i))}function ji(i){return Date.now()>=ve.toMiliseconds(i)}function Ut(i,e){return`${i}${e?`:${e}`:""}`}function Zc(i=[],e=[]){return[...new Set([...i,...e])]}async function TS({id:i,topic:e,wcDeepLink:t}){try{if(!t)return;const s=typeof t=="string"?JSON.parse(t):t;let o=s==null?void 0:s.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const c=`${o}/wc?requestId=${i}&sessionTopic=${e}`,l=Ls();l===Cr.browser?c.startsWith("https://")?window.open(c,"_blank","noreferrer noopener"):window.open(c,"_self","noreferrer noopener"):l===Cr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(c)}catch(s){console.error(s)}}async function AS(i,e){try{return await i.getItem(e)||(Gn()?localStorage.getItem(e):void 0)}catch(t){console.error(t)}}const RS="irn";function Ru(i){return(i==null?void 0:i.relay)||{protocol:RS}}function Qo(i){const e=OE[i];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${i}`);return e}var NS=Object.defineProperty,$S=Object.defineProperties,US=Object.getOwnPropertyDescriptors,rd=Object.getOwnPropertySymbols,LS=Object.prototype.hasOwnProperty,jS=Object.prototype.propertyIsEnumerable,id=(i,e,t)=>e in i?NS(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,MS=(i,e)=>{for(var t in e||(e={}))LS.call(e,t)&&id(i,t,e[t]);if(rd)for(var t of rd(e))jS.call(e,t)&&id(i,t,e[t]);return i},qS=(i,e)=>$S(i,US(e));function FS(i,e="-"){const t={},s="relay"+e;return Object.keys(i).forEach(o=>{if(o.startsWith(s)){const c=o.replace(s,""),l=i[o];t[c]=l}}),t}function nd(i){i=i.includes("wc://")?i.replace("wc://",""):i,i=i.includes("wc:")?i.replace("wc:",""):i;const e=i.indexOf(":"),t=i.indexOf("?")!==-1?i.indexOf("?"):void 0,s=i.substring(0,e),o=i.substring(e+1,t).split("@"),c=typeof t<"u"?i.substring(t):"",l=Os.parse(c);return{protocol:s,topic:zS(o[0]),version:parseInt(o[1],10),symKey:l.symKey,relay:FS(l),expiryTimestamp:l.expiryTimestamp?parseInt(l.expiryTimestamp,10):void 0}}function zS(i){return i.startsWith("//")?i.substring(2):i}function BS(i,e="-"){const t="relay",s={};return Object.keys(i).forEach(o=>{const c=t+e+o;i[o]&&(s[c]=i[o])}),s}function HS(i){return`${i.protocol}:${i.topic}@${i.version}?`+Os.stringify(qS(MS({symKey:i.symKey},BS(i.relay)),{expiryTimestamp:i.expiryTimestamp}))}function Wn(i){const e=[];return i.forEach(t=>{const[s,o]=t.split(":");e.push(`${s}:${o}`)}),e}function KS(i){const e=[];return Object.values(i).forEach(t=>{e.push(...Wn(t.accounts))}),e}function kS(i,e){const t=[];return Object.values(i).forEach(s=>{Wn(s.accounts).includes(e)&&t.push(...s.methods)}),t}function VS(i,e){const t=[];return Object.values(i).forEach(s=>{Wn(s.accounts).includes(e)&&t.push(...s.events)}),t}function nh(i){return i.includes(":")}function bs(i){return nh(i)?i.split(":")[0]:i}const GS={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},WS={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ce(i,e){const{message:t,code:s}=WS[i];return{message:e?`${t} ${e}`:t,code:s}}function Dt(i,e){const{message:t,code:s}=GS[i];return{message:e?`${t} ${e}`:t,code:s}}function cn(i,e){return Array.isArray(i)?typeof e<"u"&&i.length?i.every(e):!0:!1}function Ts(i){return Object.getPrototypeOf(i)===Object.prototype&&Object.keys(i).length}function hr(i){return typeof i>"u"}function Wt(i,e){return e&&hr(i)?!0:typeof i=="string"&&!!i.trim().length}function sh(i,e){return e&&hr(i)?!0:typeof i=="number"&&!isNaN(i)}function JS(i,e){const{requiredNamespaces:t}=e,s=Object.keys(i.namespaces),o=Object.keys(t);let c=!0;return an(o,s)?(s.forEach(l=>{const{accounts:f,methods:g,events:p}=i.namespaces[l],v=Wn(f),b=t[l];(!an($p(l,b),v)||!an(b.methods,g)||!an(b.events,p))&&(c=!1)}),c):!1}function ra(i){return Wt(i,!1)&&i.includes(":")?i.split(":").length===2:!1}function YS(i){if(Wt(i,!1)&&i.includes(":")){const e=i.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&ra(t)}}return!1}function QS(i){if(Wt(i,!1))try{return typeof new URL(i)<"u"}catch{return!1}return!1}function XS(i){var e;return(e=i==null?void 0:i.proposer)==null?void 0:e.publicKey}function ZS(i){return i==null?void 0:i.topic}function e2(i,e){let t=null;return Wt(i==null?void 0:i.publicKey,!1)||(t=ce("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function sd(i){let e=!0;return cn(i)?i.length&&(e=i.every(t=>Wt(t,!1))):e=!1,e}function t2(i,e,t){let s=null;return cn(e)&&e.length?e.forEach(o=>{s||ra(o)||(s=Dt("UNSUPPORTED_CHAINS",`${t}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):ra(i)||(s=Dt("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}function r2(i,e,t){let s=null;return Object.entries(i).forEach(([o,c])=>{if(s)return;const l=t2(o,$p(o,c),`${e} ${t}`);l&&(s=l)}),s}function i2(i,e){let t=null;return cn(i)?i.forEach(s=>{t||YS(s)||(t=Dt("UNSUPPORTED_ACCOUNTS",`${e}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):t=Dt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function n2(i,e){let t=null;return Object.values(i).forEach(s=>{if(t)return;const o=i2(s==null?void 0:s.accounts,`${e} namespace`);o&&(t=o)}),t}function s2(i,e){let t=null;return sd(i==null?void 0:i.methods)?sd(i==null?void 0:i.events)||(t=Dt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=Dt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function Bp(i,e){let t=null;return Object.values(i).forEach(s=>{if(t)return;const o=s2(s,`${e}, namespace`);o&&(t=o)}),t}function o2(i,e,t){let s=null;if(i&&Ts(i)){const o=Bp(i,e);o&&(s=o);const c=r2(i,e,t);c&&(s=c)}else s=ce("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return s}function eu(i,e){let t=null;if(i&&Ts(i)){const s=Bp(i,e);s&&(t=s);const o=n2(i,e);o&&(t=o)}else t=ce("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function Hp(i){return Wt(i.protocol,!0)}function a2(i,e){let t=!1;return e&&!i?t=!0:i&&cn(i)&&i.length&&i.forEach(s=>{t=Hp(s)}),t}function c2(i){return typeof i=="number"}function wr(i){return typeof i<"u"&&typeof i!==null}function u2(i){return!(!i||typeof i!="object"||!i.code||!sh(i.code,!1)||!i.message||!Wt(i.message,!1))}function h2(i){return!(hr(i)||!Wt(i.method,!1))}function l2(i){return!(hr(i)||hr(i.result)&&hr(i.error)||!sh(i.id,!1)||!Wt(i.jsonrpc,!1))}function f2(i){return!(hr(i)||!Wt(i.name,!1))}function od(i,e){return!(!ra(e)||!KS(i).includes(e))}function d2(i,e,t){return Wt(t,!1)?kS(i,e).includes(t):!1}function p2(i,e,t){return Wt(t,!1)?VS(i,e).includes(t):!1}function ad(i,e,t){let s=null;const o=g2(i),c=y2(e),l=Object.keys(o),f=Object.keys(c),g=cd(Object.keys(i)),p=cd(Object.keys(e)),v=g.filter(b=>!p.includes(b));return v.length&&(s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${v.toString()}
      Received: ${Object.keys(e).toString()}`)),an(l,f)||(s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${l.toString()}
      Approved: ${f.toString()}`)),Object.keys(e).forEach(b=>{if(!b.includes(":")||s)return;const D=Wn(e[b].accounts);D.includes(b)||(s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${b}
        Required: ${b}
        Approved: ${D.toString()}`))}),l.forEach(b=>{s||(an(o[b].methods,c[b].methods)?an(o[b].events,c[b].events)||(s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${b}`)):s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${b}`))}),s}function g2(i){const e={};return Object.keys(i).forEach(t=>{var s;t.includes(":")?e[t]=i[t]:(s=i[t].chains)==null||s.forEach(o=>{e[o]={methods:i[t].methods,events:i[t].events}})}),e}function cd(i){return[...new Set(i.map(e=>e.includes(":")?e.split(":")[0]:e))]}function y2(i){const e={};return Object.keys(i).forEach(t=>{if(t.includes(":"))e[t]=i[t];else{const s=Wn(i[t].accounts);s==null||s.forEach(o=>{e[o]={accounts:i[t].accounts.filter(c=>c.includes(`${o}:`)),methods:i[t].methods,events:i[t].events}})}}),e}function v2(i,e){return sh(i,!1)&&i<=e.max&&i>=e.min}function ud(){const i=Ls();return new Promise(e=>{switch(i){case Cr.browser:e(_2());break;case Cr.reactNative:e(m2());break;case Cr.node:e(w2());break;default:e(!0)}})}function _2(){return Gn()&&(navigator==null?void 0:navigator.onLine)}async function m2(){if(Vn()&&typeof global<"u"&&global!=null&&global.NetInfo){const i=await(global==null?void 0:global.NetInfo.fetch());return i==null?void 0:i.isConnected}return!0}function w2(){return!0}function b2(i){switch(Ls()){case Cr.browser:E2(i);break;case Cr.reactNative:D2(i);break}}function E2(i){!Vn()&&Gn()&&(window.addEventListener("online",()=>i(!0)),window.addEventListener("offline",()=>i(!1)))}function D2(i){Vn()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>i(e==null?void 0:e.isConnected)))}const tu={};let ko=class{static get(e){return tu[e]}static set(e,t){tu[e]=t}static delete(e){delete tu[e]}};const S2="PARSE_ERROR",I2="INVALID_REQUEST",O2="METHOD_NOT_FOUND",x2="INVALID_PARAMS",Kp="INTERNAL_ERROR",oh="SERVER_ERROR",P2=[-32700,-32600,-32601,-32602,-32603],Ss={[S2]:{code:-32700,message:"Parse error"},[I2]:{code:-32600,message:"Invalid Request"},[O2]:{code:-32601,message:"Method not found"},[x2]:{code:-32602,message:"Invalid params"},[Kp]:{code:-32603,message:"Internal error"},[oh]:{code:-32e3,message:"Server error"}},kp=oh;function C2(i){return P2.includes(i)}function hd(i){return Object.keys(Ss).includes(i)?Ss[i]:Ss[kp]}function T2(i){const e=Object.values(Ss).find(t=>t.code===i);return e||Ss[kp]}function Vp(i,e,t){return i.message.includes("getaddrinfo ENOTFOUND")||i.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):i}var Gp={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Nu=function(i,e){return Nu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},Nu(i,e)};function A2(i,e){Nu(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var $u=function(){return $u=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},$u.apply(this,arguments)};function R2(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function N2(i,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,s);else for(var f=i.length-1;f>=0;f--)(l=i[f])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function $2(i,e){return function(t,s){e(t,s,i)}}function U2(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function L2(i,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function f(v){try{p(s.next(v))}catch(b){l(b)}}function g(v){try{p(s.throw(v))}catch(b){l(b)}}function p(v){v.done?c(v.value):o(v.value).then(f,g)}p((s=s.apply(i,e||[])).next())})}function j2(i,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(v){return g([p,v])}}function g(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(i,t)}catch(v){p=[6,v],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function M2(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}function q2(i,e){for(var t in i)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=i[t])}function Uu(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wp(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(f){l={error:f}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function F2(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(Wp(arguments[e]));return i}function z2(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,f=c.length;l<f;l++,o++)s[o]=c[l];return s}function As(i){return this instanceof As?(this.v=i,this):new As(i)}function B2(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(D){s[D]&&(o[D]=function(O){return new Promise(function(x,F){c.push([D,O,x,F])>1||f(D,O)})})}function f(D,O){try{g(s[D](O))}catch(x){b(c[0][3],x)}}function g(D){D.value instanceof As?Promise.resolve(D.value.v).then(p,v):b(c[0][2],D)}function p(D){f("next",D)}function v(D){f("throw",D)}function b(D,O){D(O),c.shift(),c.length&&f(c[0][0],c[0][1])}}function H2(i){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=i[o]?function(l){return(t=!t)?{value:As(i[o](l)),done:o==="return"}:c?c(l):l}:c}}function K2(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof Uu=="function"?Uu(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=i[c]&&function(l){return new Promise(function(f,g){l=i[c](l),o(f,g,l.done,l.value)})}}function o(c,l,f,g){Promise.resolve(g).then(function(p){c({value:p,done:f})},l)}}function k2(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function V2(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e.default=i,e}function G2(i){return i&&i.__esModule?i:{default:i}}function W2(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)}function J2(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t}const Y2=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return $u},__asyncDelegator:H2,__asyncGenerator:B2,__asyncValues:K2,__await:As,__awaiter:L2,__classPrivateFieldGet:W2,__classPrivateFieldSet:J2,__createBinding:M2,__decorate:N2,__exportStar:q2,__extends:A2,__generator:j2,__importDefault:G2,__importStar:V2,__makeTemplateObject:k2,__metadata:U2,__param:$2,__read:Wp,__rest:R2,__spread:F2,__spreadArrays:z2,__values:Uu},Symbol.toStringTag,{value:"Module"})),Q2=zn(Y2);var _i={},ld;function X2(){if(ld)return _i;ld=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.isBrowserCryptoAvailable=_i.getSubtleCrypto=_i.getBrowerCrypto=void 0;function i(){return(Yr===null||Yr===void 0?void 0:Yr.crypto)||(Yr===null||Yr===void 0?void 0:Yr.msCrypto)||{}}_i.getBrowerCrypto=i;function e(){const s=i();return s.subtle||s.webkitSubtle}_i.getSubtleCrypto=e;function t(){return!!i()&&!!e()}return _i.isBrowserCryptoAvailable=t,_i}var mi={},fd;function Z2(){if(fd)return mi;fd=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.isBrowser=mi.isNode=mi.isReactNative=void 0;function i(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}mi.isReactNative=i;function e(){return typeof si<"u"&&typeof si.versions<"u"&&typeof si.versions.node<"u"}mi.isNode=e;function t(){return!i()&&!e()}return mi.isBrowser=t,mi}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=Q2;e.__exportStar(X2(),i),e.__exportStar(Z2(),i)})(Gp);function ah(i=3){const e=Date.now()*Math.pow(10,i),t=Math.floor(Math.random()*Math.pow(10,i));return e+t}function Jp(i=6){return BigInt(ah(i))}function Fn(i,e,t){return{id:t||ah(),jsonrpc:"2.0",method:i,params:e}}function da(i,e){return{id:i,jsonrpc:"2.0",result:e}}function pa(i,e,t){return{id:i,jsonrpc:"2.0",error:eI(e,t)}}function eI(i,e){return typeof i>"u"?hd(Kp):(typeof i=="string"&&(i=Object.assign(Object.assign({},hd(oh)),{message:i})),typeof e<"u"&&(i.data=e),C2(i.code)&&(i=T2(i.code)),i)}class tI{}class rI extends tI{constructor(){super()}}class iI extends rI{constructor(e){super()}}const nI="^https?:",sI="^wss?:";function oI(i){const e=i.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Yp(i,e){const t=oI(i);return typeof t>"u"?!1:new RegExp(e).test(t)}function dd(i){return Yp(i,nI)}function pd(i){return Yp(i,sI)}function aI(i){return new RegExp("wss?://localhost(:d{2,5})?").test(i)}function Qp(i){return typeof i=="object"&&"id"in i&&"jsonrpc"in i&&i.jsonrpc==="2.0"}function ch(i){return Qp(i)&&"method"in i}function ga(i){return Qp(i)&&(Di(i)||Jr(i))}function Di(i){return"result"in i}function Jr(i){return"error"in i}class Si extends iI{constructor(e){super(e),this.events=new zr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(Fn(e.method,e.params||[],e.id||Jp().toString()),t)}async requestStrict(e,t){return new Promise(async(s,o)=>{if(!this.connection.connected)try{await this.open()}catch(c){o(c)}this.events.on(`${e.id}`,c=>{Jr(c)?o(c.error):s(c.result)});try{await this.connection.send(e,t)}catch(c){o(c)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),ga(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const cI=i=>JSON.stringify(i,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),uI=i=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=i.replace(e,'$1"$2n"$3');return JSON.parse(t,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function hI(i){if(typeof i!="string")throw new Error(`Cannot safe json parse value of type ${typeof i}`);try{return uI(i)}catch{return i}}function lI(i){return typeof i=="string"?i:cI(i)||""}const fI=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),dI=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",gd=i=>i.split("?")[0],yd=10,pI=fI();let gI=class{constructor(e){if(this.url=e,this.events=new zr.EventEmitter,this.registering=!1,!pd(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(lI(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!pd(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,s)=>{const o=new URLSearchParams(e).get("origin"),c=Gp.isReactNative()?{headers:{origin:o}}:{rejectUnauthorized:!aI(e)},l=new pI(e,[],c);dI()?l.onerror=f=>{const g=f;s(this.emitError(g.error))}:l.on("error",f=>{s(this.emitError(f))}),l.onopen=()=>{this.onOpen(l),t(l)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?hI(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),c=pa(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return Vp(e,gd(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>yd&&this.events.setMaxListeners(yd)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${gd(this.url)}`));return this.events.emit("register_error",t),t}};var ia={exports:{}};ia.exports;(function(i,e){var t=200,s="__lodash_hash_undefined__",o=1,c=2,l=9007199254740991,f="[object Arguments]",g="[object Array]",p="[object AsyncFunction]",v="[object Boolean]",b="[object Date]",D="[object Error]",O="[object Function]",x="[object GeneratorFunction]",F="[object Map]",B="[object Number]",te="[object Null]",$="[object Object]",L="[object Promise]",C="[object Proxy]",A="[object RegExp]",S="[object Set]",u="[object String]",w="[object Symbol]",G="[object Undefined]",W="[object WeakMap]",se="[object ArrayBuffer]",ue="[object DataView]",de="[object Float32Array]",E="[object Float64Array]",T="[object Int8Array]",ee="[object Int16Array]",Q="[object Int32Array]",k="[object Uint8Array]",V="[object Uint8ClampedArray]",Y="[object Uint16Array]",ie="[object Uint32Array]",we=/[\\^$.*+?()[\]{}|]/g,oe=/^\[object .+?Constructor\]$/,be=/^(?:0|[1-9]\d*)$/,le={};le[de]=le[E]=le[T]=le[ee]=le[Q]=le[k]=le[V]=le[Y]=le[ie]=!0,le[f]=le[g]=le[se]=le[v]=le[ue]=le[b]=le[D]=le[O]=le[F]=le[B]=le[$]=le[A]=le[S]=le[u]=le[W]=!1;var _e=typeof Yr=="object"&&Yr&&Yr.Object===Object&&Yr,H=typeof self=="object"&&self&&self.Object===Object&&self,z=_e||H||Function("return this")(),U=e&&!e.nodeType&&e,d=U&&!0&&i&&!i.nodeType&&i,R=d&&d.exports===U,ae=R&&_e.process,fe=function(){try{return ae&&ae.binding&&ae.binding("util")}catch{}}(),Ie=fe&&fe.isTypedArray;function Be(I,j){for(var re=-1,pe=I==null?0:I.length,at=0,Ae=[];++re<pe;){var dt=I[re];j(dt,re,I)&&(Ae[at++]=dt)}return Ae}function ke(I,j){for(var re=-1,pe=j.length,at=I.length;++re<pe;)I[at+re]=j[re];return I}function je(I,j){for(var re=-1,pe=I==null?0:I.length;++re<pe;)if(j(I[re],re,I))return!0;return!1}function gt(I,j){for(var re=-1,pe=Array(I);++re<I;)pe[re]=j(re);return pe}function yt(I){return function(j){return I(j)}}function qe(I,j){return I.has(j)}function Oe(I,j){return I==null?void 0:I[j]}function Ne(I){var j=-1,re=Array(I.size);return I.forEach(function(pe,at){re[++j]=[at,pe]}),re}function $e(I,j){return function(re){return I(j(re))}}function Fe(I){var j=-1,re=Array(I.size);return I.forEach(function(pe){re[++j]=pe}),re}var Pe=Array.prototype,Ue=Function.prototype,Se=Object.prototype,Ce=z["__core-js_shared__"],He=Ue.toString,xe=Se.hasOwnProperty,Ve=function(){var I=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||"");return I?"Symbol(src)_1."+I:""}(),We=Se.toString,et=RegExp("^"+He.call(xe).replace(we,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=R?z.Buffer:void 0,Qe=z.Symbol,rr=z.Uint8Array,dr=Se.propertyIsEnumerable,Qr=Pe.splice,ir=Qe?Qe.toStringTag:void 0,oi=Object.getOwnPropertySymbols,Oi=tt?tt.isBuffer:void 0,Bi=$e(Object.keys,Object),St=Er(z,"DataView"),vt=Er(z,"Map"),It=Er(z,"Promise"),Ot=Er(z,"Set"),bt=Er(z,"WeakMap"),_t=Er(Object,"create"),Lt=ci(St),jt=ci(vt),xt=ci(It),Mt=ci(Ot),Pt=ci(bt),At=Qe?Qe.prototype:void 0,Ct=At?At.valueOf:void 0;function ht(I){var j=-1,re=I==null?0:I.length;for(this.clear();++j<re;){var pe=I[j];this.set(pe[0],pe[1])}}function qt(){this.__data__=_t?_t(null):{},this.size=0}function Ft(I){var j=this.has(I)&&delete this.__data__[I];return this.size-=j?1:0,j}function _a(I){var j=this.__data__;if(_t){var re=j[I];return re===s?void 0:re}return xe.call(j,I)?j[I]:void 0}function ma(I){var j=this.__data__;return _t?j[I]!==void 0:xe.call(j,I)}function wa(I,j){var re=this.__data__;return this.size+=this.has(I)?0:1,re[I]=_t&&j===void 0?s:j,this}ht.prototype.clear=qt,ht.prototype.delete=Ft,ht.prototype.get=_a,ht.prototype.has=ma,ht.prototype.set=wa;function Ar(I){var j=-1,re=I==null?0:I.length;for(this.clear();++j<re;){var pe=I[j];this.set(pe[0],pe[1])}}function ba(){this.__data__=[],this.size=0}function Ea(I){var j=this.__data__,re=Hi(j,I);if(re<0)return!1;var pe=j.length-1;return re==pe?j.pop():Qr.call(j,re,1),--this.size,!0}function Da(I){var j=this.__data__,re=Hi(j,I);return re<0?void 0:j[re][1]}function Sa(I){return Hi(this.__data__,I)>-1}function Ia(I,j){var re=this.__data__,pe=Hi(re,I);return pe<0?(++this.size,re.push([I,j])):re[pe][1]=j,this}Ar.prototype.clear=ba,Ar.prototype.delete=Ea,Ar.prototype.get=Da,Ar.prototype.has=Sa,Ar.prototype.set=Ia;function ai(I){var j=-1,re=I==null?0:I.length;for(this.clear();++j<re;){var pe=I[j];this.set(pe[0],pe[1])}}function gn(){this.size=0,this.__data__={hash:new ht,map:new(vt||Ar),string:new ht}}function Oa(I){var j=xi(this,I).delete(I);return this.size-=j?1:0,j}function yn(I){return xi(this,I).get(I)}function xa(I){return xi(this,I).has(I)}function Pa(I,j){var re=xi(this,I),pe=re.size;return re.set(I,j),this.size+=re.size==pe?0:1,this}ai.prototype.clear=gn,ai.prototype.delete=Oa,ai.prototype.get=yn,ai.prototype.has=xa,ai.prototype.set=Pa;function vn(I){var j=-1,re=I==null?0:I.length;for(this.__data__=new ai;++j<re;)this.add(I[j])}function Ms(I){return this.__data__.set(I,s),this}function qs(I){return this.__data__.has(I)}vn.prototype.add=vn.prototype.push=Ms,vn.prototype.has=qs;function Br(I){var j=this.__data__=new Ar(I);this.size=j.size}function Ca(){this.__data__=new Ar,this.size=0}function Ta(I){var j=this.__data__,re=j.delete(I);return this.size=j.size,re}function Aa(I){return this.__data__.get(I)}function Ra(I){return this.__data__.has(I)}function Fs(I,j){var re=this.__data__;if(re instanceof Ar){var pe=re.__data__;if(!vt||pe.length<t-1)return pe.push([I,j]),this.size=++re.size,this;re=this.__data__=new ai(pe)}return re.set(I,j),this.size=re.size,this}Br.prototype.clear=Ca,Br.prototype.delete=Ta,Br.prototype.get=Aa,Br.prototype.has=Ra,Br.prototype.set=Fs;function zs(I,j){var re=wn(I),pe=!re&&Zs(I),at=!re&&!pe&&Qn(I),Ae=!re&&!pe&&!at&&ro(I),dt=re||pe||at||Ae,zt=dt?gt(I.length,String):[],Xe=zt.length;for(var ct in I)(j||xe.call(I,ct))&&!(dt&&(ct=="length"||at&&(ct=="offset"||ct=="parent")||Ae&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||Ws(ct,Xe)))&&zt.push(ct);return zt}function Hi(I,j){for(var re=I.length;re--;)if(Xs(I[re][0],j))return re;return-1}function Jn(I,j,re){var pe=j(I);return wn(I)?pe:ke(pe,re(I))}function Ki(I){return I==null?I===void 0?G:te:ir&&ir in Object(I)?Vs(I):Ua(I)}function Yn(I){return Vi(I)&&Ki(I)==f}function ki(I,j,re,pe,at){return I===j?!0:I==null||j==null||!Vi(I)&&!Vi(j)?I!==I&&j!==j:Bs(I,j,re,pe,ki,at)}function Bs(I,j,re,pe,at,Ae){var dt=wn(I),zt=wn(j),Xe=dt?g:Xr(I),ct=zt?g:Xr(j);Xe=Xe==f?$:Xe,ct=ct==f?$:ct;var Rt=Xe==$,pr=ct==$,Bt=Xe==ct;if(Bt&&Qn(I)){if(!Qn(j))return!1;dt=!0,Rt=!1}if(Bt&&!Rt)return Ae||(Ae=new Br),dt||ro(I)?_n(I,j,re,pe,at,Ae):$a(I,j,Xe,re,pe,at,Ae);if(!(re&o)){var pt=Rt&&xe.call(I,"__wrapped__"),nr=pr&&xe.call(j,"__wrapped__");if(pt||nr){var Hr=pt?I.value():I,Rr=nr?j.value():j;return Ae||(Ae=new Br),at(Hr,Rr,re,pe,Ae)}}return Bt?(Ae||(Ae=new Br),ks(I,j,re,pe,at,Ae)):!1}function Na(I){if(!to(I)||Ys(I))return!1;var j=bn(I)?et:oe;return j.test(ci(I))}function Hs(I){return Vi(I)&&eo(I.length)&&!!le[Ki(I)]}function Ks(I){if(!Qs(I))return Bi(I);var j=[];for(var re in Object(I))xe.call(I,re)&&re!="constructor"&&j.push(re);return j}function _n(I,j,re,pe,at,Ae){var dt=re&o,zt=I.length,Xe=j.length;if(zt!=Xe&&!(dt&&Xe>zt))return!1;var ct=Ae.get(I);if(ct&&Ae.get(j))return ct==j;var Rt=-1,pr=!0,Bt=re&c?new vn:void 0;for(Ae.set(I,j),Ae.set(j,I);++Rt<zt;){var pt=I[Rt],nr=j[Rt];if(pe)var Hr=dt?pe(nr,pt,Rt,j,I,Ae):pe(pt,nr,Rt,I,j,Ae);if(Hr!==void 0){if(Hr)continue;pr=!1;break}if(Bt){if(!je(j,function(Rr,Zr){if(!qe(Bt,Zr)&&(pt===Rr||at(pt,Rr,re,pe,Ae)))return Bt.push(Zr)})){pr=!1;break}}else if(!(pt===nr||at(pt,nr,re,pe,Ae))){pr=!1;break}}return Ae.delete(I),Ae.delete(j),pr}function $a(I,j,re,pe,at,Ae,dt){switch(re){case ue:if(I.byteLength!=j.byteLength||I.byteOffset!=j.byteOffset)return!1;I=I.buffer,j=j.buffer;case se:return!(I.byteLength!=j.byteLength||!Ae(new rr(I),new rr(j)));case v:case b:case B:return Xs(+I,+j);case D:return I.name==j.name&&I.message==j.message;case A:case u:return I==j+"";case F:var zt=Ne;case S:var Xe=pe&o;if(zt||(zt=Fe),I.size!=j.size&&!Xe)return!1;var ct=dt.get(I);if(ct)return ct==j;pe|=c,dt.set(I,j);var Rt=_n(zt(I),zt(j),pe,at,Ae,dt);return dt.delete(I),Rt;case w:if(Ct)return Ct.call(I)==Ct.call(j)}return!1}function ks(I,j,re,pe,at,Ae){var dt=re&o,zt=mn(I),Xe=zt.length,ct=mn(j),Rt=ct.length;if(Xe!=Rt&&!dt)return!1;for(var pr=Xe;pr--;){var Bt=zt[pr];if(!(dt?Bt in j:xe.call(j,Bt)))return!1}var pt=Ae.get(I);if(pt&&Ae.get(j))return pt==j;var nr=!0;Ae.set(I,j),Ae.set(j,I);for(var Hr=dt;++pr<Xe;){Bt=zt[pr];var Rr=I[Bt],Zr=j[Bt];if(pe)var Xn=dt?pe(Zr,Rr,Bt,j,I,Ae):pe(Rr,Zr,Bt,I,j,Ae);if(!(Xn===void 0?Rr===Zr||at(Rr,Zr,re,pe,Ae):Xn)){nr=!1;break}Hr||(Hr=Bt=="constructor")}if(nr&&!Hr){var Gi=I.constructor,kt=j.constructor;Gi!=kt&&"constructor"in I&&"constructor"in j&&!(typeof Gi=="function"&&Gi instanceof Gi&&typeof kt=="function"&&kt instanceof kt)&&(nr=!1)}return Ae.delete(I),Ae.delete(j),nr}function mn(I){return Jn(I,Ma,Gs)}function xi(I,j){var re=I.__data__;return Js(j)?re[typeof j=="string"?"string":"hash"]:re.map}function Er(I,j){var re=Oe(I,j);return Na(re)?re:void 0}function Vs(I){var j=xe.call(I,ir),re=I[ir];try{I[ir]=void 0;var pe=!0}catch{}var at=We.call(I);return pe&&(j?I[ir]=re:delete I[ir]),at}var Gs=oi?function(I){return I==null?[]:(I=Object(I),Be(oi(I),function(j){return dr.call(I,j)}))}:ot,Xr=Ki;(St&&Xr(new St(new ArrayBuffer(1)))!=ue||vt&&Xr(new vt)!=F||It&&Xr(It.resolve())!=L||Ot&&Xr(new Ot)!=S||bt&&Xr(new bt)!=W)&&(Xr=function(I){var j=Ki(I),re=j==$?I.constructor:void 0,pe=re?ci(re):"";if(pe)switch(pe){case Lt:return ue;case jt:return F;case xt:return L;case Mt:return S;case Pt:return W}return j});function Ws(I,j){return j=j??l,!!j&&(typeof I=="number"||be.test(I))&&I>-1&&I%1==0&&I<j}function Js(I){var j=typeof I;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?I!=="__proto__":I===null}function Ys(I){return!!Ve&&Ve in I}function Qs(I){var j=I&&I.constructor,re=typeof j=="function"&&j.prototype||Se;return I===re}function Ua(I){return We.call(I)}function ci(I){if(I!=null){try{return He.call(I)}catch{}try{return I+""}catch{}}return""}function Xs(I,j){return I===j||I!==I&&j!==j}var Zs=Yn(function(){return arguments}())?Yn:function(I){return Vi(I)&&xe.call(I,"callee")&&!dr.call(I,"callee")},wn=Array.isArray;function La(I){return I!=null&&eo(I.length)&&!bn(I)}var Qn=Oi||st;function ja(I,j){return ki(I,j)}function bn(I){if(!to(I))return!1;var j=Ki(I);return j==O||j==x||j==p||j==C}function eo(I){return typeof I=="number"&&I>-1&&I%1==0&&I<=l}function to(I){var j=typeof I;return I!=null&&(j=="object"||j=="function")}function Vi(I){return I!=null&&typeof I=="object"}var ro=Ie?yt(Ie):Hs;function Ma(I){return La(I)?zs(I):Ks(I)}function ot(){return[]}function st(){return!1}i.exports=ja})(ia,ia.exports);var yI=ia.exports;const vI=Ku(yI);function _I(i,e){return e=e||{},new Promise(function(t,s){var o=new XMLHttpRequest,c=[],l=[],f={},g=function(){return{ok:(o.status/100|0)==2,statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:g,headers:{keys:function(){return c},entries:function(){return l},get:function(v){return f[v.toLowerCase()]},has:function(v){return v.toLowerCase()in f}}}};for(var p in o.open(e.method||"get",i,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(v,b,D){c.push(b=b.toLowerCase()),l.push([b,D]),f[b]=f[b]?f[b]+","+D:D}),t(g())},o.onerror=s,o.withCredentials=e.credentials=="include",e.headers)o.setRequestHeader(p,e.headers[p]);o.send(e.body||null)})}const mI=Object.freeze(Object.defineProperty({__proto__:null,default:_I},Symbol.toStringTag,{value:"Module"})),vd=zn(mI);var wI=self.fetch||(self.fetch=vd.default||vd);const bI=Ku(wI);var EI={};function DI(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<i.length;o++){var c=i.charAt(o),l=c.charCodeAt(0);if(t[l]!==255)throw new TypeError(c+" is ambiguous");t[l]=o}var f=i.length,g=i.charAt(0),p=Math.log(f)/Math.log(256),v=Math.log(256)/Math.log(f);function b(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var F=0,B=0,te=0,$=x.length;te!==$&&x[te]===0;)te++,F++;for(var L=($-te)*v+1>>>0,C=new Uint8Array(L);te!==$;){for(var A=x[te],S=0,u=L-1;(A!==0||S<B)&&u!==-1;u--,S++)A+=256*C[u]>>>0,C[u]=A%f>>>0,A=A/f>>>0;if(A!==0)throw new Error("Non-zero carry");B=S,te++}for(var w=L-B;w!==L&&C[w]===0;)w++;for(var G=g.repeat(F);w<L;++w)G+=i.charAt(C[w]);return G}function D(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;var F=0;if(x[F]!==" "){for(var B=0,te=0;x[F]===g;)B++,F++;for(var $=(x.length-F)*p+1>>>0,L=new Uint8Array($);x[F];){var C=t[x.charCodeAt(F)];if(C===255)return;for(var A=0,S=$-1;(C!==0||A<te)&&S!==-1;S--,A++)C+=f*L[S]>>>0,L[S]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");te=A,F++}if(x[F]!==" "){for(var u=$-te;u!==$&&L[u]===0;)u++;for(var w=new Uint8Array(B+($-u)),G=B;u!==$;)w[G++]=L[u++];return w}}}function O(x){var F=D(x);if(F)return F;throw new Error(`Non-${e} character`)}return{encode:b,decodeUnsafe:D,decode:O}}var SI=DI,II=SI;const Xp=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},OI=i=>new TextEncoder().encode(i),xI=i=>new TextDecoder().decode(i);class PI{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class CI{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Zp(this,e)}}class TI{constructor(e){this.decoders=e}or(e){return Zp(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Zp=(i,e)=>new TI({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});class AI{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new PI(e,t,s),this.decoder=new CI(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ya=({name:i,prefix:e,encode:t,decode:s})=>new AI(i,e,t,s),js=({prefix:i,name:e,alphabet:t})=>{const{encode:s,decode:o}=II(t,e);return ya({prefix:i,name:e,encode:s,decode:c=>Xp(o(c))})},RI=(i,e,t,s)=>{const o={};for(let v=0;v<e.length;++v)o[e[v]]=v;let c=i.length;for(;i[c-1]==="=";)--c;const l=new Uint8Array(c*t/8|0);let f=0,g=0,p=0;for(let v=0;v<c;++v){const b=o[i[v]];if(b===void 0)throw new SyntaxError(`Non-${s} character`);g=g<<t|b,f+=t,f>=8&&(f-=8,l[p++]=255&g>>f)}if(f>=t||255&g<<8-f)throw new SyntaxError("Unexpected end of data");return l},NI=(i,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let c="",l=0,f=0;for(let g=0;g<i.length;++g)for(f=f<<8|i[g],l+=8;l>t;)l-=t,c+=e[o&f>>l];if(l&&(c+=e[o&f<<t-l]),s)for(;c.length*t&7;)c+="=";return c},Qt=({name:i,prefix:e,bitsPerChar:t,alphabet:s})=>ya({prefix:e,name:i,encode(o){return NI(o,s,t)},decode(o){return RI(o,s,t,i)}}),$I=ya({prefix:"\0",name:"identity",encode:i=>xI(i),decode:i=>OI(i)});var UI=Object.freeze({__proto__:null,identity:$I});const LI=Qt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var jI=Object.freeze({__proto__:null,base2:LI});const MI=Qt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var qI=Object.freeze({__proto__:null,base8:MI});const FI=js({prefix:"9",name:"base10",alphabet:"0123456789"});var zI=Object.freeze({__proto__:null,base10:FI});const BI=Qt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),HI=Qt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var KI=Object.freeze({__proto__:null,base16:BI,base16upper:HI});const kI=Qt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),VI=Qt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),GI=Qt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),WI=Qt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),JI=Qt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),YI=Qt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),QI=Qt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),XI=Qt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ZI=Qt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var e6=Object.freeze({__proto__:null,base32:kI,base32upper:VI,base32pad:GI,base32padupper:WI,base32hex:JI,base32hexupper:YI,base32hexpad:QI,base32hexpadupper:XI,base32z:ZI});const t6=js({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),r6=js({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var i6=Object.freeze({__proto__:null,base36:t6,base36upper:r6});const n6=js({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),s6=js({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var o6=Object.freeze({__proto__:null,base58btc:n6,base58flickr:s6});const a6=Qt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),c6=Qt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),u6=Qt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),h6=Qt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var l6=Object.freeze({__proto__:null,base64:a6,base64pad:c6,base64url:u6,base64urlpad:h6});const eg=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),f6=eg.reduce((i,e,t)=>(i[t]=e,i),[]),d6=eg.reduce((i,e,t)=>(i[e.codePointAt(0)]=t,i),[]);function p6(i){return i.reduce((e,t)=>(e+=f6[t],e),"")}function g6(i){const e=[];for(const t of i){const s=d6[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const y6=ya({prefix:"🚀",name:"base256emoji",encode:p6,decode:g6});var v6=Object.freeze({__proto__:null,base256emoji:y6}),_6=tg,_d=128,m6=127,w6=~m6,b6=Math.pow(2,31);function tg(i,e,t){e=e||[],t=t||0;for(var s=t;i>=b6;)e[t++]=i&255|_d,i/=128;for(;i&w6;)e[t++]=i&255|_d,i>>>=7;return e[t]=i|0,tg.bytes=t-s+1,e}var E6=Lu,D6=128,md=127;function Lu(i,s){var t=0,s=s||0,o=0,c=s,l,f=i.length;do{if(c>=f)throw Lu.bytes=0,new RangeError("Could not decode varint");l=i[c++],t+=o<28?(l&md)<<o:(l&md)*Math.pow(2,o),o+=7}while(l>=D6);return Lu.bytes=c-s,t}var S6=Math.pow(2,7),I6=Math.pow(2,14),O6=Math.pow(2,21),x6=Math.pow(2,28),P6=Math.pow(2,35),C6=Math.pow(2,42),T6=Math.pow(2,49),A6=Math.pow(2,56),R6=Math.pow(2,63),N6=function(i){return i<S6?1:i<I6?2:i<O6?3:i<x6?4:i<P6?5:i<C6?6:i<T6?7:i<A6?8:i<R6?9:10},$6={encode:_6,decode:E6,encodingLength:N6},rg=$6;const wd=(i,e,t=0)=>(rg.encode(i,e,t),e),bd=i=>rg.encodingLength(i),ju=(i,e)=>{const t=e.byteLength,s=bd(i),o=s+bd(t),c=new Uint8Array(o+t);return wd(i,c,0),wd(t,c,s),c.set(e,o),new U6(i,t,e,c)};class U6{constructor(e,t,s,o){this.code=e,this.size=t,this.digest=s,this.bytes=o}}const ig=({name:i,code:e,encode:t})=>new L6(i,e,t);class L6{constructor(e,t,s){this.name=e,this.code=t,this.encode=s}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?ju(this.code,t):t.then(s=>ju(this.code,s))}else throw Error("Unknown type, must be binary type")}}const ng=i=>async e=>new Uint8Array(await crypto.subtle.digest(i,e)),j6=ig({name:"sha2-256",code:18,encode:ng("SHA-256")}),M6=ig({name:"sha2-512",code:19,encode:ng("SHA-512")});var q6=Object.freeze({__proto__:null,sha256:j6,sha512:M6});const sg=0,F6="identity",og=Xp,z6=i=>ju(sg,og(i)),B6={code:sg,name:F6,encode:og,digest:z6};var H6=Object.freeze({__proto__:null,identity:B6});new TextEncoder,new TextDecoder;const Ed={...UI,...jI,...qI,...zI,...KI,...e6,...i6,...o6,...l6,...v6};({...q6,...H6});function ag(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function K6(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ag(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function cg(i,e,t,s){return{name:i,prefix:e,encoder:{name:i,prefix:e,encode:t},decoder:{decode:s}}}const Dd=cg("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),ru=cg("ascii","a",i=>{let e="a";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e},i=>{i=i.substring(1);const e=K6(i.length);for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e}),k6={utf8:Dd,"utf-8":Dd,hex:Ed.base16,latin1:ru,ascii:ru,binary:ru,...Ed};function V6(i,e="utf8"){const t=k6[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ag(globalThis.Buffer.from(i,"utf-8")):t.decoder.decode(`${t.prefix}${i}`)}const ug="wc",G6=2,uh="core",Mi=`${ug}@2:${uh}:`,W6={name:uh,logger:"error"},J6={database:":memory:"},Y6="crypto",Sd="client_ed25519_seed",Q6=ve.ONE_DAY,X6="keychain",Z6="0.3",e5="messages",t5="0.3",r5=ve.SIX_HOURS,i5="publisher",hg="irn",n5="error",lg="wss://relay.walletconnect.com",Id="wss://relay.walletconnect.org",s5="relayer",tr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},o5="_subscription",wi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},a5=ve.ONE_SECOND,c5="2.11.2",u5=1e4,h5="0.3",l5="WALLETCONNECT_CLIENT_ID",Wr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},f5="subscription",d5="0.3",p5=ve.FIVE_SECONDS*1e3,g5="pairing",y5="0.3",_s={wc_pairingDelete:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:0},res:{ttl:ve.ONE_DAY,prompt:!1,tag:0}}},Es={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},ni={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},v5="history",_5="0.3",m5="expirer",Fr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},w5="0.3",iu="verify-api",Mn="https://verify.walletconnect.com",Mu="https://verify.walletconnect.org",b5=[Mn,Mu],E5="echo",D5="https://echo.walletconnect.com";class S5{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=X6,this.version=Z6,this.initialized=!1,this.storagePrefix=Mi,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,o)=>{this.isInitialized(),this.keychain.set(s,o),await this.persist()},this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:c}=ce("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(c)}return o},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=e,this.logger=Ye.generateChildLogger(t,this.name)}get context(){return Ye.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Mp(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?qp(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class I5{constructor(e,t,s){this.core=e,this.logger=t,this.name=Y6,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),c=kf(o);return Ap(c.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=cS();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const c=await this.getClientSeed(),l=kf(c),f=Au();return await $3(f,o,Q6,l)},this.generateSharedKey=(o,c,l)=>{this.isInitialized();const f=this.getPrivateKey(o),g=uS(f,c);return this.setSymKey(g,l)},this.setSymKey=async(o,c)=>{this.isInitialized();const l=c||hS(o);return await this.keychain.set(l,o),l},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,c,l)=>{this.isInitialized();const f=jp(l),g=_3(c);if(Xf(f)){const D=f.senderPublicKey,O=f.receiverPublicKey;o=await this.generateSharedKey(D,O)}const p=this.getSymKey(o),{type:v,senderPublicKey:b}=f;return fS({type:v,symKey:p,message:g,senderPublicKey:b})},this.decode=async(o,c,l)=>{this.isInitialized();const f=gS(c,l);if(Xf(f)){const g=f.receiverPublicKey,p=f.senderPublicKey;o=await this.generateSharedKey(g,p)}try{const g=this.getSymKey(o),p=dS({symKey:g,encoded:c});return v3(p)}catch(g){this.logger.error(`Failed to decode message from topic: '${o}', clientId: '${await this.getClientId()}'`),this.logger.error(g)}},this.getPayloadType=o=>{const c=ta(o);return Us(c.type)},this.getPayloadSenderPublicKey=o=>{const c=ta(o);return c.senderPublicKey?fr(c.senderPublicKey,lr):void 0},this.core=e,this.logger=Ye.generateChildLogger(t,this.name),this.keychain=s||new S5(this.core,this.logger)}get context(){return Ye.getLoggerContext(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Sd)}catch{e=Au(),await this.keychain.set(Sd,e)}return V6(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class O5 extends s3{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=e5,this.version=t5,this.initialized=!1,this.storagePrefix=Mi,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,o)=>{this.isInitialized();const c=qn(o);let l=this.messages.get(s);return typeof l>"u"&&(l={}),typeof l[c]<"u"||(l[c]=o,this.messages.set(s,l),await this.persist()),c},this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>{this.isInitialized();const c=this.get(s),l=qn(o);return typeof c[l]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Ye.generateChildLogger(e,this.name),this.core=t}get context(){return Ye.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Mp(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?qp(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class x5 extends o3{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new zr.EventEmitter,this.name=i5,this.queue=new Map,this.publishTimeout=ve.toMiliseconds(ve.TEN_SECONDS*2),this.needsTransportRestart=!1,this.publish=async(s,o,c)=>{var l;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}});try{const f=(c==null?void 0:c.ttl)||r5,g=Ru(c),p=(c==null?void 0:c.prompt)||!1,v=(c==null?void 0:c.tag)||0,b=(c==null?void 0:c.id)||Jp().toString(),D={topic:s,message:o,opts:{ttl:f,relay:g,prompt:p,tag:v,id:b}},O=setTimeout(()=>this.queue.set(b,D),this.publishTimeout);try{await await Cs(this.rpcPublish(s,o,f,g,p,v,b),this.publishTimeout,`Failed to publish payload, please try again. id:${b} tag:${v}`),this.removeRequestFromQueue(b),this.relayer.events.emit(tr.publish,D)}catch(x){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(l=c==null?void 0:c.internal)!=null&&l.throwOnFailedPublish)throw this.removeRequestFromQueue(b),x;return}finally{clearTimeout(O)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}})}catch(f){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(f),f}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=e,this.logger=Ye.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return Ye.getLoggerContext(this.logger)}rpcPublish(e,t,s,o,c,l,f){var g,p,v,b;const D={method:Qo(o.protocol).publish,params:{topic:e,message:t,ttl:s,prompt:c,tag:l},id:f};return hr((g=D.params)==null?void 0:g.prompt)&&((p=D.params)==null||delete p.prompt),hr((v=D.params)==null?void 0:v.tag)&&((b=D.params)==null||delete b.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:D}),this.relayer.request(D)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:s,opts:o}=e;await this.publish(t,s,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(Kn.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(tr.connection_stalled);return}this.checkQueue()}),this.relayer.on(tr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class P5{constructor(){this.map=new Map,this.set=(e,t)=>{const s=this.get(e);this.exists(e,t)||this.map.set(e,[...s,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const s=this.get(e);if(!this.exists(e,t))return;const o=s.filter(c=>c!==t);if(!o.length){this.map.delete(e);return}this.map.set(e,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var C5=Object.defineProperty,T5=Object.defineProperties,A5=Object.getOwnPropertyDescriptors,Od=Object.getOwnPropertySymbols,R5=Object.prototype.hasOwnProperty,N5=Object.prototype.propertyIsEnumerable,xd=(i,e,t)=>e in i?C5(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ms=(i,e)=>{for(var t in e||(e={}))R5.call(e,t)&&xd(i,t,e[t]);if(Od)for(var t of Od(e))N5.call(e,t)&&xd(i,t,e[t]);return i},nu=(i,e)=>T5(i,A5(e));class $5 extends u3{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new P5,this.events=new zr.EventEmitter,this.name=f5,this.version=d5,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Mi,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}});try{const c=Ru(o),l={topic:s,relay:c};this.pending.set(s,l);const f=await this.rpcSubscribe(s,c);return this.onSubscribe(f,l),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}}),f}catch(c){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(c),c}},this.unsubscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),typeof(o==null?void 0:o.id)<"u"?await this.unsubscribeById(s,o.id,o):await this.unsubscribeByTopic(s,o)},this.isSubscribed=async s=>{if(this.topics.includes(s))return!0;const o=`${this.pendingSubscriptionWatchLabel}_${s}`;return await new Promise((c,l)=>{const f=new ve.Watch;f.start(o);const g=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(g),f.stop(o),c(!0)),f.elapsed(o)>=p5&&(clearInterval(g),f.stop(o),l(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Ye.generateChildLogger(t,this.name),this.clientId=""}get context(){return Ye.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let s=!1;try{s=this.getSubscription(e).topic===t}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const s=this.topicMap.get(e);await Promise.all(s.map(async o=>await this.unsubscribeById(e,o,t)))}async unsubscribeById(e,t,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}});try{const o=Ru(s);await this.rpcUnsubscribe(e,t,o);const c=Dt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,c),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(e,t){const s={method:Qo(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await Cs(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(tr.connection_stalled)}return qn(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,s={method:Qo(t.protocol).batchSubscribe,params:{topics:e.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await Cs(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(tr.connection_stalled)}}rpcUnsubscribe(e,t,s){const o={method:Qo(s.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(e,t){this.setSubscription(e,nu(ms({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,ms({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,s){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,s),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,ms({},t)),this.topicMap.set(t.topic,e),this.events.emit(Wr.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const s=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(s.topic,e),this.events.emit(Wr.deleted,nu(ms({},s),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Wr.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Wr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);cn(t)&&this.onBatchSubscribe(t.map((s,o)=>nu(ms({},e[o]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Kn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(tr.connect,async()=>{await this.onConnect()}),this.relayer.on(tr.disconnect,()=>{this.onDisconnect()}),this.events.on(Wr.created,async e=>{const t=Wr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(Wr.deleted,async e=>{const t=Wr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var U5=Object.defineProperty,Pd=Object.getOwnPropertySymbols,L5=Object.prototype.hasOwnProperty,j5=Object.prototype.propertyIsEnumerable,Cd=(i,e,t)=>e in i?U5(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,M5=(i,e)=>{for(var t in e||(e={}))L5.call(e,t)&&Cd(i,t,e[t]);if(Pd)for(var t of Pd(e))j5.call(e,t)&&Cd(i,t,e[t]);return i};class q5 extends a3{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new zr.EventEmitter,this.name=s5,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.request=async t=>{this.logger.debug("Publishing Request Payload");const s=t.id;try{await this.toEstablishConnection();const o=this.provider.request(t);return this.requestsInFlight.set(s,{promise:o,request:t}),await o}catch(o){throw this.logger.debug("Failed to Publish Request"),this.logger.error(o),o}finally{this.requestsInFlight.delete(s)}},this.onPayloadHandler=t=>{this.onProviderPayload(t)},this.onConnectHandler=()=>{this.events.emit(tr.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=t=>{this.logger.error(t),this.events.emit(tr.error,t),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(wi.payload,this.onPayloadHandler),this.provider.on(wi.connect,this.onConnectHandler),this.provider.on(wi.disconnect,this.onDisconnectHandler),this.provider.on(wi.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Ye.generateChildLogger(e.logger,this.name):Ye.pino(Ye.getDefaultLoggerOptions({level:e.logger||n5})),this.messages=new O5(this.logger,e.core),this.subscriber=new $5(this,this.logger),this.publisher=new x5(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||lg,this.projectId=e.projectId,this.bundleId=bS(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Id}...`),await this.restartTransport(Id)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},u5)}get context(){return Ye.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,s){this.isInitialized(),await this.publisher.publish(e,t,s),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var s;this.isInitialized();let o=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"";if(o)return o;let c;const l=f=>{f.topic===e&&(this.subscriber.off(Wr.created,l),c())};return await Promise.all([new Promise(f=>{c=f,this.subscriber.on(Wr.created,l)}),new Promise(async f=>{o=await this.subscriber.subscribe(e,t),f()})]),o}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.requestsInFlight.size>0&&(this.logger.debug("Waiting for all in-flight requests to finish before closing transport..."),this.requestsInFlight.forEach(async e=>{await e.promise})),this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await Cs(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(t=>{if(!this.initialized)return t();this.subscriber.once(Wr.resubscribed,()=>{t()})}),new Promise(async(t,s)=>{try{await Cs(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(o){s(o);return}t()})])}catch(t){this.logger.error(t);const s=t;if(!this.isConnectionStalled(s.message))throw t;this.provider.events.emit(wi.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await ud())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Si(new gI(xS({sdkVersion:c5,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:s}=e;await this.messages.set(t,s)}async shouldIgnoreMessageEvent(e){const{topic:t,message:s}=e;if(!s||s.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${s}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const o=this.messages.has(t,s);return o&&this.logger.debug(`Ignoring duplicate message: ${s}`),o}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),ch(e)){if(!e.method.endsWith(o5))return;const t=e.params,{topic:s,message:o,publishedAt:c}=t.data,l={topic:s,message:o,publishedAt:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(M5({type:"event",event:t.id},l)),this.events.emit(t.id,l),await this.acknowledgePayload(e),await this.onMessageEvent(l)}else ga(e)&&this.events.emit(tr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(tr.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=da(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(wi.payload,this.onPayloadHandler),this.provider.off(wi.connect,this.onConnectHandler),this.provider.off(wi.disconnect,this.onDisconnectHandler),this.provider.off(wi.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(tr.connection_stalled,()=>{this.restartTransport().catch(t=>this.logger.error(t))});let e=await ud();b2(async t=>{this.initialized&&e!==t&&(e=t,t?await this.restartTransport().catch(s=>this.logger.error(s)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(s=>this.logger.error(s))))})}onProviderDisconnect(){this.events.emit(tr.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},ve.toMiliseconds(a5)))}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var F5=Object.defineProperty,Td=Object.getOwnPropertySymbols,z5=Object.prototype.hasOwnProperty,B5=Object.prototype.propertyIsEnumerable,Ad=(i,e,t)=>e in i?F5(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Rd=(i,e)=>{for(var t in e||(e={}))z5.call(e,t)&&Ad(i,t,e[t]);if(Td)for(var t of Td(e))B5.call(e,t)&&Ad(i,t,e[t]);return i};class va extends c3{constructor(e,t,s,o=Mi,c=void 0){super(e,t,s,o),this.core=e,this.logger=t,this.name=s,this.map=new Map,this.version=h5,this.cached=[],this.initialized=!1,this.storagePrefix=Mi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(l=>{this.getKey&&l!==null&&!hr(l)?this.map.set(this.getKey(l),l):XS(l)?this.map.set(l.id,l):ZS(l)&&this.map.set(l.topic,l)}),this.cached=[],this.initialized=!0)},this.set=async(l,f)=>{this.isInitialized(),this.map.has(l)?await this.update(l,f):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:l,value:f}),this.map.set(l,f),await this.persist())},this.get=l=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:l}),this.getData(l)),this.getAll=l=>(this.isInitialized(),l?this.values.filter(f=>Object.keys(l).every(g=>vI(f[g],l[g]))):this.values),this.update=async(l,f)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:l,update:f});const g=Rd(Rd({},this.getData(l)),f);this.map.set(l,g),await this.persist()},this.delete=async(l,f)=>{this.isInitialized(),this.map.has(l)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:l,reason:f}),this.map.delete(l),await this.persist())},this.logger=Ye.generateChildLogger(t,this.name),this.storagePrefix=o,this.getKey=c}get context(){return Ye.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class H5{constructor(e,t){this.core=e,this.logger=t,this.name=g5,this.version=y5,this.events=new ku,this.initialized=!1,this.storagePrefix=Mi,this.ignoredPayloadTypes=[dn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=Au(),o=await this.core.crypto.setSymKey(s),c=Pr(ve.FIVE_MINUTES),l={protocol:hg},f={topic:o,expiry:c,relay:l,active:!1},g=HS({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:l,expiryTimestamp:c});return await this.pairings.set(o,f),await this.core.relayer.subscribe(o),this.core.expirer.set(o,c),{topic:o,uri:g}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:o,symKey:c,relay:l,expiryTimestamp:f}=nd(s.uri);let g;if(this.pairings.keys.includes(o)&&(g=this.pairings.get(o),g.active))throw new Error(`Pairing already exists: ${o}. Please try again with a new connection URI.`);const p=f||Pr(ve.FIVE_MINUTES),v={topic:o,relay:l,expiry:p,active:!1};return await this.pairings.set(o,v),this.core.expirer.set(o,p),s.activatePairing&&await this.activate({topic:o}),this.events.emit(Es.create,v),this.core.crypto.keychain.has(o)||(await this.core.crypto.setSymKey(c,o),await this.core.relayer.subscribe(o,{relay:l})),v},this.activate=async({topic:s})=>{this.isInitialized();const o=Pr(ve.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:o}),this.core.expirer.set(s,o)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:o}=s;if(this.pairings.keys.includes(o)){const c=await this.sendRequest(o,"wc_pairingPing",{}),{done:l,resolve:f,reject:g}=jn();this.events.once(Ut("pairing_ping",c),({error:p})=>{p?g(p):f()}),await l()}},this.updateExpiry=async({topic:s,expiry:o})=>{this.isInitialized(),await this.pairings.update(s,{expiry:o})},this.updateMetadata=async({topic:s,metadata:o})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:o}=s;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",Dt("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(s,o,c)=>{const l=Fn(o,c),f=await this.core.crypto.encode(s,l),g=_s[o].req;return this.core.history.set(s,l),this.core.relayer.publish(s,f,g),l.id},this.sendResult=async(s,o,c)=>{const l=da(s,c),f=await this.core.crypto.encode(o,l),g=await this.core.history.get(o,s),p=_s[g.request.method].res;await this.core.relayer.publish(o,f,p),await this.core.history.resolve(l)},this.sendError=async(s,o,c)=>{const l=pa(s,c),f=await this.core.crypto.encode(o,l),g=await this.core.history.get(o,s),p=_s[g.request.method]?_s[g.request.method].res:_s.unregistered_method.res;await this.core.relayer.publish(o,f,p),await this.core.history.resolve(l)},this.deletePairing=async(s,o)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Dt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),o?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(o=>ji(o.expiry));await Promise.all(s.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=s=>{const{topic:o,payload:c}=s;switch(c.method){case"wc_pairingPing":return this.onPairingPingRequest(o,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,c);default:return this.onUnknownRpcMethodRequest(o,c)}},this.onRelayEventResponse=async s=>{const{topic:o,payload:c}=s,l=(await this.core.history.get(o,c.id)).request.method;switch(l){case"wc_pairingPing":return this.onPairingPingResponse(o,c);default:return this.onUnknownRpcMethodResponse(l)}},this.onPairingPingRequest=async(s,o)=>{const{id:c}=o;try{this.isValidPing({topic:s}),await this.sendResult(c,s,!0),this.events.emit(Es.ping,{id:c,topic:s})}catch(l){await this.sendError(c,s,l),this.logger.error(l)}},this.onPairingPingResponse=(s,o)=>{const{id:c}=o;setTimeout(()=>{Di(o)?this.events.emit(Ut("pairing_ping",c),{}):Jr(o)&&this.events.emit(Ut("pairing_ping",c),{error:o.error})},500)},this.onPairingDeleteRequest=async(s,o)=>{const{id:c}=o;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit(Es.delete,{id:c,topic:s})}catch(l){await this.sendError(c,s,l),this.logger.error(l)}},this.onUnknownRpcMethodRequest=async(s,o)=>{const{id:c,method:l}=o;try{if(this.registeredMethods.includes(l))return;const f=Dt("WC_METHOD_UNSUPPORTED",l);await this.sendError(c,s,f),this.logger.error(f)}catch(f){await this.sendError(c,s,f),this.logger.error(f)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Dt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{var o;if(!wr(s)){const{message:l}=ce("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(l)}if(!QS(s.uri)){const{message:l}=ce("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(l)}const c=nd(s.uri);if(!((o=c==null?void 0:c.relay)!=null&&o.protocol)){const{message:l}=ce("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(l)}if(!(c!=null&&c.symKey)){const{message:l}=ce("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(l)}if(c!=null&&c.expiryTimestamp&&ve.toMiliseconds(c==null?void 0:c.expiryTimestamp)<Date.now()){const{message:l}=ce("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(l)}},this.isValidPing=async s=>{if(!wr(s)){const{message:c}=ce("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidDisconnect=async s=>{if(!wr(s)){const{message:c}=ce("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async s=>{if(!Wt(s,!1)){const{message:o}=ce("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(o)}if(!this.pairings.keys.includes(s)){const{message:o}=ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(o)}if(ji(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:o}=ce("EXPIRED",`pairing topic: ${s}`);throw new Error(o)}},this.core=e,this.logger=Ye.generateChildLogger(t,this.name),this.pairings=new va(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ye.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(tr.message,async e=>{const{topic:t,message:s}=e;if(!this.pairings.keys.includes(t)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const o=await this.core.crypto.decode(t,s);try{ch(o)?(this.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):ga(o)&&(await this.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.core.history.delete(t,o.id))}catch(c){this.logger.error(c)}})}registerExpirerEvents(){this.core.expirer.on(Fr.expired,async e=>{const{topic:t}=zp(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(Es.expire,{topic:t}))})}}class K5 extends n3{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new zr.EventEmitter,this.name=v5,this.version=_5,this.cached=[],this.initialized=!1,this.storagePrefix=Mi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,o,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:c}),this.records.has(o.id))return;const l={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:c,expiry:Pr(ve.THIRTY_DAYS)};this.records.set(l.id,l),this.events.emit(ni.created,l)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const o=await this.getRecord(s.id);typeof o.response>"u"&&(o.response=Jr(s)?{error:s.error}:{result:s.result},this.records.set(o.id,o),this.events.emit(ni.updated,o))},this.get=async(s,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:o}),await this.getRecord(o)),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(c=>{if(c.topic===s){if(typeof o<"u"&&c.id!==o)return;this.records.delete(c.id),this.events.emit(ni.deleted,c)}})},this.exists=async(s,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===s:!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Ye.generateChildLogger(t,this.name)}get context(){return Ye.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const s={topic:t.topic,request:Fn(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(s)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ni.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ni.created,e=>{const t=ni.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(ni.updated,e=>{const t=ni.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(ni.deleted,e=>{const t=ni.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.core.heartbeat.on(Kn.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{ve.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class k5 extends h3{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new zr.EventEmitter,this.name=m5,this.version=w5,this.cached=[],this.initialized=!1,this.storagePrefix=Mi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const c=this.formatTarget(s),l={target:c,expiry:o};this.expirations.set(c,l),this.checkExpiry(c,l),this.events.emit(Fr.created,{target:c,expiration:l})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),c=this.getExpiration(o);this.expirations.delete(o),this.events.emit(Fr.deleted,{target:o,expiration:c})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Ye.generateChildLogger(t,this.name)}get context(){return Ye.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return PS(e);if(typeof e=="number")return CS(e);const{message:t}=ce("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Fr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}checkExpiry(e,t){const{expiry:s}=t;ve.toMiliseconds(s)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(Fr.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(Kn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Fr.created,e=>{const t=Fr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Fr.expired,e=>{const t=Fr.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Fr.deleted,e=>{const t=Fr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class V5 extends l3{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=iu,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async s=>{if(this.verifyDisabled||Vn()||!Gn())return;const o=this.getVerifyUrl(s==null?void 0:s.verifyUrl);this.verifyUrl!==o&&this.removeIframe(),this.verifyUrl=o;try{await this.createIframe()}catch(c){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(c)}if(!this.initialized){this.removeIframe(),this.verifyUrl=Mu;try{await this.createIframe()}catch(c){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(c),this.verifyDisabled=!0}}},this.register=async s=>{this.initialized?this.sendPost(s.attestationId):(this.addToQueue(s.attestationId),await this.init())},this.resolve=async s=>{if(this.isDevEnv)return"";const o=this.getVerifyUrl(s==null?void 0:s.verifyUrl);let c;try{c=await this.fetchAttestation(s.attestationId,o)}catch(l){this.logger.info(`failed to resolve attestation: ${s.attestationId} from url: ${o}`),this.logger.info(l),c=await this.fetchAttestation(s.attestationId,Mu)}return c},this.fetchAttestation=async(s,o)=>{this.logger.info(`resolving attestation: ${s} from url: ${o}`);const c=this.startAbortTimer(ve.ONE_SECOND*2),l=await fetch(`${o}/attestation/${s}`,{signal:this.abortController.signal});return clearTimeout(c),l.status===200?await l.json():void 0},this.addToQueue=s=>{this.queue.push(s)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(s=>this.sendPost(s)),this.queue=[])},this.sendPost=s=>{var o;try{if(!this.iframe)return;(o=this.iframe.contentWindow)==null||o.postMessage(s,"*"),this.logger.info(`postMessage sent: ${s} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let s;const o=c=>{c.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",o),s())};await Promise.race([new Promise(c=>{if(document.getElementById(iu))return c();window.addEventListener("message",o);const l=document.createElement("iframe");l.id=iu,l.src=`${this.verifyUrl}/${this.projectId}`,l.style.display="none",document.body.append(l),this.iframe=l,s=c}),new Promise((c,l)=>setTimeout(()=>{window.removeEventListener("message",o),l("verify iframe load timeout")},ve.toMiliseconds(ve.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=s=>{let o=s||Mn;return b5.includes(o)||(this.logger.info(`verify url: ${o}, not included in trusted list, assigning default: ${Mn}`),o=Mn),o},this.logger=Ye.generateChildLogger(t,this.name),this.verifyUrl=Mn,this.abortController=new AbortController,this.isDevEnv=ih()&&EI.IS_VITEST}get context(){return Ye.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ve.toMiliseconds(e))}}class G5 extends f3{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.context=E5,this.registerDeviceToken=async s=>{const{clientId:o,token:c,notificationType:l,enableEncrypted:f=!1}=s,g=`${D5}/${this.projectId}/clients`;await bI(g,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:o,type:l,token:c,always_raw:f})})},this.logger=Ye.generateChildLogger(t,this.context)}}var W5=Object.defineProperty,Nd=Object.getOwnPropertySymbols,J5=Object.prototype.hasOwnProperty,Y5=Object.prototype.propertyIsEnumerable,$d=(i,e,t)=>e in i?W5(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ud=(i,e)=>{for(var t in e||(e={}))J5.call(e,t)&&$d(i,t,e[t]);if(Nd)for(var t of Nd(e))Y5.call(e,t)&&$d(i,t,e[t]);return i};class hh extends i3{constructor(e){super(e),this.protocol=ug,this.version=G6,this.name=uh,this.events=new zr.EventEmitter,this.initialized=!1,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||lg,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ye.pino(Ye.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||W6.logger}));this.logger=Ye.generateChildLogger(t,this.name),this.heartbeat=new Kn.HeartBeat,this.crypto=new I5(this,this.logger,e==null?void 0:e.keychain),this.history=new K5(this,this.logger),this.expirer=new k5(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new aD(Ud(Ud({},J6),e==null?void 0:e.storageOptions)),this.relayer=new q5({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new H5(this,this.logger),this.verify=new V5(this.projectId||"",this.logger),this.echoClient=new G5(this.projectId||"",this.logger)}static async init(e){const t=new hh(e);await t.initialize();const s=await t.crypto.getClientId();return await t.storage.setItem(l5,s),t}get context(){return Ye.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const Q5=hh,fg="wc",dg=2,pg="client",lh=`${fg}@${dg}:${pg}:`,su={name:pg,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},Ld="WALLETCONNECT_DEEPLINK_CHOICE",X5="proposal",gg="Proposal expired",Z5="session",Vo=ve.SEVEN_DAYS,eO="engine",bi={wc_sessionPropose:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1115}}},ou={min:ve.FIVE_MINUTES,max:ve.SEVEN_DAYS},Ei={idle:"IDLE",active:"ACTIVE"},tO="request",rO=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var iO=Object.defineProperty,nO=Object.defineProperties,sO=Object.getOwnPropertyDescriptors,jd=Object.getOwnPropertySymbols,oO=Object.prototype.hasOwnProperty,aO=Object.prototype.propertyIsEnumerable,Md=(i,e,t)=>e in i?iO(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ur=(i,e)=>{for(var t in e||(e={}))oO.call(e,t)&&Md(i,t,e[t]);if(jd)for(var t of jd(e))aO.call(e,t)&&Md(i,t,e[t]);return i},Ln=(i,e)=>nO(i,sO(e));class cO extends p3{constructor(e){super(e),this.name=eO,this.events=new ku,this.initialized=!1,this.ignoredPayloadTypes=[dn],this.requestQueue={state:Ei.idle,queue:[]},this.sessionRequestQueue={state:Ei.idle,queue:[]},this.requestQueueDelay=ve.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(bi)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ve.toMiliseconds(this.requestQueueDelay)))},this.connect=async t=>{await this.isInitialized();const s=Ln(ur({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:o,requiredNamespaces:c,optionalNamespaces:l,sessionProperties:f,relays:g}=s;let p=o,v,b=!1;if(p&&(b=this.client.core.pairing.pairings.get(p).active),!p||!b){const{topic:C,uri:A}=await this.client.core.pairing.create();p=C,v=A}const D=await this.client.core.crypto.generateKeyPair(),O=bi.wc_sessionPropose.req.ttl||ve.FIVE_MINUTES,x=Pr(O),F=ur({requiredNamespaces:c,optionalNamespaces:l,relays:g??[{protocol:hg}],proposer:{publicKey:D,metadata:this.client.metadata},expiryTimestamp:x},f&&{sessionProperties:f}),{reject:B,resolve:te,done:$}=jn(O,gg);if(this.events.once(Ut("session_connect"),async({error:C,session:A})=>{if(C)B(C);else if(A){A.self.publicKey=D;const S=Ln(ur({},A),{requiredNamespaces:F.requiredNamespaces,optionalNamespaces:F.optionalNamespaces});await this.client.session.set(A.topic,S),await this.setExpiry(A.topic,A.expiry),p&&await this.client.core.pairing.updateMetadata({topic:p,metadata:A.peer.metadata}),te(S)}}),!p){const{message:C}=ce("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(C)}const L=await this.sendRequest({topic:p,method:"wc_sessionPropose",params:F,throwOnFailedPublish:!0});return await this.setProposal(L,ur({id:L},F)),{uri:v,approval:$}},this.pair=async t=>(await this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{await this.isInitialized(),await this.isValidApprove(t);const{id:s,relayProtocol:o,namespaces:c,sessionProperties:l}=t,f=this.client.proposal.get(s);let{pairingTopic:g,proposer:p,requiredNamespaces:v,optionalNamespaces:b}=f;g=g||"";const D=await this.client.core.crypto.generateKeyPair(),O=p.publicKey,x=await this.client.core.crypto.generateSharedKey(D,O);g&&s&&(await this.client.core.pairing.updateMetadata({topic:g,metadata:p.metadata}),await this.sendResult({id:s,topic:g,result:{relay:{protocol:o??"irn"},responderPublicKey:D}}),await this.client.proposal.delete(s,Dt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:g}));const F=ur({relay:{protocol:o??"irn"},namespaces:c,pairingTopic:g,controller:{publicKey:D,metadata:this.client.metadata},expiry:Pr(Vo)},l&&{sessionProperties:l});await this.client.core.relayer.subscribe(x);const B=Ln(ur({},F),{topic:x,requiredNamespaces:v,optionalNamespaces:b,pairingTopic:g,acknowledged:!1,self:F.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:D});await this.client.session.set(x,B);try{await this.sendRequest({topic:x,method:"wc_sessionSettle",params:F,throwOnFailedPublish:!0})}catch(te){throw this.client.logger.error(te),this.client.session.delete(x,Dt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(x),te}return await this.setExpiry(x,Pr(Vo)),{topic:x,acknowledged:()=>new Promise(te=>setTimeout(()=>te(this.client.session.get(x)),500))}},this.reject=async t=>{await this.isInitialized(),await this.isValidReject(t);const{id:s,reason:o}=t,{pairingTopic:c}=this.client.proposal.get(s);c&&(await this.sendError(s,c,o),await this.client.proposal.delete(s,Dt("USER_DISCONNECTED")))},this.update=async t=>{await this.isInitialized(),await this.isValidUpdate(t);const{topic:s,namespaces:o}=t,c=await this.sendRequest({topic:s,method:"wc_sessionUpdate",params:{namespaces:o}}),{done:l,resolve:f,reject:g}=jn();return this.events.once(Ut("session_update",c),({error:p})=>{p?g(p):f()}),await this.client.session.update(s,{namespaces:o}),{acknowledged:l}},this.extend=async t=>{await this.isInitialized(),await this.isValidExtend(t);const{topic:s}=t,o=await this.sendRequest({topic:s,method:"wc_sessionExtend",params:{}}),{done:c,resolve:l,reject:f}=jn();return this.events.once(Ut("session_extend",o),({error:g})=>{g?f(g):l()}),await this.setExpiry(s,Pr(Vo)),{acknowledged:c}},this.request=async t=>{await this.isInitialized(),await this.isValidRequest(t);const{chainId:s,request:o,topic:c,expiry:l=bi.wc_sessionRequest.req.ttl}=t,f=ah(),{done:g,resolve:p,reject:v}=jn(l,"Request expired. Please try again.");return this.events.once(Ut("session_request",f),({error:b,result:D})=>{b?v(b):p(D)}),await Promise.all([new Promise(async b=>{await this.sendRequest({clientRpcId:f,topic:c,method:"wc_sessionRequest",params:{request:Ln(ur({},o),{expiryTimestamp:Pr(l)}),chainId:s},expiry:l,throwOnFailedPublish:!0}).catch(D=>v(D)),this.client.events.emit("session_request_sent",{topic:c,request:o,chainId:s,id:f}),b()}),new Promise(async b=>{const D=await AS(this.client.core.storage,Ld);TS({id:f,topic:c,wcDeepLink:D}),b()}),g()]).then(b=>b[2])},this.respond=async t=>{await this.isInitialized(),await this.isValidRespond(t);const{topic:s,response:o}=t,{id:c}=o;Di(o)?await this.sendResult({id:c,topic:s,result:o.result,throwOnFailedPublish:!0}):Jr(o)&&await this.sendError(c,s,o.error),this.cleanupAfterResponse(t)},this.ping=async t=>{await this.isInitialized(),await this.isValidPing(t);const{topic:s}=t;if(this.client.session.keys.includes(s)){const o=await this.sendRequest({topic:s,method:"wc_sessionPing",params:{}}),{done:c,resolve:l,reject:f}=jn();this.events.once(Ut("session_ping",o),({error:g})=>{g?f(g):l()}),await c()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async t=>{await this.isInitialized(),await this.isValidEmit(t);const{topic:s,event:o,chainId:c}=t;await this.sendRequest({topic:s,method:"wc_sessionEvent",params:{event:o,chainId:c}})},this.disconnect=async t=>{await this.isInitialized(),await this.isValidDisconnect(t);const{topic:s}=t;if(this.client.session.keys.includes(s))await this.sendRequest({topic:s,method:"wc_sessionDelete",params:Dt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:s,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(s))await this.client.core.pairing.disconnect({topic:s});else{const{message:o}=ce("MISMATCHED_TOPIC",`Session or pairing topic not found: ${s}`);throw new Error(o)}},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(s=>JS(s,t))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const s=this.client.core.pairing.pairings.get(t.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(c=>{var l,f;return((l=c.peerMetadata)==null?void 0:l.url)&&((f=c.peerMetadata)==null?void 0:f.url)===t.peer.metadata.url&&c.topic&&c.topic!==s.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(c=>this.client.core.pairing.disconnect({topic:c.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async t=>{const{topic:s,expirerHasDeleted:o=!1,emitEvent:c=!0,id:l=0}=t,{self:f}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Dt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(f.publicKey)&&await this.client.core.crypto.deleteKeyPair(f.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),o||this.client.core.expirer.del(s),this.client.core.storage.removeItem(Ld).catch(g=>this.client.logger.warn(g)),this.getPendingSessionRequests().forEach(g=>{g.topic===s&&this.deletePendingSessionRequest(g.id,Dt("USER_DISCONNECTED"))}),c&&this.client.events.emit("session_delete",{id:l,topic:s})},this.deleteProposal=async(t,s)=>{await Promise.all([this.client.proposal.delete(t,Dt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,s,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,s),o?Promise.resolve():this.client.core.expirer.del(t)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(c=>c.id!==t),o&&(this.sessionRequestQueue.state=Ei.idle,this.client.events.emit("session_request_expire",{id:t}))},this.setExpiry=async(t,s)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:s}),this.client.core.expirer.set(t,s)},this.setProposal=async(t,s)=>{await this.client.proposal.set(t,s),this.client.core.expirer.set(t,Pr(bi.wc_sessionPropose.req.ttl))},this.setPendingSessionRequest=async t=>{const{id:s,topic:o,params:c,verifyContext:l}=t,f=c.request.expiryTimestamp||Pr(bi.wc_sessionRequest.req.ttl);await this.client.pendingRequest.set(s,{id:s,topic:o,params:c,verifyContext:l}),f&&this.client.core.expirer.set(s,f)},this.sendRequest=async t=>{const{topic:s,method:o,params:c,expiry:l,relayRpcId:f,clientRpcId:g,throwOnFailedPublish:p}=t,v=Fn(o,c,g);if(Gn()&&rO.includes(o)){const O=qn(JSON.stringify(v));this.client.core.verify.register({attestationId:O})}const b=await this.client.core.crypto.encode(s,v),D=bi[o].req;return l&&(D.ttl=l),f&&(D.id=f),this.client.core.history.set(s,v),p?(D.internal=Ln(ur({},D.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,b,D)):this.client.core.relayer.publish(s,b,D).catch(O=>this.client.logger.error(O)),v.id},this.sendResult=async t=>{const{id:s,topic:o,result:c,throwOnFailedPublish:l}=t,f=da(s,c),g=await this.client.core.crypto.encode(o,f),p=await this.client.core.history.get(o,s),v=bi[p.request.method].res;l?(v.internal=Ln(ur({},v.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(o,g,v)):this.client.core.relayer.publish(o,g,v).catch(b=>this.client.logger.error(b)),await this.client.core.history.resolve(f)},this.sendError=async(t,s,o)=>{const c=pa(t,o),l=await this.client.core.crypto.encode(s,c),f=await this.client.core.history.get(s,t),g=bi[f.request.method].res;this.client.core.relayer.publish(s,l,g),await this.client.core.history.resolve(c)},this.cleanup=async()=>{const t=[],s=[];this.client.session.getAll().forEach(o=>{let c=!1;ji(o.expiry)&&(c=!0),this.client.core.crypto.keychain.has(o.topic)||(c=!0),c&&t.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{ji(o.expiryTimestamp)&&s.push(o.id)}),await Promise.all([...t.map(o=>this.deleteSession({topic:o})),...s.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===Ei.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Ei.active;const t=this.requestQueue.queue.shift();if(t)try{this.processRequest(t),await new Promise(s=>setTimeout(s,300))}catch(s){this.client.logger.warn(s)}}this.requestQueue.state=Ei.idle},this.processRequest=t=>{const{topic:s,payload:o}=t,c=o.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${c}`)}},this.onRelayEventResponse=async t=>{const{topic:s,payload:o}=t,c=(await this.client.core.history.get(s,o.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(s,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,o);case"wc_sessionExtend":return this.onSessionExtendResponse(s,o);case"wc_sessionPing":return this.onSessionPingResponse(s,o);case"wc_sessionRequest":return this.onSessionRequestResponse(s,o);default:return this.client.logger.info(`Unsupported response method ${c}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:s}=t,{message:o}=ce("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(o)},this.onSessionProposeRequest=async(t,s)=>{const{params:o,id:c}=s;try{this.isValidConnect(ur({},s.params));const l=o.expiryTimestamp||Pr(bi.wc_sessionPropose.req.ttl),f=ur({id:c,pairingTopic:t,expiryTimestamp:l},o);await this.setProposal(c,f);const g=qn(JSON.stringify(s)),p=await this.getVerifyContext(g,f.proposer.metadata);this.client.events.emit("session_proposal",{id:c,params:f,verifyContext:p})}catch(l){await this.sendError(c,t,l),this.client.logger.error(l)}},this.onSessionProposeResponse=async(t,s)=>{const{id:o}=s;if(Di(s)){const{result:c}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const l=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:l});const f=l.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:f});const g=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:g});const p=await this.client.core.crypto.generateSharedKey(f,g);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:p});const v=await this.client.core.relayer.subscribe(p);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:v}),await this.client.core.pairing.activate({topic:t})}else Jr(s)&&(await this.client.proposal.delete(o,Dt("USER_DISCONNECTED")),this.events.emit(Ut("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidSessionSettleRequest(c);const{relay:l,controller:f,expiry:g,namespaces:p,sessionProperties:v,pairingTopic:b}=s.params,D=ur({topic:t,relay:l,expiry:g,namespaces:p,acknowledged:!0,pairingTopic:b,requiredNamespaces:{},optionalNamespaces:{},controller:f.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:f.publicKey,metadata:f.metadata}},v&&{sessionProperties:v});await this.sendResult({id:s.id,topic:t,result:!0}),this.events.emit(Ut("session_connect"),{session:D}),this.cleanupDuplicatePairings(D)}catch(l){await this.sendError(o,t,l),this.client.logger.error(l)}},this.onSessionSettleResponse=async(t,s)=>{const{id:o}=s;Di(s)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(Ut("session_approve",o),{})):Jr(s)&&(await this.client.session.delete(t,Dt("USER_DISCONNECTED")),this.events.emit(Ut("session_approve",o),{error:s.error}))},this.onSessionUpdateRequest=async(t,s)=>{const{params:o,id:c}=s;try{const l=`${t}_session_update`,f=ko.get(l);if(f&&this.isRequestOutOfSync(f,c)){this.client.logger.info(`Discarding out of sync request - ${c}`);return}this.isValidUpdate(ur({topic:t},o)),await this.client.session.update(t,{namespaces:o.namespaces}),await this.sendResult({id:c,topic:t,result:!0}),this.client.events.emit("session_update",{id:c,topic:t,params:o}),ko.set(l,c)}catch(l){await this.sendError(c,t,l),this.client.logger.error(l)}},this.isRequestOutOfSync=(t,s)=>parseInt(s.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3)),this.onSessionUpdateResponse=(t,s)=>{const{id:o}=s;Di(s)?this.events.emit(Ut("session_update",o),{}):Jr(s)&&this.events.emit(Ut("session_update",o),{error:s.error})},this.onSessionExtendRequest=async(t,s)=>{const{id:o}=s;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Pr(Vo)),await this.sendResult({id:o,topic:t,result:!0}),this.client.events.emit("session_extend",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionExtendResponse=(t,s)=>{const{id:o}=s;Di(s)?this.events.emit(Ut("session_extend",o),{}):Jr(s)&&this.events.emit(Ut("session_extend",o),{error:s.error})},this.onSessionPingRequest=async(t,s)=>{const{id:o}=s;try{this.isValidPing({topic:t}),await this.sendResult({id:o,topic:t,result:!0}),this.client.events.emit("session_ping",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionPingResponse=(t,s)=>{const{id:o}=s;setTimeout(()=>{Di(s)?this.events.emit(Ut("session_ping",o),{}):Jr(s)&&this.events.emit(Ut("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=async(t,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:t,reason:s.params}),await Promise.all([new Promise(c=>{this.client.core.relayer.once(tr.publish,async()=>{c(await this.deleteSession({topic:t,id:o}))})}),this.sendResult({id:o,topic:t,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:Dt("USER_DISCONNECTED")})])}catch(c){this.client.logger.error(c)}},this.onSessionRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidRequest(ur({topic:t},c));const l=qn(JSON.stringify(Fn("wc_sessionRequest",c,o))),f=this.client.session.get(t),g=await this.getVerifyContext(l,f.peer.metadata),p={id:o,topic:t,params:c,verifyContext:g};await this.setPendingSessionRequest(p),this.addSessionRequestToSessionRequestQueue(p),this.processSessionRequestQueue()}catch(l){await this.sendError(o,t,l),this.client.logger.error(l)}},this.onSessionRequestResponse=(t,s)=>{const{id:o}=s;Di(s)?this.events.emit(Ut("session_request",o),{result:s.result}):Jr(s)&&this.events.emit(Ut("session_request",o),{error:s.error})},this.onSessionEventRequest=async(t,s)=>{const{id:o,params:c}=s;try{const l=`${t}_session_event_${c.event.name}`,f=ko.get(l);if(f&&this.isRequestOutOfSync(f,o)){this.client.logger.info(`Discarding out of sync request - ${o}`);return}this.isValidEmit(ur({topic:t},c)),this.client.events.emit("session_event",{id:o,topic:t,params:c}),ko.set(l,o)}catch(l){await this.sendError(o,t,l),this.client.logger.error(l)}},this.addSessionRequestToSessionRequestQueue=t=>{this.sessionRequestQueue.queue.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Ei.idle,this.processSessionRequestQueue()},ve.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:t,error:s})=>{const o=this.client.core.history.pending;o.length>0&&o.filter(c=>c.topic===t&&c.request.method==="wc_sessionRequest").forEach(c=>{this.events.emit(Ut("session_request",c.request.id),{error:s})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===Ei.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Ei.active,this.client.events.emit("session_request",t)}catch(s){this.client.logger.error(s)}},this.onPairingCreated=t=>{if(t.active)return;const s=this.client.proposal.getAll().find(o=>o.pairingTopic===t.topic);s&&this.onSessionProposeRequest(t.topic,Fn("wc_sessionPropose",{requiredNamespaces:s.requiredNamespaces,optionalNamespaces:s.optionalNamespaces,relays:s.relays,proposer:s.proposer,sessionProperties:s.sessionProperties},s.id))},this.isValidConnect=async t=>{if(!wr(t)){const{message:g}=ce("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(g)}const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:c,sessionProperties:l,relays:f}=t;if(hr(s)||await this.isValidPairingTopic(s),!a2(f,!0)){const{message:g}=ce("MISSING_OR_INVALID",`connect() relays: ${f}`);throw new Error(g)}!hr(o)&&Ts(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!hr(c)&&Ts(c)!==0&&this.validateNamespaces(c,"optionalNamespaces"),hr(l)||this.validateSessionProps(l,"sessionProperties")},this.validateNamespaces=(t,s)=>{const o=o2(t,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=async t=>{if(!wr(t))throw new Error(ce("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:s,namespaces:o,relayProtocol:c,sessionProperties:l}=t;await this.isValidProposalId(s);const f=this.client.proposal.get(s),g=eu(o,"approve()");if(g)throw new Error(g.message);const p=ad(f.requiredNamespaces,o,"approve()");if(p)throw new Error(p.message);if(!Wt(c,!0)){const{message:v}=ce("MISSING_OR_INVALID",`approve() relayProtocol: ${c}`);throw new Error(v)}hr(l)||this.validateSessionProps(l,"sessionProperties")},this.isValidReject=async t=>{if(!wr(t)){const{message:c}=ce("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(c)}const{id:s,reason:o}=t;if(await this.isValidProposalId(s),!u2(o)){const{message:c}=ce("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(c)}},this.isValidSessionSettleRequest=t=>{if(!wr(t)){const{message:p}=ce("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(p)}const{relay:s,controller:o,namespaces:c,expiry:l}=t;if(!Hp(s)){const{message:p}=ce("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(p)}const f=e2(o,"onSessionSettleRequest()");if(f)throw new Error(f.message);const g=eu(c,"onSessionSettleRequest()");if(g)throw new Error(g.message);if(ji(l)){const{message:p}=ce("EXPIRED","onSessionSettleRequest()");throw new Error(p)}},this.isValidUpdate=async t=>{if(!wr(t)){const{message:g}=ce("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(g)}const{topic:s,namespaces:o}=t;await this.isValidSessionTopic(s);const c=this.client.session.get(s),l=eu(o,"update()");if(l)throw new Error(l.message);const f=ad(c.requiredNamespaces,o,"update()");if(f)throw new Error(f.message)},this.isValidExtend=async t=>{if(!wr(t)){const{message:o}=ce("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionTopic(s)},this.isValidRequest=async t=>{if(!wr(t)){const{message:g}=ce("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(g)}const{topic:s,request:o,chainId:c,expiry:l}=t;await this.isValidSessionTopic(s);const{namespaces:f}=this.client.session.get(s);if(!od(f,c)){const{message:g}=ce("MISSING_OR_INVALID",`request() chainId: ${c}`);throw new Error(g)}if(!h2(o)){const{message:g}=ce("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(g)}if(!d2(f,c,o.method)){const{message:g}=ce("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(g)}if(l&&!v2(l,ou)){const{message:g}=ce("MISSING_OR_INVALID",`request() expiry: ${l}. Expiry must be a number (in seconds) between ${ou.min} and ${ou.max}`);throw new Error(g)}},this.isValidRespond=async t=>{var s;if(!wr(t)){const{message:l}=ce("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(l)}const{topic:o,response:c}=t;try{await this.isValidSessionTopic(o)}catch(l){throw(s=t==null?void 0:t.response)!=null&&s.id&&this.cleanupAfterResponse(t),l}if(!l2(c)){const{message:l}=ce("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(c)}`);throw new Error(l)}},this.isValidPing=async t=>{if(!wr(t)){const{message:o}=ce("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async t=>{if(!wr(t)){const{message:f}=ce("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(f)}const{topic:s,event:o,chainId:c}=t;await this.isValidSessionTopic(s);const{namespaces:l}=this.client.session.get(s);if(!od(l,c)){const{message:f}=ce("MISSING_OR_INVALID",`emit() chainId: ${c}`);throw new Error(f)}if(!f2(o)){const{message:f}=ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(f)}if(!p2(l,c,o.name)){const{message:f}=ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(f)}},this.isValidDisconnect=async t=>{if(!wr(t)){const{message:o}=ce("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(t,s)=>{const o={verified:{verifyUrl:s.verifyUrl||Mn,validation:"UNKNOWN",origin:s.url||""}};try{const c=await this.client.core.verify.resolve({attestationId:t,verifyUrl:s.verifyUrl});c&&(o.verified.origin=c.origin,o.verified.isScam=c.isScam,o.verified.validation=c.origin===new URL(s.url).origin?"VALID":"INVALID")}catch(c){this.client.logger.info(c)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(t,s)=>{Object.values(t).forEach(o=>{if(!Wt(o,!1)){const{message:c}=ce("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(c)}})}}async isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(tr.message,async e=>{const{topic:t,message:s}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const o=await this.client.core.crypto.decode(t,s);try{ch(o)?(this.client.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):ga(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.client.core.history.delete(t,o.id)):this.onRelayEventUnknownPayload({topic:t,payload:o})}catch(c){this.client.logger.error(c)}})}registerExpirerEvents(){this.client.core.expirer.on(Fr.expired,async e=>{const{topic:t,id:s}=zp(e.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,ce("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}registerPairingEvents(){this.client.core.pairing.events.on(Es.create,e=>this.onPairingCreated(e))}isValidPairingTopic(e){if(!Wt(e,!1)){const{message:t}=ce("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(ji(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=ce("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Wt(e,!1)){const{message:t}=ce("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=ce("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(ji(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=ce("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=ce("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Wt(e,!1)){const{message:t}=ce("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=ce("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!c2(e)){const{message:t}=ce("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=ce("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(ji(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=ce("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class uO extends va{constructor(e,t){super(e,t,X5,lh),this.core=e,this.logger=t}}let hO=class extends va{constructor(e,t){super(e,t,Z5,lh),this.core=e,this.logger=t}};class lO extends va{constructor(e,t){super(e,t,tO,lh,s=>s.id),this.core=e,this.logger=t}}let fO=class yg extends d3{constructor(e){super(e),this.protocol=fg,this.version=dg,this.name=su.name,this.events=new zr.EventEmitter,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(o){throw this.logger.error(o.message),o}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(o){throw this.logger.error(o.message),o}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(o){throw this.logger.error(o.message),o}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(o){throw this.logger.error(o.message),o}},this.update=async s=>{try{return await this.engine.update(s)}catch(o){throw this.logger.error(o.message),o}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(o){throw this.logger.error(o.message),o}},this.request=async s=>{try{return await this.engine.request(s)}catch(o){throw this.logger.error(o.message),o}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(o){throw this.logger.error(o.message),o}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(o){throw this.logger.error(o.message),o}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(o){throw this.logger.error(o.message),o}},this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=(e==null?void 0:e.name)||su.name,this.metadata=(e==null?void 0:e.metadata)||DS();const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ye.pino(Ye.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||su.logger}));this.core=(e==null?void 0:e.core)||new Q5(e),this.logger=Ye.generateChildLogger(t,this.name),this.session=new hO(this.core,this.logger),this.proposal=new uO(this.core,this.logger),this.pendingRequest=new lO(this.core,this.logger),this.engine=new cO(this)}static async init(e){const t=new yg(e);return await t.initialize(),t}get context(){return Ye.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var qu={exports:{}};(function(i,e){var t=typeof self<"u"?self:Yr,s=function(){function c(){this.fetch=!1,this.DOMException=t.DOMException}return c.prototype=t,new c}();(function(c){(function(l){var f={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function g(E){return E&&DataView.prototype.isPrototypeOf(E)}if(f.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],v=ArrayBuffer.isView||function(E){return E&&p.indexOf(Object.prototype.toString.call(E))>-1};function b(E){if(typeof E!="string"&&(E=String(E)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(E))throw new TypeError("Invalid character in header field name");return E.toLowerCase()}function D(E){return typeof E!="string"&&(E=String(E)),E}function O(E){var T={next:function(){var ee=E.shift();return{done:ee===void 0,value:ee}}};return f.iterable&&(T[Symbol.iterator]=function(){return T}),T}function x(E){this.map={},E instanceof x?E.forEach(function(T,ee){this.append(ee,T)},this):Array.isArray(E)?E.forEach(function(T){this.append(T[0],T[1])},this):E&&Object.getOwnPropertyNames(E).forEach(function(T){this.append(T,E[T])},this)}x.prototype.append=function(E,T){E=b(E),T=D(T);var ee=this.map[E];this.map[E]=ee?ee+", "+T:T},x.prototype.delete=function(E){delete this.map[b(E)]},x.prototype.get=function(E){return E=b(E),this.has(E)?this.map[E]:null},x.prototype.has=function(E){return this.map.hasOwnProperty(b(E))},x.prototype.set=function(E,T){this.map[b(E)]=D(T)},x.prototype.forEach=function(E,T){for(var ee in this.map)this.map.hasOwnProperty(ee)&&E.call(T,this.map[ee],ee,this)},x.prototype.keys=function(){var E=[];return this.forEach(function(T,ee){E.push(ee)}),O(E)},x.prototype.values=function(){var E=[];return this.forEach(function(T){E.push(T)}),O(E)},x.prototype.entries=function(){var E=[];return this.forEach(function(T,ee){E.push([ee,T])}),O(E)},f.iterable&&(x.prototype[Symbol.iterator]=x.prototype.entries);function F(E){if(E.bodyUsed)return Promise.reject(new TypeError("Already read"));E.bodyUsed=!0}function B(E){return new Promise(function(T,ee){E.onload=function(){T(E.result)},E.onerror=function(){ee(E.error)}})}function te(E){var T=new FileReader,ee=B(T);return T.readAsArrayBuffer(E),ee}function $(E){var T=new FileReader,ee=B(T);return T.readAsText(E),ee}function L(E){for(var T=new Uint8Array(E),ee=new Array(T.length),Q=0;Q<T.length;Q++)ee[Q]=String.fromCharCode(T[Q]);return ee.join("")}function C(E){if(E.slice)return E.slice(0);var T=new Uint8Array(E.byteLength);return T.set(new Uint8Array(E)),T.buffer}function A(){return this.bodyUsed=!1,this._initBody=function(E){this._bodyInit=E,E?typeof E=="string"?this._bodyText=E:f.blob&&Blob.prototype.isPrototypeOf(E)?this._bodyBlob=E:f.formData&&FormData.prototype.isPrototypeOf(E)?this._bodyFormData=E:f.searchParams&&URLSearchParams.prototype.isPrototypeOf(E)?this._bodyText=E.toString():f.arrayBuffer&&f.blob&&g(E)?(this._bodyArrayBuffer=C(E.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(E)||v(E))?this._bodyArrayBuffer=C(E):this._bodyText=E=Object.prototype.toString.call(E):this._bodyText="",this.headers.get("content-type")||(typeof E=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(E)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var E=F(this);if(E)return E;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?F(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(te)}),this.text=function(){var E=F(this);if(E)return E;if(this._bodyBlob)return $(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(L(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(G)}),this.json=function(){return this.text().then(JSON.parse)},this}var S=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function u(E){var T=E.toUpperCase();return S.indexOf(T)>-1?T:E}function w(E,T){T=T||{};var ee=T.body;if(E instanceof w){if(E.bodyUsed)throw new TypeError("Already read");this.url=E.url,this.credentials=E.credentials,T.headers||(this.headers=new x(E.headers)),this.method=E.method,this.mode=E.mode,this.signal=E.signal,!ee&&E._bodyInit!=null&&(ee=E._bodyInit,E.bodyUsed=!0)}else this.url=String(E);if(this.credentials=T.credentials||this.credentials||"same-origin",(T.headers||!this.headers)&&(this.headers=new x(T.headers)),this.method=u(T.method||this.method||"GET"),this.mode=T.mode||this.mode||null,this.signal=T.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ee)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ee)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})};function G(E){var T=new FormData;return E.trim().split("&").forEach(function(ee){if(ee){var Q=ee.split("="),k=Q.shift().replace(/\+/g," "),V=Q.join("=").replace(/\+/g," ");T.append(decodeURIComponent(k),decodeURIComponent(V))}}),T}function W(E){var T=new x,ee=E.replace(/\r?\n[\t ]+/g," ");return ee.split(/\r?\n/).forEach(function(Q){var k=Q.split(":"),V=k.shift().trim();if(V){var Y=k.join(":").trim();T.append(V,Y)}}),T}A.call(w.prototype);function se(E,T){T||(T={}),this.type="default",this.status=T.status===void 0?200:T.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in T?T.statusText:"OK",this.headers=new x(T.headers),this.url=T.url||"",this._initBody(E)}A.call(se.prototype),se.prototype.clone=function(){return new se(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new x(this.headers),url:this.url})},se.error=function(){var E=new se(null,{status:0,statusText:""});return E.type="error",E};var ue=[301,302,303,307,308];se.redirect=function(E,T){if(ue.indexOf(T)===-1)throw new RangeError("Invalid status code");return new se(null,{status:T,headers:{location:E}})},l.DOMException=c.DOMException;try{new l.DOMException}catch{l.DOMException=function(T,ee){this.message=T,this.name=ee;var Q=Error(T);this.stack=Q.stack},l.DOMException.prototype=Object.create(Error.prototype),l.DOMException.prototype.constructor=l.DOMException}function de(E,T){return new Promise(function(ee,Q){var k=new w(E,T);if(k.signal&&k.signal.aborted)return Q(new l.DOMException("Aborted","AbortError"));var V=new XMLHttpRequest;function Y(){V.abort()}V.onload=function(){var ie={status:V.status,statusText:V.statusText,headers:W(V.getAllResponseHeaders()||"")};ie.url="responseURL"in V?V.responseURL:ie.headers.get("X-Request-URL");var we="response"in V?V.response:V.responseText;ee(new se(we,ie))},V.onerror=function(){Q(new TypeError("Network request failed"))},V.ontimeout=function(){Q(new TypeError("Network request failed"))},V.onabort=function(){Q(new l.DOMException("Aborted","AbortError"))},V.open(k.method,k.url,!0),k.credentials==="include"?V.withCredentials=!0:k.credentials==="omit"&&(V.withCredentials=!1),"responseType"in V&&f.blob&&(V.responseType="blob"),k.headers.forEach(function(ie,we){V.setRequestHeader(we,ie)}),k.signal&&(k.signal.addEventListener("abort",Y),V.onreadystatechange=function(){V.readyState===4&&k.signal.removeEventListener("abort",Y)}),V.send(typeof k._bodyInit>"u"?null:k._bodyInit)})}return de.polyfill=!0,c.fetch||(c.fetch=de,c.Headers=x,c.Request=w,c.Response=se),l.Headers=x,l.Request=w,l.Response=se,l.fetch=de,Object.defineProperty(l,"__esModule",{value:!0}),l})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var o=s;e=o.fetch,e.default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,i.exports=e})(qu,qu.exports);var dO=qu.exports;const qd=Ku(dO),pO=i=>JSON.stringify(i,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),gO=i=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=i.replace(e,'$1"$2n"$3');return JSON.parse(t,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function yO(i){if(typeof i!="string")throw new Error(`Cannot safe json parse value of type ${typeof i}`);try{return gO(i)}catch{return i}}function Fd(i){return typeof i=="string"?i:pO(i)||""}const vO={Accept:"application/json","Content-Type":"application/json"},_O="POST",zd={headers:vO,method:_O},Bd=10;class zi{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new zr.EventEmitter,this.isAvailable=!1,this.registering=!1,!dd(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,t){this.isAvailable||await this.register();try{const s=Fd(e),c=await(await qd(this.url,Object.assign(Object.assign({},zd),{body:s}))).json();this.onPayload({data:c})}catch(s){this.onError(e.id,s)}}async register(e=this.url){if(!dd(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));s()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=Fd({id:1,jsonrpc:"2.0",method:"test",params:[]});await qd(e,Object.assign(Object.assign({},zd),{body:t}))}this.onOpen()}catch(t){const s=this.parseError(t);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?yO(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),c=pa(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return Vp(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Bd&&this.events.setMaxListeners(Bd)}}const Hd="error",mO="wss://relay.walletconnect.com",wO="wc",bO="universal_provider",Kd=`${wO}@2:${bO}:`,EO="https://rpc.walletconnect.com/v1/",Ii={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var ws=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fu={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(i,e){(function(){var t,s="4.17.21",o=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",f="Invalid `variable` option passed into `_.template`",g="__lodash_hash_undefined__",p=500,v="__lodash_placeholder__",b=1,D=2,O=4,x=1,F=2,B=1,te=2,$=4,L=8,C=16,A=32,S=64,u=128,w=256,G=512,W=30,se="...",ue=800,de=16,E=1,T=2,ee=3,Q=1/0,k=9007199254740991,V=17976931348623157e292,Y=NaN,ie=4294967295,we=ie-1,oe=ie>>>1,be=[["ary",u],["bind",B],["bindKey",te],["curry",L],["curryRight",C],["flip",G],["partial",A],["partialRight",S],["rearg",w]],le="[object Arguments]",_e="[object Array]",H="[object AsyncFunction]",z="[object Boolean]",U="[object Date]",d="[object DOMException]",R="[object Error]",ae="[object Function]",fe="[object GeneratorFunction]",Ie="[object Map]",Be="[object Number]",ke="[object Null]",je="[object Object]",gt="[object Promise]",yt="[object Proxy]",qe="[object RegExp]",Oe="[object Set]",Ne="[object String]",$e="[object Symbol]",Fe="[object Undefined]",Pe="[object WeakMap]",Ue="[object WeakSet]",Se="[object ArrayBuffer]",Ce="[object DataView]",He="[object Float32Array]",xe="[object Float64Array]",Ve="[object Int8Array]",We="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Qe="[object Uint8ClampedArray]",rr="[object Uint16Array]",dr="[object Uint32Array]",Qr=/\b__p \+= '';/g,ir=/\b(__p \+=) '' \+/g,oi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Oi=/&(?:amp|lt|gt|quot|#39);/g,Bi=/[&<>"']/g,St=RegExp(Oi.source),vt=RegExp(Bi.source),It=/<%-([\s\S]+?)%>/g,Ot=/<%([\s\S]+?)%>/g,bt=/<%=([\s\S]+?)%>/g,_t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Lt=/^\w*$/,jt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xt=/[\\^$.*+?()[\]{}|]/g,Mt=RegExp(xt.source),Pt=/^\s+/,At=/\s/,Ct=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ht=/\{\n\/\* \[wrapped with (.+)\] \*/,qt=/,? & /,Ft=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,_a=/[()=,{}\[\]\/\s]/,ma=/\\(\\)?/g,wa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ar=/\w*$/,ba=/^[-+]0x[0-9a-f]+$/i,Ea=/^0b[01]+$/i,Da=/^\[object .+?Constructor\]$/,Sa=/^0o[0-7]+$/i,Ia=/^(?:0|[1-9]\d*)$/,ai=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,gn=/($^)/,Oa=/['\n\r\u2028\u2029\\]/g,yn="\\ud800-\\udfff",xa="\\u0300-\\u036f",Pa="\\ufe20-\\ufe2f",vn="\\u20d0-\\u20ff",Ms=xa+Pa+vn,qs="\\u2700-\\u27bf",Br="a-z\\xdf-\\xf6\\xf8-\\xff",Ca="\\xac\\xb1\\xd7\\xf7",Ta="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Aa="\\u2000-\\u206f",Ra=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Fs="A-Z\\xc0-\\xd6\\xd8-\\xde",zs="\\ufe0e\\ufe0f",Hi=Ca+Ta+Aa+Ra,Jn="['’]",Ki="["+yn+"]",Yn="["+Hi+"]",ki="["+Ms+"]",Bs="\\d+",Na="["+qs+"]",Hs="["+Br+"]",Ks="[^"+yn+Hi+Bs+qs+Br+Fs+"]",_n="\\ud83c[\\udffb-\\udfff]",$a="(?:"+ki+"|"+_n+")",ks="[^"+yn+"]",mn="(?:\\ud83c[\\udde6-\\uddff]){2}",xi="[\\ud800-\\udbff][\\udc00-\\udfff]",Er="["+Fs+"]",Vs="\\u200d",Gs="(?:"+Hs+"|"+Ks+")",Xr="(?:"+Er+"|"+Ks+")",Ws="(?:"+Jn+"(?:d|ll|m|re|s|t|ve))?",Js="(?:"+Jn+"(?:D|LL|M|RE|S|T|VE))?",Ys=$a+"?",Qs="["+zs+"]?",Ua="(?:"+Vs+"(?:"+[ks,mn,xi].join("|")+")"+Qs+Ys+")*",ci="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Xs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Zs=Qs+Ys+Ua,wn="(?:"+[Na,mn,xi].join("|")+")"+Zs,La="(?:"+[ks+ki+"?",ki,mn,xi,Ki].join("|")+")",Qn=RegExp(Jn,"g"),ja=RegExp(ki,"g"),bn=RegExp(_n+"(?="+_n+")|"+La+Zs,"g"),eo=RegExp([Er+"?"+Hs+"+"+Ws+"(?="+[Yn,Er,"$"].join("|")+")",Xr+"+"+Js+"(?="+[Yn,Er+Gs,"$"].join("|")+")",Er+"?"+Gs+"+"+Ws,Er+"+"+Js,Xs,ci,Bs,wn].join("|"),"g"),to=RegExp("["+Vs+yn+Ms+zs+"]"),Vi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ro=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ma=-1,ot={};ot[He]=ot[xe]=ot[Ve]=ot[We]=ot[et]=ot[tt]=ot[Qe]=ot[rr]=ot[dr]=!0,ot[le]=ot[_e]=ot[Se]=ot[z]=ot[Ce]=ot[U]=ot[R]=ot[ae]=ot[Ie]=ot[Be]=ot[je]=ot[qe]=ot[Oe]=ot[Ne]=ot[Pe]=!1;var st={};st[le]=st[_e]=st[Se]=st[Ce]=st[z]=st[U]=st[He]=st[xe]=st[Ve]=st[We]=st[et]=st[Ie]=st[Be]=st[je]=st[qe]=st[Oe]=st[Ne]=st[$e]=st[tt]=st[Qe]=st[rr]=st[dr]=!0,st[R]=st[ae]=st[Pe]=!1;var I={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},re={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},at=parseFloat,Ae=parseInt,dt=typeof ws=="object"&&ws&&ws.Object===Object&&ws,zt=typeof self=="object"&&self&&self.Object===Object&&self,Xe=dt||zt||Function("return this")(),ct=e&&!e.nodeType&&e,Rt=ct&&!0&&i&&!i.nodeType&&i,pr=Rt&&Rt.exports===ct,Bt=pr&&dt.process,pt=function(){try{var M=Rt&&Rt.require&&Rt.require("util").types;return M||Bt&&Bt.binding&&Bt.binding("util")}catch{}}(),nr=pt&&pt.isArrayBuffer,Hr=pt&&pt.isDate,Rr=pt&&pt.isMap,Zr=pt&&pt.isRegExp,Xn=pt&&pt.isSet,Gi=pt&&pt.isTypedArray;function kt(M,J,K){switch(K.length){case 0:return M.call(J);case 1:return M.call(J,K[0]);case 2:return M.call(J,K[0],K[1]);case 3:return M.call(J,K[0],K[1],K[2])}return M.apply(J,K)}function mg(M,J,K,ge){for(var Te=-1,rt=M==null?0:M.length;++Te<rt;){var Ht=M[Te];J(ge,Ht,K(Ht),M)}return ge}function Nr(M,J){for(var K=-1,ge=M==null?0:M.length;++K<ge&&J(M[K],K,M)!==!1;);return M}function wg(M,J){for(var K=M==null?0:M.length;K--&&J(M[K],K,M)!==!1;);return M}function ph(M,J){for(var K=-1,ge=M==null?0:M.length;++K<ge;)if(!J(M[K],K,M))return!1;return!0}function Pi(M,J){for(var K=-1,ge=M==null?0:M.length,Te=0,rt=[];++K<ge;){var Ht=M[K];J(Ht,K,M)&&(rt[Te++]=Ht)}return rt}function io(M,J){var K=M==null?0:M.length;return!!K&&En(M,J,0)>-1}function qa(M,J,K){for(var ge=-1,Te=M==null?0:M.length;++ge<Te;)if(K(J,M[ge]))return!0;return!1}function mt(M,J){for(var K=-1,ge=M==null?0:M.length,Te=Array(ge);++K<ge;)Te[K]=J(M[K],K,M);return Te}function Ci(M,J){for(var K=-1,ge=J.length,Te=M.length;++K<ge;)M[Te+K]=J[K];return M}function Fa(M,J,K,ge){var Te=-1,rt=M==null?0:M.length;for(ge&&rt&&(K=M[++Te]);++Te<rt;)K=J(K,M[Te],Te,M);return K}function bg(M,J,K,ge){var Te=M==null?0:M.length;for(ge&&Te&&(K=M[--Te]);Te--;)K=J(K,M[Te],Te,M);return K}function za(M,J){for(var K=-1,ge=M==null?0:M.length;++K<ge;)if(J(M[K],K,M))return!0;return!1}var Eg=Ba("length");function Dg(M){return M.split("")}function Sg(M){return M.match(Ft)||[]}function gh(M,J,K){var ge;return K(M,function(Te,rt,Ht){if(J(Te,rt,Ht))return ge=rt,!1}),ge}function no(M,J,K,ge){for(var Te=M.length,rt=K+(ge?1:-1);ge?rt--:++rt<Te;)if(J(M[rt],rt,M))return rt;return-1}function En(M,J,K){return J===J?Lg(M,J,K):no(M,yh,K)}function Ig(M,J,K,ge){for(var Te=K-1,rt=M.length;++Te<rt;)if(ge(M[Te],J))return Te;return-1}function yh(M){return M!==M}function vh(M,J){var K=M==null?0:M.length;return K?Ka(M,J)/K:Y}function Ba(M){return function(J){return J==null?t:J[M]}}function Ha(M){return function(J){return M==null?t:M[J]}}function _h(M,J,K,ge,Te){return Te(M,function(rt,Ht,ut){K=ge?(ge=!1,rt):J(K,rt,Ht,ut)}),K}function Og(M,J){var K=M.length;for(M.sort(J);K--;)M[K]=M[K].value;return M}function Ka(M,J){for(var K,ge=-1,Te=M.length;++ge<Te;){var rt=J(M[ge]);rt!==t&&(K=K===t?rt:K+rt)}return K}function ka(M,J){for(var K=-1,ge=Array(M);++K<M;)ge[K]=J(K);return ge}function xg(M,J){return mt(J,function(K){return[K,M[K]]})}function mh(M){return M&&M.slice(0,Dh(M)+1).replace(Pt,"")}function Dr(M){return function(J){return M(J)}}function Va(M,J){return mt(J,function(K){return M[K]})}function Zn(M,J){return M.has(J)}function wh(M,J){for(var K=-1,ge=M.length;++K<ge&&En(J,M[K],0)>-1;);return K}function bh(M,J){for(var K=M.length;K--&&En(J,M[K],0)>-1;);return K}function Pg(M,J){for(var K=M.length,ge=0;K--;)M[K]===J&&++ge;return ge}var Cg=Ha(I),Tg=Ha(j);function Ag(M){return"\\"+pe[M]}function Rg(M,J){return M==null?t:M[J]}function Dn(M){return to.test(M)}function Ng(M){return Vi.test(M)}function $g(M){for(var J,K=[];!(J=M.next()).done;)K.push(J.value);return K}function Ga(M){var J=-1,K=Array(M.size);return M.forEach(function(ge,Te){K[++J]=[Te,ge]}),K}function Eh(M,J){return function(K){return M(J(K))}}function Ti(M,J){for(var K=-1,ge=M.length,Te=0,rt=[];++K<ge;){var Ht=M[K];(Ht===J||Ht===v)&&(M[K]=v,rt[Te++]=K)}return rt}function so(M){var J=-1,K=Array(M.size);return M.forEach(function(ge){K[++J]=ge}),K}function Ug(M){var J=-1,K=Array(M.size);return M.forEach(function(ge){K[++J]=[ge,ge]}),K}function Lg(M,J,K){for(var ge=K-1,Te=M.length;++ge<Te;)if(M[ge]===J)return ge;return-1}function jg(M,J,K){for(var ge=K+1;ge--;)if(M[ge]===J)return ge;return ge}function Sn(M){return Dn(M)?qg(M):Eg(M)}function Kr(M){return Dn(M)?Fg(M):Dg(M)}function Dh(M){for(var J=M.length;J--&&At.test(M.charAt(J)););return J}var Mg=Ha(re);function qg(M){for(var J=bn.lastIndex=0;bn.test(M);)++J;return J}function Fg(M){return M.match(bn)||[]}function zg(M){return M.match(eo)||[]}var Bg=function M(J){J=J==null?Xe:In.defaults(Xe.Object(),J,In.pick(Xe,ro));var K=J.Array,ge=J.Date,Te=J.Error,rt=J.Function,Ht=J.Math,ut=J.Object,Wa=J.RegExp,Hg=J.String,$r=J.TypeError,oo=K.prototype,Kg=rt.prototype,On=ut.prototype,ao=J["__core-js_shared__"],co=Kg.toString,nt=On.hasOwnProperty,kg=0,Sh=function(){var r=/[^.]+$/.exec(ao&&ao.keys&&ao.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),uo=On.toString,Vg=co.call(ut),Gg=Xe._,Wg=Wa("^"+co.call(nt).replace(xt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ho=pr?J.Buffer:t,Ai=J.Symbol,lo=J.Uint8Array,Ih=ho?ho.allocUnsafe:t,fo=Eh(ut.getPrototypeOf,ut),Oh=ut.create,xh=On.propertyIsEnumerable,po=oo.splice,Ph=Ai?Ai.isConcatSpreadable:t,es=Ai?Ai.iterator:t,Wi=Ai?Ai.toStringTag:t,go=function(){try{var r=Zi(ut,"defineProperty");return r({},"",{}),r}catch{}}(),Jg=J.clearTimeout!==Xe.clearTimeout&&J.clearTimeout,Yg=ge&&ge.now!==Xe.Date.now&&ge.now,Qg=J.setTimeout!==Xe.setTimeout&&J.setTimeout,yo=Ht.ceil,vo=Ht.floor,Ja=ut.getOwnPropertySymbols,Xg=ho?ho.isBuffer:t,Ch=J.isFinite,Zg=oo.join,e0=Eh(ut.keys,ut),Kt=Ht.max,Xt=Ht.min,t0=ge.now,r0=J.parseInt,Th=Ht.random,i0=oo.reverse,Ya=Zi(J,"DataView"),ts=Zi(J,"Map"),Qa=Zi(J,"Promise"),xn=Zi(J,"Set"),rs=Zi(J,"WeakMap"),is=Zi(ut,"create"),_o=rs&&new rs,Pn={},n0=en(Ya),s0=en(ts),o0=en(Qa),a0=en(xn),c0=en(rs),mo=Ai?Ai.prototype:t,ns=mo?mo.valueOf:t,Ah=mo?mo.toString:t;function _(r){if(Tt(r)&&!Re(r)&&!(r instanceof Je)){if(r instanceof Ur)return r;if(nt.call(r,"__wrapped__"))return Rl(r)}return new Ur(r)}var Cn=function(){function r(){}return function(n){if(!Et(n))return{};if(Oh)return Oh(n);r.prototype=n;var a=new r;return r.prototype=t,a}}();function wo(){}function Ur(r,n){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=t}_.templateSettings={escape:It,evaluate:Ot,interpolate:bt,variable:"",imports:{_}},_.prototype=wo.prototype,_.prototype.constructor=_,Ur.prototype=Cn(wo.prototype),Ur.prototype.constructor=Ur;function Je(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ie,this.__views__=[]}function u0(){var r=new Je(this.__wrapped__);return r.__actions__=gr(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=gr(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=gr(this.__views__),r}function h0(){if(this.__filtered__){var r=new Je(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function l0(){var r=this.__wrapped__.value(),n=this.__dir__,a=Re(r),h=n<0,y=a?r.length:0,m=Dy(0,y,this.__views__),P=m.start,N=m.end,q=N-P,X=h?N:P-1,Z=this.__iteratees__,ne=Z.length,he=0,ye=Xt(q,this.__takeCount__);if(!a||!h&&y==q&&ye==q)return tl(r,this.__actions__);var Ee=[];e:for(;q--&&he<ye;){X+=n;for(var ze=-1,De=r[X];++ze<ne;){var Ge=Z[ze],Ze=Ge.iteratee,Or=Ge.type,ar=Ze(De);if(Or==T)De=ar;else if(!ar){if(Or==E)continue e;break e}}Ee[he++]=De}return Ee}Je.prototype=Cn(wo.prototype),Je.prototype.constructor=Je;function Ji(r){var n=-1,a=r==null?0:r.length;for(this.clear();++n<a;){var h=r[n];this.set(h[0],h[1])}}function f0(){this.__data__=is?is(null):{},this.size=0}function d0(r){var n=this.has(r)&&delete this.__data__[r];return this.size-=n?1:0,n}function p0(r){var n=this.__data__;if(is){var a=n[r];return a===g?t:a}return nt.call(n,r)?n[r]:t}function g0(r){var n=this.__data__;return is?n[r]!==t:nt.call(n,r)}function y0(r,n){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=is&&n===t?g:n,this}Ji.prototype.clear=f0,Ji.prototype.delete=d0,Ji.prototype.get=p0,Ji.prototype.has=g0,Ji.prototype.set=y0;function ui(r){var n=-1,a=r==null?0:r.length;for(this.clear();++n<a;){var h=r[n];this.set(h[0],h[1])}}function v0(){this.__data__=[],this.size=0}function _0(r){var n=this.__data__,a=bo(n,r);if(a<0)return!1;var h=n.length-1;return a==h?n.pop():po.call(n,a,1),--this.size,!0}function m0(r){var n=this.__data__,a=bo(n,r);return a<0?t:n[a][1]}function w0(r){return bo(this.__data__,r)>-1}function b0(r,n){var a=this.__data__,h=bo(a,r);return h<0?(++this.size,a.push([r,n])):a[h][1]=n,this}ui.prototype.clear=v0,ui.prototype.delete=_0,ui.prototype.get=m0,ui.prototype.has=w0,ui.prototype.set=b0;function hi(r){var n=-1,a=r==null?0:r.length;for(this.clear();++n<a;){var h=r[n];this.set(h[0],h[1])}}function E0(){this.size=0,this.__data__={hash:new Ji,map:new(ts||ui),string:new Ji}}function D0(r){var n=No(this,r).delete(r);return this.size-=n?1:0,n}function S0(r){return No(this,r).get(r)}function I0(r){return No(this,r).has(r)}function O0(r,n){var a=No(this,r),h=a.size;return a.set(r,n),this.size+=a.size==h?0:1,this}hi.prototype.clear=E0,hi.prototype.delete=D0,hi.prototype.get=S0,hi.prototype.has=I0,hi.prototype.set=O0;function Yi(r){var n=-1,a=r==null?0:r.length;for(this.__data__=new hi;++n<a;)this.add(r[n])}function x0(r){return this.__data__.set(r,g),this}function P0(r){return this.__data__.has(r)}Yi.prototype.add=Yi.prototype.push=x0,Yi.prototype.has=P0;function kr(r){var n=this.__data__=new ui(r);this.size=n.size}function C0(){this.__data__=new ui,this.size=0}function T0(r){var n=this.__data__,a=n.delete(r);return this.size=n.size,a}function A0(r){return this.__data__.get(r)}function R0(r){return this.__data__.has(r)}function N0(r,n){var a=this.__data__;if(a instanceof ui){var h=a.__data__;if(!ts||h.length<o-1)return h.push([r,n]),this.size=++a.size,this;a=this.__data__=new hi(h)}return a.set(r,n),this.size=a.size,this}kr.prototype.clear=C0,kr.prototype.delete=T0,kr.prototype.get=A0,kr.prototype.has=R0,kr.prototype.set=N0;function Rh(r,n){var a=Re(r),h=!a&&tn(r),y=!a&&!h&&Li(r),m=!a&&!h&&!y&&Nn(r),P=a||h||y||m,N=P?ka(r.length,Hg):[],q=N.length;for(var X in r)(n||nt.call(r,X))&&!(P&&(X=="length"||y&&(X=="offset"||X=="parent")||m&&(X=="buffer"||X=="byteLength"||X=="byteOffset")||pi(X,q)))&&N.push(X);return N}function Nh(r){var n=r.length;return n?r[cc(0,n-1)]:t}function $0(r,n){return $o(gr(r),Qi(n,0,r.length))}function U0(r){return $o(gr(r))}function Xa(r,n,a){(a!==t&&!Vr(r[n],a)||a===t&&!(n in r))&&li(r,n,a)}function ss(r,n,a){var h=r[n];(!(nt.call(r,n)&&Vr(h,a))||a===t&&!(n in r))&&li(r,n,a)}function bo(r,n){for(var a=r.length;a--;)if(Vr(r[a][0],n))return a;return-1}function L0(r,n,a,h){return Ri(r,function(y,m,P){n(h,y,a(y),P)}),h}function $h(r,n){return r&&ti(n,Vt(n),r)}function j0(r,n){return r&&ti(n,vr(n),r)}function li(r,n,a){n=="__proto__"&&go?go(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}function Za(r,n){for(var a=-1,h=n.length,y=K(h),m=r==null;++a<h;)y[a]=m?t:Nc(r,n[a]);return y}function Qi(r,n,a){return r===r&&(a!==t&&(r=r<=a?r:a),n!==t&&(r=r>=n?r:n)),r}function Lr(r,n,a,h,y,m){var P,N=n&b,q=n&D,X=n&O;if(a&&(P=y?a(r,h,y,m):a(r)),P!==t)return P;if(!Et(r))return r;var Z=Re(r);if(Z){if(P=Iy(r),!N)return gr(r,P)}else{var ne=Zt(r),he=ne==ae||ne==fe;if(Li(r))return nl(r,N);if(ne==je||ne==le||he&&!y){if(P=q||he?{}:Dl(r),!N)return q?py(r,j0(P,r)):dy(r,$h(P,r))}else{if(!st[ne])return y?r:{};P=Oy(r,ne,N)}}m||(m=new kr);var ye=m.get(r);if(ye)return ye;m.set(r,P),Xl(r)?r.forEach(function(De){P.add(Lr(De,n,a,De,r,m))}):Yl(r)&&r.forEach(function(De,Ge){P.set(Ge,Lr(De,n,a,Ge,r,m))});var Ee=X?q?mc:_c:q?vr:Vt,ze=Z?t:Ee(r);return Nr(ze||r,function(De,Ge){ze&&(Ge=De,De=r[Ge]),ss(P,Ge,Lr(De,n,a,Ge,r,m))}),P}function M0(r){var n=Vt(r);return function(a){return Uh(a,r,n)}}function Uh(r,n,a){var h=a.length;if(r==null)return!h;for(r=ut(r);h--;){var y=a[h],m=n[y],P=r[y];if(P===t&&!(y in r)||!m(P))return!1}return!0}function Lh(r,n,a){if(typeof r!="function")throw new $r(l);return fs(function(){r.apply(t,a)},n)}function os(r,n,a,h){var y=-1,m=io,P=!0,N=r.length,q=[],X=n.length;if(!N)return q;a&&(n=mt(n,Dr(a))),h?(m=qa,P=!1):n.length>=o&&(m=Zn,P=!1,n=new Yi(n));e:for(;++y<N;){var Z=r[y],ne=a==null?Z:a(Z);if(Z=h||Z!==0?Z:0,P&&ne===ne){for(var he=X;he--;)if(n[he]===ne)continue e;q.push(Z)}else m(n,ne,h)||q.push(Z)}return q}var Ri=ul(ei),jh=ul(tc,!0);function q0(r,n){var a=!0;return Ri(r,function(h,y,m){return a=!!n(h,y,m),a}),a}function Eo(r,n,a){for(var h=-1,y=r.length;++h<y;){var m=r[h],P=n(m);if(P!=null&&(N===t?P===P&&!Ir(P):a(P,N)))var N=P,q=m}return q}function F0(r,n,a,h){var y=r.length;for(a=Me(a),a<0&&(a=-a>y?0:y+a),h=h===t||h>y?y:Me(h),h<0&&(h+=y),h=a>h?0:ef(h);a<h;)r[a++]=n;return r}function Mh(r,n){var a=[];return Ri(r,function(h,y,m){n(h,y,m)&&a.push(h)}),a}function Jt(r,n,a,h,y){var m=-1,P=r.length;for(a||(a=Py),y||(y=[]);++m<P;){var N=r[m];n>0&&a(N)?n>1?Jt(N,n-1,a,h,y):Ci(y,N):h||(y[y.length]=N)}return y}var ec=hl(),qh=hl(!0);function ei(r,n){return r&&ec(r,n,Vt)}function tc(r,n){return r&&qh(r,n,Vt)}function Do(r,n){return Pi(n,function(a){return gi(r[a])})}function Xi(r,n){n=$i(n,r);for(var a=0,h=n.length;r!=null&&a<h;)r=r[ri(n[a++])];return a&&a==h?r:t}function Fh(r,n,a){var h=n(r);return Re(r)?h:Ci(h,a(r))}function sr(r){return r==null?r===t?Fe:ke:Wi&&Wi in ut(r)?Ey(r):Uy(r)}function rc(r,n){return r>n}function z0(r,n){return r!=null&&nt.call(r,n)}function B0(r,n){return r!=null&&n in ut(r)}function H0(r,n,a){return r>=Xt(n,a)&&r<Kt(n,a)}function ic(r,n,a){for(var h=a?qa:io,y=r[0].length,m=r.length,P=m,N=K(m),q=1/0,X=[];P--;){var Z=r[P];P&&n&&(Z=mt(Z,Dr(n))),q=Xt(Z.length,q),N[P]=!a&&(n||y>=120&&Z.length>=120)?new Yi(P&&Z):t}Z=r[0];var ne=-1,he=N[0];e:for(;++ne<y&&X.length<q;){var ye=Z[ne],Ee=n?n(ye):ye;if(ye=a||ye!==0?ye:0,!(he?Zn(he,Ee):h(X,Ee,a))){for(P=m;--P;){var ze=N[P];if(!(ze?Zn(ze,Ee):h(r[P],Ee,a)))continue e}he&&he.push(Ee),X.push(ye)}}return X}function K0(r,n,a,h){return ei(r,function(y,m,P){n(h,a(y),m,P)}),h}function as(r,n,a){n=$i(n,r),r=xl(r,n);var h=r==null?r:r[ri(Mr(n))];return h==null?t:kt(h,r,a)}function zh(r){return Tt(r)&&sr(r)==le}function k0(r){return Tt(r)&&sr(r)==Se}function V0(r){return Tt(r)&&sr(r)==U}function cs(r,n,a,h,y){return r===n?!0:r==null||n==null||!Tt(r)&&!Tt(n)?r!==r&&n!==n:G0(r,n,a,h,cs,y)}function G0(r,n,a,h,y,m){var P=Re(r),N=Re(n),q=P?_e:Zt(r),X=N?_e:Zt(n);q=q==le?je:q,X=X==le?je:X;var Z=q==je,ne=X==je,he=q==X;if(he&&Li(r)){if(!Li(n))return!1;P=!0,Z=!1}if(he&&!Z)return m||(m=new kr),P||Nn(r)?wl(r,n,a,h,y,m):wy(r,n,q,a,h,y,m);if(!(a&x)){var ye=Z&&nt.call(r,"__wrapped__"),Ee=ne&&nt.call(n,"__wrapped__");if(ye||Ee){var ze=ye?r.value():r,De=Ee?n.value():n;return m||(m=new kr),y(ze,De,a,h,m)}}return he?(m||(m=new kr),by(r,n,a,h,y,m)):!1}function W0(r){return Tt(r)&&Zt(r)==Ie}function nc(r,n,a,h){var y=a.length,m=y,P=!h;if(r==null)return!m;for(r=ut(r);y--;){var N=a[y];if(P&&N[2]?N[1]!==r[N[0]]:!(N[0]in r))return!1}for(;++y<m;){N=a[y];var q=N[0],X=r[q],Z=N[1];if(P&&N[2]){if(X===t&&!(q in r))return!1}else{var ne=new kr;if(h)var he=h(X,Z,q,r,n,ne);if(!(he===t?cs(Z,X,x|F,h,ne):he))return!1}}return!0}function Bh(r){if(!Et(r)||Ty(r))return!1;var n=gi(r)?Wg:Da;return n.test(en(r))}function J0(r){return Tt(r)&&sr(r)==qe}function Y0(r){return Tt(r)&&Zt(r)==Oe}function Q0(r){return Tt(r)&&Fo(r.length)&&!!ot[sr(r)]}function Hh(r){return typeof r=="function"?r:r==null?_r:typeof r=="object"?Re(r)?Vh(r[0],r[1]):kh(r):ff(r)}function sc(r){if(!ls(r))return e0(r);var n=[];for(var a in ut(r))nt.call(r,a)&&a!="constructor"&&n.push(a);return n}function X0(r){if(!Et(r))return $y(r);var n=ls(r),a=[];for(var h in r)h=="constructor"&&(n||!nt.call(r,h))||a.push(h);return a}function oc(r,n){return r<n}function Kh(r,n){var a=-1,h=yr(r)?K(r.length):[];return Ri(r,function(y,m,P){h[++a]=n(y,m,P)}),h}function kh(r){var n=bc(r);return n.length==1&&n[0][2]?Il(n[0][0],n[0][1]):function(a){return a===r||nc(a,r,n)}}function Vh(r,n){return Dc(r)&&Sl(n)?Il(ri(r),n):function(a){var h=Nc(a,r);return h===t&&h===n?$c(a,r):cs(n,h,x|F)}}function So(r,n,a,h,y){r!==n&&ec(n,function(m,P){if(y||(y=new kr),Et(m))Z0(r,n,P,a,So,h,y);else{var N=h?h(Ic(r,P),m,P+"",r,n,y):t;N===t&&(N=m),Xa(r,P,N)}},vr)}function Z0(r,n,a,h,y,m,P){var N=Ic(r,a),q=Ic(n,a),X=P.get(q);if(X){Xa(r,a,X);return}var Z=m?m(N,q,a+"",r,n,P):t,ne=Z===t;if(ne){var he=Re(q),ye=!he&&Li(q),Ee=!he&&!ye&&Nn(q);Z=q,he||ye||Ee?Re(N)?Z=N:Nt(N)?Z=gr(N):ye?(ne=!1,Z=nl(q,!0)):Ee?(ne=!1,Z=sl(q,!0)):Z=[]:ds(q)||tn(q)?(Z=N,tn(N)?Z=tf(N):(!Et(N)||gi(N))&&(Z=Dl(q))):ne=!1}ne&&(P.set(q,Z),y(Z,q,h,m,P),P.delete(q)),Xa(r,a,Z)}function Gh(r,n){var a=r.length;if(a)return n+=n<0?a:0,pi(n,a)?r[n]:t}function Wh(r,n,a){n.length?n=mt(n,function(m){return Re(m)?function(P){return Xi(P,m.length===1?m[0]:m)}:m}):n=[_r];var h=-1;n=mt(n,Dr(me()));var y=Kh(r,function(m,P,N){var q=mt(n,function(X){return X(m)});return{criteria:q,index:++h,value:m}});return Og(y,function(m,P){return fy(m,P,a)})}function ey(r,n){return Jh(r,n,function(a,h){return $c(r,h)})}function Jh(r,n,a){for(var h=-1,y=n.length,m={};++h<y;){var P=n[h],N=Xi(r,P);a(N,P)&&us(m,$i(P,r),N)}return m}function ty(r){return function(n){return Xi(n,r)}}function ac(r,n,a,h){var y=h?Ig:En,m=-1,P=n.length,N=r;for(r===n&&(n=gr(n)),a&&(N=mt(r,Dr(a)));++m<P;)for(var q=0,X=n[m],Z=a?a(X):X;(q=y(N,Z,q,h))>-1;)N!==r&&po.call(N,q,1),po.call(r,q,1);return r}function Yh(r,n){for(var a=r?n.length:0,h=a-1;a--;){var y=n[a];if(a==h||y!==m){var m=y;pi(y)?po.call(r,y,1):lc(r,y)}}return r}function cc(r,n){return r+vo(Th()*(n-r+1))}function ry(r,n,a,h){for(var y=-1,m=Kt(yo((n-r)/(a||1)),0),P=K(m);m--;)P[h?m:++y]=r,r+=a;return P}function uc(r,n){var a="";if(!r||n<1||n>k)return a;do n%2&&(a+=r),n=vo(n/2),n&&(r+=r);while(n);return a}function Ke(r,n){return Oc(Ol(r,n,_r),r+"")}function iy(r){return Nh($n(r))}function ny(r,n){var a=$n(r);return $o(a,Qi(n,0,a.length))}function us(r,n,a,h){if(!Et(r))return r;n=$i(n,r);for(var y=-1,m=n.length,P=m-1,N=r;N!=null&&++y<m;){var q=ri(n[y]),X=a;if(q==="__proto__"||q==="constructor"||q==="prototype")return r;if(y!=P){var Z=N[q];X=h?h(Z,q,N):t,X===t&&(X=Et(Z)?Z:pi(n[y+1])?[]:{})}ss(N,q,X),N=N[q]}return r}var Qh=_o?function(r,n){return _o.set(r,n),r}:_r,sy=go?function(r,n){return go(r,"toString",{configurable:!0,enumerable:!1,value:Lc(n),writable:!0})}:_r;function oy(r){return $o($n(r))}function jr(r,n,a){var h=-1,y=r.length;n<0&&(n=-n>y?0:y+n),a=a>y?y:a,a<0&&(a+=y),y=n>a?0:a-n>>>0,n>>>=0;for(var m=K(y);++h<y;)m[h]=r[h+n];return m}function ay(r,n){var a;return Ri(r,function(h,y,m){return a=n(h,y,m),!a}),!!a}function Io(r,n,a){var h=0,y=r==null?h:r.length;if(typeof n=="number"&&n===n&&y<=oe){for(;h<y;){var m=h+y>>>1,P=r[m];P!==null&&!Ir(P)&&(a?P<=n:P<n)?h=m+1:y=m}return y}return hc(r,n,_r,a)}function hc(r,n,a,h){var y=0,m=r==null?0:r.length;if(m===0)return 0;n=a(n);for(var P=n!==n,N=n===null,q=Ir(n),X=n===t;y<m;){var Z=vo((y+m)/2),ne=a(r[Z]),he=ne!==t,ye=ne===null,Ee=ne===ne,ze=Ir(ne);if(P)var De=h||Ee;else X?De=Ee&&(h||he):N?De=Ee&&he&&(h||!ye):q?De=Ee&&he&&!ye&&(h||!ze):ye||ze?De=!1:De=h?ne<=n:ne<n;De?y=Z+1:m=Z}return Xt(m,we)}function Xh(r,n){for(var a=-1,h=r.length,y=0,m=[];++a<h;){var P=r[a],N=n?n(P):P;if(!a||!Vr(N,q)){var q=N;m[y++]=P===0?0:P}}return m}function Zh(r){return typeof r=="number"?r:Ir(r)?Y:+r}function Sr(r){if(typeof r=="string")return r;if(Re(r))return mt(r,Sr)+"";if(Ir(r))return Ah?Ah.call(r):"";var n=r+"";return n=="0"&&1/r==-Q?"-0":n}function Ni(r,n,a){var h=-1,y=io,m=r.length,P=!0,N=[],q=N;if(a)P=!1,y=qa;else if(m>=o){var X=n?null:_y(r);if(X)return so(X);P=!1,y=Zn,q=new Yi}else q=n?[]:N;e:for(;++h<m;){var Z=r[h],ne=n?n(Z):Z;if(Z=a||Z!==0?Z:0,P&&ne===ne){for(var he=q.length;he--;)if(q[he]===ne)continue e;n&&q.push(ne),N.push(Z)}else y(q,ne,a)||(q!==N&&q.push(ne),N.push(Z))}return N}function lc(r,n){return n=$i(n,r),r=xl(r,n),r==null||delete r[ri(Mr(n))]}function el(r,n,a,h){return us(r,n,a(Xi(r,n)),h)}function Oo(r,n,a,h){for(var y=r.length,m=h?y:-1;(h?m--:++m<y)&&n(r[m],m,r););return a?jr(r,h?0:m,h?m+1:y):jr(r,h?m+1:0,h?y:m)}function tl(r,n){var a=r;return a instanceof Je&&(a=a.value()),Fa(n,function(h,y){return y.func.apply(y.thisArg,Ci([h],y.args))},a)}function fc(r,n,a){var h=r.length;if(h<2)return h?Ni(r[0]):[];for(var y=-1,m=K(h);++y<h;)for(var P=r[y],N=-1;++N<h;)N!=y&&(m[y]=os(m[y]||P,r[N],n,a));return Ni(Jt(m,1),n,a)}function rl(r,n,a){for(var h=-1,y=r.length,m=n.length,P={};++h<y;){var N=h<m?n[h]:t;a(P,r[h],N)}return P}function dc(r){return Nt(r)?r:[]}function pc(r){return typeof r=="function"?r:_r}function $i(r,n){return Re(r)?r:Dc(r,n)?[r]:Al(it(r))}var cy=Ke;function Ui(r,n,a){var h=r.length;return a=a===t?h:a,!n&&a>=h?r:jr(r,n,a)}var il=Jg||function(r){return Xe.clearTimeout(r)};function nl(r,n){if(n)return r.slice();var a=r.length,h=Ih?Ih(a):new r.constructor(a);return r.copy(h),h}function gc(r){var n=new r.constructor(r.byteLength);return new lo(n).set(new lo(r)),n}function uy(r,n){var a=n?gc(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}function hy(r){var n=new r.constructor(r.source,Ar.exec(r));return n.lastIndex=r.lastIndex,n}function ly(r){return ns?ut(ns.call(r)):{}}function sl(r,n){var a=n?gc(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}function ol(r,n){if(r!==n){var a=r!==t,h=r===null,y=r===r,m=Ir(r),P=n!==t,N=n===null,q=n===n,X=Ir(n);if(!N&&!X&&!m&&r>n||m&&P&&q&&!N&&!X||h&&P&&q||!a&&q||!y)return 1;if(!h&&!m&&!X&&r<n||X&&a&&y&&!h&&!m||N&&a&&y||!P&&y||!q)return-1}return 0}function fy(r,n,a){for(var h=-1,y=r.criteria,m=n.criteria,P=y.length,N=a.length;++h<P;){var q=ol(y[h],m[h]);if(q){if(h>=N)return q;var X=a[h];return q*(X=="desc"?-1:1)}}return r.index-n.index}function al(r,n,a,h){for(var y=-1,m=r.length,P=a.length,N=-1,q=n.length,X=Kt(m-P,0),Z=K(q+X),ne=!h;++N<q;)Z[N]=n[N];for(;++y<P;)(ne||y<m)&&(Z[a[y]]=r[y]);for(;X--;)Z[N++]=r[y++];return Z}function cl(r,n,a,h){for(var y=-1,m=r.length,P=-1,N=a.length,q=-1,X=n.length,Z=Kt(m-N,0),ne=K(Z+X),he=!h;++y<Z;)ne[y]=r[y];for(var ye=y;++q<X;)ne[ye+q]=n[q];for(;++P<N;)(he||y<m)&&(ne[ye+a[P]]=r[y++]);return ne}function gr(r,n){var a=-1,h=r.length;for(n||(n=K(h));++a<h;)n[a]=r[a];return n}function ti(r,n,a,h){var y=!a;a||(a={});for(var m=-1,P=n.length;++m<P;){var N=n[m],q=h?h(a[N],r[N],N,a,r):t;q===t&&(q=r[N]),y?li(a,N,q):ss(a,N,q)}return a}function dy(r,n){return ti(r,Ec(r),n)}function py(r,n){return ti(r,bl(r),n)}function xo(r,n){return function(a,h){var y=Re(a)?mg:L0,m=n?n():{};return y(a,r,me(h,2),m)}}function Tn(r){return Ke(function(n,a){var h=-1,y=a.length,m=y>1?a[y-1]:t,P=y>2?a[2]:t;for(m=r.length>3&&typeof m=="function"?(y--,m):t,P&&or(a[0],a[1],P)&&(m=y<3?t:m,y=1),n=ut(n);++h<y;){var N=a[h];N&&r(n,N,h,m)}return n})}function ul(r,n){return function(a,h){if(a==null)return a;if(!yr(a))return r(a,h);for(var y=a.length,m=n?y:-1,P=ut(a);(n?m--:++m<y)&&h(P[m],m,P)!==!1;);return a}}function hl(r){return function(n,a,h){for(var y=-1,m=ut(n),P=h(n),N=P.length;N--;){var q=P[r?N:++y];if(a(m[q],q,m)===!1)break}return n}}function gy(r,n,a){var h=n&B,y=hs(r);function m(){var P=this&&this!==Xe&&this instanceof m?y:r;return P.apply(h?a:this,arguments)}return m}function ll(r){return function(n){n=it(n);var a=Dn(n)?Kr(n):t,h=a?a[0]:n.charAt(0),y=a?Ui(a,1).join(""):n.slice(1);return h[r]()+y}}function An(r){return function(n){return Fa(hf(uf(n).replace(Qn,"")),r,"")}}function hs(r){return function(){var n=arguments;switch(n.length){case 0:return new r;case 1:return new r(n[0]);case 2:return new r(n[0],n[1]);case 3:return new r(n[0],n[1],n[2]);case 4:return new r(n[0],n[1],n[2],n[3]);case 5:return new r(n[0],n[1],n[2],n[3],n[4]);case 6:return new r(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new r(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var a=Cn(r.prototype),h=r.apply(a,n);return Et(h)?h:a}}function yy(r,n,a){var h=hs(r);function y(){for(var m=arguments.length,P=K(m),N=m,q=Rn(y);N--;)P[N]=arguments[N];var X=m<3&&P[0]!==q&&P[m-1]!==q?[]:Ti(P,q);if(m-=X.length,m<a)return yl(r,n,Po,y.placeholder,t,P,X,t,t,a-m);var Z=this&&this!==Xe&&this instanceof y?h:r;return kt(Z,this,P)}return y}function fl(r){return function(n,a,h){var y=ut(n);if(!yr(n)){var m=me(a,3);n=Vt(n),a=function(N){return m(y[N],N,y)}}var P=r(n,a,h);return P>-1?y[m?n[P]:P]:t}}function dl(r){return di(function(n){var a=n.length,h=a,y=Ur.prototype.thru;for(r&&n.reverse();h--;){var m=n[h];if(typeof m!="function")throw new $r(l);if(y&&!P&&Ro(m)=="wrapper")var P=new Ur([],!0)}for(h=P?h:a;++h<a;){m=n[h];var N=Ro(m),q=N=="wrapper"?wc(m):t;q&&Sc(q[0])&&q[1]==(u|L|A|w)&&!q[4].length&&q[9]==1?P=P[Ro(q[0])].apply(P,q[3]):P=m.length==1&&Sc(m)?P[N]():P.thru(m)}return function(){var X=arguments,Z=X[0];if(P&&X.length==1&&Re(Z))return P.plant(Z).value();for(var ne=0,he=a?n[ne].apply(this,X):Z;++ne<a;)he=n[ne].call(this,he);return he}})}function Po(r,n,a,h,y,m,P,N,q,X){var Z=n&u,ne=n&B,he=n&te,ye=n&(L|C),Ee=n&G,ze=he?t:hs(r);function De(){for(var Ge=arguments.length,Ze=K(Ge),Or=Ge;Or--;)Ze[Or]=arguments[Or];if(ye)var ar=Rn(De),xr=Pg(Ze,ar);if(h&&(Ze=al(Ze,h,y,ye)),m&&(Ze=cl(Ze,m,P,ye)),Ge-=xr,ye&&Ge<X){var $t=Ti(Ze,ar);return yl(r,n,Po,De.placeholder,a,Ze,$t,N,q,X-Ge)}var Gr=ne?a:this,vi=he?Gr[r]:r;return Ge=Ze.length,N?Ze=Ly(Ze,N):Ee&&Ge>1&&Ze.reverse(),Z&&q<Ge&&(Ze.length=q),this&&this!==Xe&&this instanceof De&&(vi=ze||hs(vi)),vi.apply(Gr,Ze)}return De}function pl(r,n){return function(a,h){return K0(a,r,n(h),{})}}function Co(r,n){return function(a,h){var y;if(a===t&&h===t)return n;if(a!==t&&(y=a),h!==t){if(y===t)return h;typeof a=="string"||typeof h=="string"?(a=Sr(a),h=Sr(h)):(a=Zh(a),h=Zh(h)),y=r(a,h)}return y}}function yc(r){return di(function(n){return n=mt(n,Dr(me())),Ke(function(a){var h=this;return r(n,function(y){return kt(y,h,a)})})})}function To(r,n){n=n===t?" ":Sr(n);var a=n.length;if(a<2)return a?uc(n,r):n;var h=uc(n,yo(r/Sn(n)));return Dn(n)?Ui(Kr(h),0,r).join(""):h.slice(0,r)}function vy(r,n,a,h){var y=n&B,m=hs(r);function P(){for(var N=-1,q=arguments.length,X=-1,Z=h.length,ne=K(Z+q),he=this&&this!==Xe&&this instanceof P?m:r;++X<Z;)ne[X]=h[X];for(;q--;)ne[X++]=arguments[++N];return kt(he,y?a:this,ne)}return P}function gl(r){return function(n,a,h){return h&&typeof h!="number"&&or(n,a,h)&&(a=h=t),n=yi(n),a===t?(a=n,n=0):a=yi(a),h=h===t?n<a?1:-1:yi(h),ry(n,a,h,r)}}function Ao(r){return function(n,a){return typeof n=="string"&&typeof a=="string"||(n=qr(n),a=qr(a)),r(n,a)}}function yl(r,n,a,h,y,m,P,N,q,X){var Z=n&L,ne=Z?P:t,he=Z?t:P,ye=Z?m:t,Ee=Z?t:m;n|=Z?A:S,n&=~(Z?S:A),n&$||(n&=~(B|te));var ze=[r,n,y,ye,ne,Ee,he,N,q,X],De=a.apply(t,ze);return Sc(r)&&Pl(De,ze),De.placeholder=h,Cl(De,r,n)}function vc(r){var n=Ht[r];return function(a,h){if(a=qr(a),h=h==null?0:Xt(Me(h),292),h&&Ch(a)){var y=(it(a)+"e").split("e"),m=n(y[0]+"e"+(+y[1]+h));return y=(it(m)+"e").split("e"),+(y[0]+"e"+(+y[1]-h))}return n(a)}}var _y=xn&&1/so(new xn([,-0]))[1]==Q?function(r){return new xn(r)}:qc;function vl(r){return function(n){var a=Zt(n);return a==Ie?Ga(n):a==Oe?Ug(n):xg(n,r(n))}}function fi(r,n,a,h,y,m,P,N){var q=n&te;if(!q&&typeof r!="function")throw new $r(l);var X=h?h.length:0;if(X||(n&=~(A|S),h=y=t),P=P===t?P:Kt(Me(P),0),N=N===t?N:Me(N),X-=y?y.length:0,n&S){var Z=h,ne=y;h=y=t}var he=q?t:wc(r),ye=[r,n,a,h,y,Z,ne,m,P,N];if(he&&Ny(ye,he),r=ye[0],n=ye[1],a=ye[2],h=ye[3],y=ye[4],N=ye[9]=ye[9]===t?q?0:r.length:Kt(ye[9]-X,0),!N&&n&(L|C)&&(n&=~(L|C)),!n||n==B)var Ee=gy(r,n,a);else n==L||n==C?Ee=yy(r,n,N):(n==A||n==(B|A))&&!y.length?Ee=vy(r,n,a,h):Ee=Po.apply(t,ye);var ze=he?Qh:Pl;return Cl(ze(Ee,ye),r,n)}function _l(r,n,a,h){return r===t||Vr(r,On[a])&&!nt.call(h,a)?n:r}function ml(r,n,a,h,y,m){return Et(r)&&Et(n)&&(m.set(n,r),So(r,n,t,ml,m),m.delete(n)),r}function my(r){return ds(r)?t:r}function wl(r,n,a,h,y,m){var P=a&x,N=r.length,q=n.length;if(N!=q&&!(P&&q>N))return!1;var X=m.get(r),Z=m.get(n);if(X&&Z)return X==n&&Z==r;var ne=-1,he=!0,ye=a&F?new Yi:t;for(m.set(r,n),m.set(n,r);++ne<N;){var Ee=r[ne],ze=n[ne];if(h)var De=P?h(ze,Ee,ne,n,r,m):h(Ee,ze,ne,r,n,m);if(De!==t){if(De)continue;he=!1;break}if(ye){if(!za(n,function(Ge,Ze){if(!Zn(ye,Ze)&&(Ee===Ge||y(Ee,Ge,a,h,m)))return ye.push(Ze)})){he=!1;break}}else if(!(Ee===ze||y(Ee,ze,a,h,m))){he=!1;break}}return m.delete(r),m.delete(n),he}function wy(r,n,a,h,y,m,P){switch(a){case Ce:if(r.byteLength!=n.byteLength||r.byteOffset!=n.byteOffset)return!1;r=r.buffer,n=n.buffer;case Se:return!(r.byteLength!=n.byteLength||!m(new lo(r),new lo(n)));case z:case U:case Be:return Vr(+r,+n);case R:return r.name==n.name&&r.message==n.message;case qe:case Ne:return r==n+"";case Ie:var N=Ga;case Oe:var q=h&x;if(N||(N=so),r.size!=n.size&&!q)return!1;var X=P.get(r);if(X)return X==n;h|=F,P.set(r,n);var Z=wl(N(r),N(n),h,y,m,P);return P.delete(r),Z;case $e:if(ns)return ns.call(r)==ns.call(n)}return!1}function by(r,n,a,h,y,m){var P=a&x,N=_c(r),q=N.length,X=_c(n),Z=X.length;if(q!=Z&&!P)return!1;for(var ne=q;ne--;){var he=N[ne];if(!(P?he in n:nt.call(n,he)))return!1}var ye=m.get(r),Ee=m.get(n);if(ye&&Ee)return ye==n&&Ee==r;var ze=!0;m.set(r,n),m.set(n,r);for(var De=P;++ne<q;){he=N[ne];var Ge=r[he],Ze=n[he];if(h)var Or=P?h(Ze,Ge,he,n,r,m):h(Ge,Ze,he,r,n,m);if(!(Or===t?Ge===Ze||y(Ge,Ze,a,h,m):Or)){ze=!1;break}De||(De=he=="constructor")}if(ze&&!De){var ar=r.constructor,xr=n.constructor;ar!=xr&&"constructor"in r&&"constructor"in n&&!(typeof ar=="function"&&ar instanceof ar&&typeof xr=="function"&&xr instanceof xr)&&(ze=!1)}return m.delete(r),m.delete(n),ze}function di(r){return Oc(Ol(r,t,Ul),r+"")}function _c(r){return Fh(r,Vt,Ec)}function mc(r){return Fh(r,vr,bl)}var wc=_o?function(r){return _o.get(r)}:qc;function Ro(r){for(var n=r.name+"",a=Pn[n],h=nt.call(Pn,n)?a.length:0;h--;){var y=a[h],m=y.func;if(m==null||m==r)return y.name}return n}function Rn(r){var n=nt.call(_,"placeholder")?_:r;return n.placeholder}function me(){var r=_.iteratee||jc;return r=r===jc?Hh:r,arguments.length?r(arguments[0],arguments[1]):r}function No(r,n){var a=r.__data__;return Cy(n)?a[typeof n=="string"?"string":"hash"]:a.map}function bc(r){for(var n=Vt(r),a=n.length;a--;){var h=n[a],y=r[h];n[a]=[h,y,Sl(y)]}return n}function Zi(r,n){var a=Rg(r,n);return Bh(a)?a:t}function Ey(r){var n=nt.call(r,Wi),a=r[Wi];try{r[Wi]=t;var h=!0}catch{}var y=uo.call(r);return h&&(n?r[Wi]=a:delete r[Wi]),y}var Ec=Ja?function(r){return r==null?[]:(r=ut(r),Pi(Ja(r),function(n){return xh.call(r,n)}))}:Fc,bl=Ja?function(r){for(var n=[];r;)Ci(n,Ec(r)),r=fo(r);return n}:Fc,Zt=sr;(Ya&&Zt(new Ya(new ArrayBuffer(1)))!=Ce||ts&&Zt(new ts)!=Ie||Qa&&Zt(Qa.resolve())!=gt||xn&&Zt(new xn)!=Oe||rs&&Zt(new rs)!=Pe)&&(Zt=function(r){var n=sr(r),a=n==je?r.constructor:t,h=a?en(a):"";if(h)switch(h){case n0:return Ce;case s0:return Ie;case o0:return gt;case a0:return Oe;case c0:return Pe}return n});function Dy(r,n,a){for(var h=-1,y=a.length;++h<y;){var m=a[h],P=m.size;switch(m.type){case"drop":r+=P;break;case"dropRight":n-=P;break;case"take":n=Xt(n,r+P);break;case"takeRight":r=Kt(r,n-P);break}}return{start:r,end:n}}function Sy(r){var n=r.match(ht);return n?n[1].split(qt):[]}function El(r,n,a){n=$i(n,r);for(var h=-1,y=n.length,m=!1;++h<y;){var P=ri(n[h]);if(!(m=r!=null&&a(r,P)))break;r=r[P]}return m||++h!=y?m:(y=r==null?0:r.length,!!y&&Fo(y)&&pi(P,y)&&(Re(r)||tn(r)))}function Iy(r){var n=r.length,a=new r.constructor(n);return n&&typeof r[0]=="string"&&nt.call(r,"index")&&(a.index=r.index,a.input=r.input),a}function Dl(r){return typeof r.constructor=="function"&&!ls(r)?Cn(fo(r)):{}}function Oy(r,n,a){var h=r.constructor;switch(n){case Se:return gc(r);case z:case U:return new h(+r);case Ce:return uy(r,a);case He:case xe:case Ve:case We:case et:case tt:case Qe:case rr:case dr:return sl(r,a);case Ie:return new h;case Be:case Ne:return new h(r);case qe:return hy(r);case Oe:return new h;case $e:return ly(r)}}function xy(r,n){var a=n.length;if(!a)return r;var h=a-1;return n[h]=(a>1?"& ":"")+n[h],n=n.join(a>2?", ":" "),r.replace(Ct,`{
/* [wrapped with `+n+`] */
`)}function Py(r){return Re(r)||tn(r)||!!(Ph&&r&&r[Ph])}function pi(r,n){var a=typeof r;return n=n??k,!!n&&(a=="number"||a!="symbol"&&Ia.test(r))&&r>-1&&r%1==0&&r<n}function or(r,n,a){if(!Et(a))return!1;var h=typeof n;return(h=="number"?yr(a)&&pi(n,a.length):h=="string"&&n in a)?Vr(a[n],r):!1}function Dc(r,n){if(Re(r))return!1;var a=typeof r;return a=="number"||a=="symbol"||a=="boolean"||r==null||Ir(r)?!0:Lt.test(r)||!_t.test(r)||n!=null&&r in ut(n)}function Cy(r){var n=typeof r;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?r!=="__proto__":r===null}function Sc(r){var n=Ro(r),a=_[n];if(typeof a!="function"||!(n in Je.prototype))return!1;if(r===a)return!0;var h=wc(a);return!!h&&r===h[0]}function Ty(r){return!!Sh&&Sh in r}var Ay=ao?gi:zc;function ls(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||On;return r===a}function Sl(r){return r===r&&!Et(r)}function Il(r,n){return function(a){return a==null?!1:a[r]===n&&(n!==t||r in ut(a))}}function Ry(r){var n=Mo(r,function(h){return a.size===p&&a.clear(),h}),a=n.cache;return n}function Ny(r,n){var a=r[1],h=n[1],y=a|h,m=y<(B|te|u),P=h==u&&a==L||h==u&&a==w&&r[7].length<=n[8]||h==(u|w)&&n[7].length<=n[8]&&a==L;if(!(m||P))return r;h&B&&(r[2]=n[2],y|=a&B?0:$);var N=n[3];if(N){var q=r[3];r[3]=q?al(q,N,n[4]):N,r[4]=q?Ti(r[3],v):n[4]}return N=n[5],N&&(q=r[5],r[5]=q?cl(q,N,n[6]):N,r[6]=q?Ti(r[5],v):n[6]),N=n[7],N&&(r[7]=N),h&u&&(r[8]=r[8]==null?n[8]:Xt(r[8],n[8])),r[9]==null&&(r[9]=n[9]),r[0]=n[0],r[1]=y,r}function $y(r){var n=[];if(r!=null)for(var a in ut(r))n.push(a);return n}function Uy(r){return uo.call(r)}function Ol(r,n,a){return n=Kt(n===t?r.length-1:n,0),function(){for(var h=arguments,y=-1,m=Kt(h.length-n,0),P=K(m);++y<m;)P[y]=h[n+y];y=-1;for(var N=K(n+1);++y<n;)N[y]=h[y];return N[n]=a(P),kt(r,this,N)}}function xl(r,n){return n.length<2?r:Xi(r,jr(n,0,-1))}function Ly(r,n){for(var a=r.length,h=Xt(n.length,a),y=gr(r);h--;){var m=n[h];r[h]=pi(m,a)?y[m]:t}return r}function Ic(r,n){if(!(n==="constructor"&&typeof r[n]=="function")&&n!="__proto__")return r[n]}var Pl=Tl(Qh),fs=Qg||function(r,n){return Xe.setTimeout(r,n)},Oc=Tl(sy);function Cl(r,n,a){var h=n+"";return Oc(r,xy(h,jy(Sy(h),a)))}function Tl(r){var n=0,a=0;return function(){var h=t0(),y=de-(h-a);if(a=h,y>0){if(++n>=ue)return arguments[0]}else n=0;return r.apply(t,arguments)}}function $o(r,n){var a=-1,h=r.length,y=h-1;for(n=n===t?h:n;++a<n;){var m=cc(a,y),P=r[m];r[m]=r[a],r[a]=P}return r.length=n,r}var Al=Ry(function(r){var n=[];return r.charCodeAt(0)===46&&n.push(""),r.replace(jt,function(a,h,y,m){n.push(y?m.replace(ma,"$1"):h||a)}),n});function ri(r){if(typeof r=="string"||Ir(r))return r;var n=r+"";return n=="0"&&1/r==-Q?"-0":n}function en(r){if(r!=null){try{return co.call(r)}catch{}try{return r+""}catch{}}return""}function jy(r,n){return Nr(be,function(a){var h="_."+a[0];n&a[1]&&!io(r,h)&&r.push(h)}),r.sort()}function Rl(r){if(r instanceof Je)return r.clone();var n=new Ur(r.__wrapped__,r.__chain__);return n.__actions__=gr(r.__actions__),n.__index__=r.__index__,n.__values__=r.__values__,n}function My(r,n,a){(a?or(r,n,a):n===t)?n=1:n=Kt(Me(n),0);var h=r==null?0:r.length;if(!h||n<1)return[];for(var y=0,m=0,P=K(yo(h/n));y<h;)P[m++]=jr(r,y,y+=n);return P}function qy(r){for(var n=-1,a=r==null?0:r.length,h=0,y=[];++n<a;){var m=r[n];m&&(y[h++]=m)}return y}function Fy(){var r=arguments.length;if(!r)return[];for(var n=K(r-1),a=arguments[0],h=r;h--;)n[h-1]=arguments[h];return Ci(Re(a)?gr(a):[a],Jt(n,1))}var zy=Ke(function(r,n){return Nt(r)?os(r,Jt(n,1,Nt,!0)):[]}),By=Ke(function(r,n){var a=Mr(n);return Nt(a)&&(a=t),Nt(r)?os(r,Jt(n,1,Nt,!0),me(a,2)):[]}),Hy=Ke(function(r,n){var a=Mr(n);return Nt(a)&&(a=t),Nt(r)?os(r,Jt(n,1,Nt,!0),t,a):[]});function Ky(r,n,a){var h=r==null?0:r.length;return h?(n=a||n===t?1:Me(n),jr(r,n<0?0:n,h)):[]}function ky(r,n,a){var h=r==null?0:r.length;return h?(n=a||n===t?1:Me(n),n=h-n,jr(r,0,n<0?0:n)):[]}function Vy(r,n){return r&&r.length?Oo(r,me(n,3),!0,!0):[]}function Gy(r,n){return r&&r.length?Oo(r,me(n,3),!0):[]}function Wy(r,n,a,h){var y=r==null?0:r.length;return y?(a&&typeof a!="number"&&or(r,n,a)&&(a=0,h=y),F0(r,n,a,h)):[]}function Nl(r,n,a){var h=r==null?0:r.length;if(!h)return-1;var y=a==null?0:Me(a);return y<0&&(y=Kt(h+y,0)),no(r,me(n,3),y)}function $l(r,n,a){var h=r==null?0:r.length;if(!h)return-1;var y=h-1;return a!==t&&(y=Me(a),y=a<0?Kt(h+y,0):Xt(y,h-1)),no(r,me(n,3),y,!0)}function Ul(r){var n=r==null?0:r.length;return n?Jt(r,1):[]}function Jy(r){var n=r==null?0:r.length;return n?Jt(r,Q):[]}function Yy(r,n){var a=r==null?0:r.length;return a?(n=n===t?1:Me(n),Jt(r,n)):[]}function Qy(r){for(var n=-1,a=r==null?0:r.length,h={};++n<a;){var y=r[n];h[y[0]]=y[1]}return h}function Ll(r){return r&&r.length?r[0]:t}function Xy(r,n,a){var h=r==null?0:r.length;if(!h)return-1;var y=a==null?0:Me(a);return y<0&&(y=Kt(h+y,0)),En(r,n,y)}function Zy(r){var n=r==null?0:r.length;return n?jr(r,0,-1):[]}var ev=Ke(function(r){var n=mt(r,dc);return n.length&&n[0]===r[0]?ic(n):[]}),tv=Ke(function(r){var n=Mr(r),a=mt(r,dc);return n===Mr(a)?n=t:a.pop(),a.length&&a[0]===r[0]?ic(a,me(n,2)):[]}),rv=Ke(function(r){var n=Mr(r),a=mt(r,dc);return n=typeof n=="function"?n:t,n&&a.pop(),a.length&&a[0]===r[0]?ic(a,t,n):[]});function iv(r,n){return r==null?"":Zg.call(r,n)}function Mr(r){var n=r==null?0:r.length;return n?r[n-1]:t}function nv(r,n,a){var h=r==null?0:r.length;if(!h)return-1;var y=h;return a!==t&&(y=Me(a),y=y<0?Kt(h+y,0):Xt(y,h-1)),n===n?jg(r,n,y):no(r,yh,y,!0)}function sv(r,n){return r&&r.length?Gh(r,Me(n)):t}var ov=Ke(jl);function jl(r,n){return r&&r.length&&n&&n.length?ac(r,n):r}function av(r,n,a){return r&&r.length&&n&&n.length?ac(r,n,me(a,2)):r}function cv(r,n,a){return r&&r.length&&n&&n.length?ac(r,n,t,a):r}var uv=di(function(r,n){var a=r==null?0:r.length,h=Za(r,n);return Yh(r,mt(n,function(y){return pi(y,a)?+y:y}).sort(ol)),h});function hv(r,n){var a=[];if(!(r&&r.length))return a;var h=-1,y=[],m=r.length;for(n=me(n,3);++h<m;){var P=r[h];n(P,h,r)&&(a.push(P),y.push(h))}return Yh(r,y),a}function xc(r){return r==null?r:i0.call(r)}function lv(r,n,a){var h=r==null?0:r.length;return h?(a&&typeof a!="number"&&or(r,n,a)?(n=0,a=h):(n=n==null?0:Me(n),a=a===t?h:Me(a)),jr(r,n,a)):[]}function fv(r,n){return Io(r,n)}function dv(r,n,a){return hc(r,n,me(a,2))}function pv(r,n){var a=r==null?0:r.length;if(a){var h=Io(r,n);if(h<a&&Vr(r[h],n))return h}return-1}function gv(r,n){return Io(r,n,!0)}function yv(r,n,a){return hc(r,n,me(a,2),!0)}function vv(r,n){var a=r==null?0:r.length;if(a){var h=Io(r,n,!0)-1;if(Vr(r[h],n))return h}return-1}function _v(r){return r&&r.length?Xh(r):[]}function mv(r,n){return r&&r.length?Xh(r,me(n,2)):[]}function wv(r){var n=r==null?0:r.length;return n?jr(r,1,n):[]}function bv(r,n,a){return r&&r.length?(n=a||n===t?1:Me(n),jr(r,0,n<0?0:n)):[]}function Ev(r,n,a){var h=r==null?0:r.length;return h?(n=a||n===t?1:Me(n),n=h-n,jr(r,n<0?0:n,h)):[]}function Dv(r,n){return r&&r.length?Oo(r,me(n,3),!1,!0):[]}function Sv(r,n){return r&&r.length?Oo(r,me(n,3)):[]}var Iv=Ke(function(r){return Ni(Jt(r,1,Nt,!0))}),Ov=Ke(function(r){var n=Mr(r);return Nt(n)&&(n=t),Ni(Jt(r,1,Nt,!0),me(n,2))}),xv=Ke(function(r){var n=Mr(r);return n=typeof n=="function"?n:t,Ni(Jt(r,1,Nt,!0),t,n)});function Pv(r){return r&&r.length?Ni(r):[]}function Cv(r,n){return r&&r.length?Ni(r,me(n,2)):[]}function Tv(r,n){return n=typeof n=="function"?n:t,r&&r.length?Ni(r,t,n):[]}function Pc(r){if(!(r&&r.length))return[];var n=0;return r=Pi(r,function(a){if(Nt(a))return n=Kt(a.length,n),!0}),ka(n,function(a){return mt(r,Ba(a))})}function Ml(r,n){if(!(r&&r.length))return[];var a=Pc(r);return n==null?a:mt(a,function(h){return kt(n,t,h)})}var Av=Ke(function(r,n){return Nt(r)?os(r,n):[]}),Rv=Ke(function(r){return fc(Pi(r,Nt))}),Nv=Ke(function(r){var n=Mr(r);return Nt(n)&&(n=t),fc(Pi(r,Nt),me(n,2))}),$v=Ke(function(r){var n=Mr(r);return n=typeof n=="function"?n:t,fc(Pi(r,Nt),t,n)}),Uv=Ke(Pc);function Lv(r,n){return rl(r||[],n||[],ss)}function jv(r,n){return rl(r||[],n||[],us)}var Mv=Ke(function(r){var n=r.length,a=n>1?r[n-1]:t;return a=typeof a=="function"?(r.pop(),a):t,Ml(r,a)});function ql(r){var n=_(r);return n.__chain__=!0,n}function qv(r,n){return n(r),r}function Uo(r,n){return n(r)}var Fv=di(function(r){var n=r.length,a=n?r[0]:0,h=this.__wrapped__,y=function(m){return Za(m,r)};return n>1||this.__actions__.length||!(h instanceof Je)||!pi(a)?this.thru(y):(h=h.slice(a,+a+(n?1:0)),h.__actions__.push({func:Uo,args:[y],thisArg:t}),new Ur(h,this.__chain__).thru(function(m){return n&&!m.length&&m.push(t),m}))});function zv(){return ql(this)}function Bv(){return new Ur(this.value(),this.__chain__)}function Hv(){this.__values__===t&&(this.__values__=Zl(this.value()));var r=this.__index__>=this.__values__.length,n=r?t:this.__values__[this.__index__++];return{done:r,value:n}}function Kv(){return this}function kv(r){for(var n,a=this;a instanceof wo;){var h=Rl(a);h.__index__=0,h.__values__=t,n?y.__wrapped__=h:n=h;var y=h;a=a.__wrapped__}return y.__wrapped__=r,n}function Vv(){var r=this.__wrapped__;if(r instanceof Je){var n=r;return this.__actions__.length&&(n=new Je(this)),n=n.reverse(),n.__actions__.push({func:Uo,args:[xc],thisArg:t}),new Ur(n,this.__chain__)}return this.thru(xc)}function Gv(){return tl(this.__wrapped__,this.__actions__)}var Wv=xo(function(r,n,a){nt.call(r,a)?++r[a]:li(r,a,1)});function Jv(r,n,a){var h=Re(r)?ph:q0;return a&&or(r,n,a)&&(n=t),h(r,me(n,3))}function Yv(r,n){var a=Re(r)?Pi:Mh;return a(r,me(n,3))}var Qv=fl(Nl),Xv=fl($l);function Zv(r,n){return Jt(Lo(r,n),1)}function e_(r,n){return Jt(Lo(r,n),Q)}function t_(r,n,a){return a=a===t?1:Me(a),Jt(Lo(r,n),a)}function Fl(r,n){var a=Re(r)?Nr:Ri;return a(r,me(n,3))}function zl(r,n){var a=Re(r)?wg:jh;return a(r,me(n,3))}var r_=xo(function(r,n,a){nt.call(r,a)?r[a].push(n):li(r,a,[n])});function i_(r,n,a,h){r=yr(r)?r:$n(r),a=a&&!h?Me(a):0;var y=r.length;return a<0&&(a=Kt(y+a,0)),zo(r)?a<=y&&r.indexOf(n,a)>-1:!!y&&En(r,n,a)>-1}var n_=Ke(function(r,n,a){var h=-1,y=typeof n=="function",m=yr(r)?K(r.length):[];return Ri(r,function(P){m[++h]=y?kt(n,P,a):as(P,n,a)}),m}),s_=xo(function(r,n,a){li(r,a,n)});function Lo(r,n){var a=Re(r)?mt:Kh;return a(r,me(n,3))}function o_(r,n,a,h){return r==null?[]:(Re(n)||(n=n==null?[]:[n]),a=h?t:a,Re(a)||(a=a==null?[]:[a]),Wh(r,n,a))}var a_=xo(function(r,n,a){r[a?0:1].push(n)},function(){return[[],[]]});function c_(r,n,a){var h=Re(r)?Fa:_h,y=arguments.length<3;return h(r,me(n,4),a,y,Ri)}function u_(r,n,a){var h=Re(r)?bg:_h,y=arguments.length<3;return h(r,me(n,4),a,y,jh)}function h_(r,n){var a=Re(r)?Pi:Mh;return a(r,qo(me(n,3)))}function l_(r){var n=Re(r)?Nh:iy;return n(r)}function f_(r,n,a){(a?or(r,n,a):n===t)?n=1:n=Me(n);var h=Re(r)?$0:ny;return h(r,n)}function d_(r){var n=Re(r)?U0:oy;return n(r)}function p_(r){if(r==null)return 0;if(yr(r))return zo(r)?Sn(r):r.length;var n=Zt(r);return n==Ie||n==Oe?r.size:sc(r).length}function g_(r,n,a){var h=Re(r)?za:ay;return a&&or(r,n,a)&&(n=t),h(r,me(n,3))}var y_=Ke(function(r,n){if(r==null)return[];var a=n.length;return a>1&&or(r,n[0],n[1])?n=[]:a>2&&or(n[0],n[1],n[2])&&(n=[n[0]]),Wh(r,Jt(n,1),[])}),jo=Yg||function(){return Xe.Date.now()};function v_(r,n){if(typeof n!="function")throw new $r(l);return r=Me(r),function(){if(--r<1)return n.apply(this,arguments)}}function Bl(r,n,a){return n=a?t:n,n=r&&n==null?r.length:n,fi(r,u,t,t,t,t,n)}function Hl(r,n){var a;if(typeof n!="function")throw new $r(l);return r=Me(r),function(){return--r>0&&(a=n.apply(this,arguments)),r<=1&&(n=t),a}}var Cc=Ke(function(r,n,a){var h=B;if(a.length){var y=Ti(a,Rn(Cc));h|=A}return fi(r,h,n,a,y)}),Kl=Ke(function(r,n,a){var h=B|te;if(a.length){var y=Ti(a,Rn(Kl));h|=A}return fi(n,h,r,a,y)});function kl(r,n,a){n=a?t:n;var h=fi(r,L,t,t,t,t,t,n);return h.placeholder=kl.placeholder,h}function Vl(r,n,a){n=a?t:n;var h=fi(r,C,t,t,t,t,t,n);return h.placeholder=Vl.placeholder,h}function Gl(r,n,a){var h,y,m,P,N,q,X=0,Z=!1,ne=!1,he=!0;if(typeof r!="function")throw new $r(l);n=qr(n)||0,Et(a)&&(Z=!!a.leading,ne="maxWait"in a,m=ne?Kt(qr(a.maxWait)||0,n):m,he="trailing"in a?!!a.trailing:he);function ye($t){var Gr=h,vi=y;return h=y=t,X=$t,P=r.apply(vi,Gr),P}function Ee($t){return X=$t,N=fs(Ge,n),Z?ye($t):P}function ze($t){var Gr=$t-q,vi=$t-X,df=n-Gr;return ne?Xt(df,m-vi):df}function De($t){var Gr=$t-q,vi=$t-X;return q===t||Gr>=n||Gr<0||ne&&vi>=m}function Ge(){var $t=jo();if(De($t))return Ze($t);N=fs(Ge,ze($t))}function Ze($t){return N=t,he&&h?ye($t):(h=y=t,P)}function Or(){N!==t&&il(N),X=0,h=q=y=N=t}function ar(){return N===t?P:Ze(jo())}function xr(){var $t=jo(),Gr=De($t);if(h=arguments,y=this,q=$t,Gr){if(N===t)return Ee(q);if(ne)return il(N),N=fs(Ge,n),ye(q)}return N===t&&(N=fs(Ge,n)),P}return xr.cancel=Or,xr.flush=ar,xr}var __=Ke(function(r,n){return Lh(r,1,n)}),m_=Ke(function(r,n,a){return Lh(r,qr(n)||0,a)});function w_(r){return fi(r,G)}function Mo(r,n){if(typeof r!="function"||n!=null&&typeof n!="function")throw new $r(l);var a=function(){var h=arguments,y=n?n.apply(this,h):h[0],m=a.cache;if(m.has(y))return m.get(y);var P=r.apply(this,h);return a.cache=m.set(y,P)||m,P};return a.cache=new(Mo.Cache||hi),a}Mo.Cache=hi;function qo(r){if(typeof r!="function")throw new $r(l);return function(){var n=arguments;switch(n.length){case 0:return!r.call(this);case 1:return!r.call(this,n[0]);case 2:return!r.call(this,n[0],n[1]);case 3:return!r.call(this,n[0],n[1],n[2])}return!r.apply(this,n)}}function b_(r){return Hl(2,r)}var E_=cy(function(r,n){n=n.length==1&&Re(n[0])?mt(n[0],Dr(me())):mt(Jt(n,1),Dr(me()));var a=n.length;return Ke(function(h){for(var y=-1,m=Xt(h.length,a);++y<m;)h[y]=n[y].call(this,h[y]);return kt(r,this,h)})}),Tc=Ke(function(r,n){var a=Ti(n,Rn(Tc));return fi(r,A,t,n,a)}),Wl=Ke(function(r,n){var a=Ti(n,Rn(Wl));return fi(r,S,t,n,a)}),D_=di(function(r,n){return fi(r,w,t,t,t,n)});function S_(r,n){if(typeof r!="function")throw new $r(l);return n=n===t?n:Me(n),Ke(r,n)}function I_(r,n){if(typeof r!="function")throw new $r(l);return n=n==null?0:Kt(Me(n),0),Ke(function(a){var h=a[n],y=Ui(a,0,n);return h&&Ci(y,h),kt(r,this,y)})}function O_(r,n,a){var h=!0,y=!0;if(typeof r!="function")throw new $r(l);return Et(a)&&(h="leading"in a?!!a.leading:h,y="trailing"in a?!!a.trailing:y),Gl(r,n,{leading:h,maxWait:n,trailing:y})}function x_(r){return Bl(r,1)}function P_(r,n){return Tc(pc(n),r)}function C_(){if(!arguments.length)return[];var r=arguments[0];return Re(r)?r:[r]}function T_(r){return Lr(r,O)}function A_(r,n){return n=typeof n=="function"?n:t,Lr(r,O,n)}function R_(r){return Lr(r,b|O)}function N_(r,n){return n=typeof n=="function"?n:t,Lr(r,b|O,n)}function $_(r,n){return n==null||Uh(r,n,Vt(n))}function Vr(r,n){return r===n||r!==r&&n!==n}var U_=Ao(rc),L_=Ao(function(r,n){return r>=n}),tn=zh(function(){return arguments}())?zh:function(r){return Tt(r)&&nt.call(r,"callee")&&!xh.call(r,"callee")},Re=K.isArray,j_=nr?Dr(nr):k0;function yr(r){return r!=null&&Fo(r.length)&&!gi(r)}function Nt(r){return Tt(r)&&yr(r)}function M_(r){return r===!0||r===!1||Tt(r)&&sr(r)==z}var Li=Xg||zc,q_=Hr?Dr(Hr):V0;function F_(r){return Tt(r)&&r.nodeType===1&&!ds(r)}function z_(r){if(r==null)return!0;if(yr(r)&&(Re(r)||typeof r=="string"||typeof r.splice=="function"||Li(r)||Nn(r)||tn(r)))return!r.length;var n=Zt(r);if(n==Ie||n==Oe)return!r.size;if(ls(r))return!sc(r).length;for(var a in r)if(nt.call(r,a))return!1;return!0}function B_(r,n){return cs(r,n)}function H_(r,n,a){a=typeof a=="function"?a:t;var h=a?a(r,n):t;return h===t?cs(r,n,t,a):!!h}function Ac(r){if(!Tt(r))return!1;var n=sr(r);return n==R||n==d||typeof r.message=="string"&&typeof r.name=="string"&&!ds(r)}function K_(r){return typeof r=="number"&&Ch(r)}function gi(r){if(!Et(r))return!1;var n=sr(r);return n==ae||n==fe||n==H||n==yt}function Jl(r){return typeof r=="number"&&r==Me(r)}function Fo(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=k}function Et(r){var n=typeof r;return r!=null&&(n=="object"||n=="function")}function Tt(r){return r!=null&&typeof r=="object"}var Yl=Rr?Dr(Rr):W0;function k_(r,n){return r===n||nc(r,n,bc(n))}function V_(r,n,a){return a=typeof a=="function"?a:t,nc(r,n,bc(n),a)}function G_(r){return Ql(r)&&r!=+r}function W_(r){if(Ay(r))throw new Te(c);return Bh(r)}function J_(r){return r===null}function Y_(r){return r==null}function Ql(r){return typeof r=="number"||Tt(r)&&sr(r)==Be}function ds(r){if(!Tt(r)||sr(r)!=je)return!1;var n=fo(r);if(n===null)return!0;var a=nt.call(n,"constructor")&&n.constructor;return typeof a=="function"&&a instanceof a&&co.call(a)==Vg}var Rc=Zr?Dr(Zr):J0;function Q_(r){return Jl(r)&&r>=-k&&r<=k}var Xl=Xn?Dr(Xn):Y0;function zo(r){return typeof r=="string"||!Re(r)&&Tt(r)&&sr(r)==Ne}function Ir(r){return typeof r=="symbol"||Tt(r)&&sr(r)==$e}var Nn=Gi?Dr(Gi):Q0;function X_(r){return r===t}function Z_(r){return Tt(r)&&Zt(r)==Pe}function em(r){return Tt(r)&&sr(r)==Ue}var tm=Ao(oc),rm=Ao(function(r,n){return r<=n});function Zl(r){if(!r)return[];if(yr(r))return zo(r)?Kr(r):gr(r);if(es&&r[es])return $g(r[es]());var n=Zt(r),a=n==Ie?Ga:n==Oe?so:$n;return a(r)}function yi(r){if(!r)return r===0?r:0;if(r=qr(r),r===Q||r===-Q){var n=r<0?-1:1;return n*V}return r===r?r:0}function Me(r){var n=yi(r),a=n%1;return n===n?a?n-a:n:0}function ef(r){return r?Qi(Me(r),0,ie):0}function qr(r){if(typeof r=="number")return r;if(Ir(r))return Y;if(Et(r)){var n=typeof r.valueOf=="function"?r.valueOf():r;r=Et(n)?n+"":n}if(typeof r!="string")return r===0?r:+r;r=mh(r);var a=Ea.test(r);return a||Sa.test(r)?Ae(r.slice(2),a?2:8):ba.test(r)?Y:+r}function tf(r){return ti(r,vr(r))}function im(r){return r?Qi(Me(r),-k,k):r===0?r:0}function it(r){return r==null?"":Sr(r)}var nm=Tn(function(r,n){if(ls(n)||yr(n)){ti(n,Vt(n),r);return}for(var a in n)nt.call(n,a)&&ss(r,a,n[a])}),rf=Tn(function(r,n){ti(n,vr(n),r)}),Bo=Tn(function(r,n,a,h){ti(n,vr(n),r,h)}),sm=Tn(function(r,n,a,h){ti(n,Vt(n),r,h)}),om=di(Za);function am(r,n){var a=Cn(r);return n==null?a:$h(a,n)}var cm=Ke(function(r,n){r=ut(r);var a=-1,h=n.length,y=h>2?n[2]:t;for(y&&or(n[0],n[1],y)&&(h=1);++a<h;)for(var m=n[a],P=vr(m),N=-1,q=P.length;++N<q;){var X=P[N],Z=r[X];(Z===t||Vr(Z,On[X])&&!nt.call(r,X))&&(r[X]=m[X])}return r}),um=Ke(function(r){return r.push(t,ml),kt(nf,t,r)});function hm(r,n){return gh(r,me(n,3),ei)}function lm(r,n){return gh(r,me(n,3),tc)}function fm(r,n){return r==null?r:ec(r,me(n,3),vr)}function dm(r,n){return r==null?r:qh(r,me(n,3),vr)}function pm(r,n){return r&&ei(r,me(n,3))}function gm(r,n){return r&&tc(r,me(n,3))}function ym(r){return r==null?[]:Do(r,Vt(r))}function vm(r){return r==null?[]:Do(r,vr(r))}function Nc(r,n,a){var h=r==null?t:Xi(r,n);return h===t?a:h}function _m(r,n){return r!=null&&El(r,n,z0)}function $c(r,n){return r!=null&&El(r,n,B0)}var mm=pl(function(r,n,a){n!=null&&typeof n.toString!="function"&&(n=uo.call(n)),r[n]=a},Lc(_r)),wm=pl(function(r,n,a){n!=null&&typeof n.toString!="function"&&(n=uo.call(n)),nt.call(r,n)?r[n].push(a):r[n]=[a]},me),bm=Ke(as);function Vt(r){return yr(r)?Rh(r):sc(r)}function vr(r){return yr(r)?Rh(r,!0):X0(r)}function Em(r,n){var a={};return n=me(n,3),ei(r,function(h,y,m){li(a,n(h,y,m),h)}),a}function Dm(r,n){var a={};return n=me(n,3),ei(r,function(h,y,m){li(a,y,n(h,y,m))}),a}var Sm=Tn(function(r,n,a){So(r,n,a)}),nf=Tn(function(r,n,a,h){So(r,n,a,h)}),Im=di(function(r,n){var a={};if(r==null)return a;var h=!1;n=mt(n,function(m){return m=$i(m,r),h||(h=m.length>1),m}),ti(r,mc(r),a),h&&(a=Lr(a,b|D|O,my));for(var y=n.length;y--;)lc(a,n[y]);return a});function Om(r,n){return sf(r,qo(me(n)))}var xm=di(function(r,n){return r==null?{}:ey(r,n)});function sf(r,n){if(r==null)return{};var a=mt(mc(r),function(h){return[h]});return n=me(n),Jh(r,a,function(h,y){return n(h,y[0])})}function Pm(r,n,a){n=$i(n,r);var h=-1,y=n.length;for(y||(y=1,r=t);++h<y;){var m=r==null?t:r[ri(n[h])];m===t&&(h=y,m=a),r=gi(m)?m.call(r):m}return r}function Cm(r,n,a){return r==null?r:us(r,n,a)}function Tm(r,n,a,h){return h=typeof h=="function"?h:t,r==null?r:us(r,n,a,h)}var of=vl(Vt),af=vl(vr);function Am(r,n,a){var h=Re(r),y=h||Li(r)||Nn(r);if(n=me(n,4),a==null){var m=r&&r.constructor;y?a=h?new m:[]:Et(r)?a=gi(m)?Cn(fo(r)):{}:a={}}return(y?Nr:ei)(r,function(P,N,q){return n(a,P,N,q)}),a}function Rm(r,n){return r==null?!0:lc(r,n)}function Nm(r,n,a){return r==null?r:el(r,n,pc(a))}function $m(r,n,a,h){return h=typeof h=="function"?h:t,r==null?r:el(r,n,pc(a),h)}function $n(r){return r==null?[]:Va(r,Vt(r))}function Um(r){return r==null?[]:Va(r,vr(r))}function Lm(r,n,a){return a===t&&(a=n,n=t),a!==t&&(a=qr(a),a=a===a?a:0),n!==t&&(n=qr(n),n=n===n?n:0),Qi(qr(r),n,a)}function jm(r,n,a){return n=yi(n),a===t?(a=n,n=0):a=yi(a),r=qr(r),H0(r,n,a)}function Mm(r,n,a){if(a&&typeof a!="boolean"&&or(r,n,a)&&(n=a=t),a===t&&(typeof n=="boolean"?(a=n,n=t):typeof r=="boolean"&&(a=r,r=t)),r===t&&n===t?(r=0,n=1):(r=yi(r),n===t?(n=r,r=0):n=yi(n)),r>n){var h=r;r=n,n=h}if(a||r%1||n%1){var y=Th();return Xt(r+y*(n-r+at("1e-"+((y+"").length-1))),n)}return cc(r,n)}var qm=An(function(r,n,a){return n=n.toLowerCase(),r+(a?cf(n):n)});function cf(r){return Uc(it(r).toLowerCase())}function uf(r){return r=it(r),r&&r.replace(ai,Cg).replace(ja,"")}function Fm(r,n,a){r=it(r),n=Sr(n);var h=r.length;a=a===t?h:Qi(Me(a),0,h);var y=a;return a-=n.length,a>=0&&r.slice(a,y)==n}function zm(r){return r=it(r),r&&vt.test(r)?r.replace(Bi,Tg):r}function Bm(r){return r=it(r),r&&Mt.test(r)?r.replace(xt,"\\$&"):r}var Hm=An(function(r,n,a){return r+(a?"-":"")+n.toLowerCase()}),Km=An(function(r,n,a){return r+(a?" ":"")+n.toLowerCase()}),km=ll("toLowerCase");function Vm(r,n,a){r=it(r),n=Me(n);var h=n?Sn(r):0;if(!n||h>=n)return r;var y=(n-h)/2;return To(vo(y),a)+r+To(yo(y),a)}function Gm(r,n,a){r=it(r),n=Me(n);var h=n?Sn(r):0;return n&&h<n?r+To(n-h,a):r}function Wm(r,n,a){r=it(r),n=Me(n);var h=n?Sn(r):0;return n&&h<n?To(n-h,a)+r:r}function Jm(r,n,a){return a||n==null?n=0:n&&(n=+n),r0(it(r).replace(Pt,""),n||0)}function Ym(r,n,a){return(a?or(r,n,a):n===t)?n=1:n=Me(n),uc(it(r),n)}function Qm(){var r=arguments,n=it(r[0]);return r.length<3?n:n.replace(r[1],r[2])}var Xm=An(function(r,n,a){return r+(a?"_":"")+n.toLowerCase()});function Zm(r,n,a){return a&&typeof a!="number"&&or(r,n,a)&&(n=a=t),a=a===t?ie:a>>>0,a?(r=it(r),r&&(typeof n=="string"||n!=null&&!Rc(n))&&(n=Sr(n),!n&&Dn(r))?Ui(Kr(r),0,a):r.split(n,a)):[]}var ew=An(function(r,n,a){return r+(a?" ":"")+Uc(n)});function tw(r,n,a){return r=it(r),a=a==null?0:Qi(Me(a),0,r.length),n=Sr(n),r.slice(a,a+n.length)==n}function rw(r,n,a){var h=_.templateSettings;a&&or(r,n,a)&&(n=t),r=it(r),n=Bo({},n,h,_l);var y=Bo({},n.imports,h.imports,_l),m=Vt(y),P=Va(y,m),N,q,X=0,Z=n.interpolate||gn,ne="__p += '",he=Wa((n.escape||gn).source+"|"+Z.source+"|"+(Z===bt?wa:gn).source+"|"+(n.evaluate||gn).source+"|$","g"),ye="//# sourceURL="+(nt.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ma+"]")+`
`;r.replace(he,function(De,Ge,Ze,Or,ar,xr){return Ze||(Ze=Or),ne+=r.slice(X,xr).replace(Oa,Ag),Ge&&(N=!0,ne+=`' +
__e(`+Ge+`) +
'`),ar&&(q=!0,ne+=`';
`+ar+`;
__p += '`),Ze&&(ne+=`' +
((__t = (`+Ze+`)) == null ? '' : __t) +
'`),X=xr+De.length,De}),ne+=`';
`;var Ee=nt.call(n,"variable")&&n.variable;if(!Ee)ne=`with (obj) {
`+ne+`
}
`;else if(_a.test(Ee))throw new Te(f);ne=(q?ne.replace(Qr,""):ne).replace(ir,"$1").replace(oi,"$1;"),ne="function("+(Ee||"obj")+`) {
`+(Ee?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(N?", __e = _.escape":"")+(q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ne+`return __p
}`;var ze=lf(function(){return rt(m,ye+"return "+ne).apply(t,P)});if(ze.source=ne,Ac(ze))throw ze;return ze}function iw(r){return it(r).toLowerCase()}function nw(r){return it(r).toUpperCase()}function sw(r,n,a){if(r=it(r),r&&(a||n===t))return mh(r);if(!r||!(n=Sr(n)))return r;var h=Kr(r),y=Kr(n),m=wh(h,y),P=bh(h,y)+1;return Ui(h,m,P).join("")}function ow(r,n,a){if(r=it(r),r&&(a||n===t))return r.slice(0,Dh(r)+1);if(!r||!(n=Sr(n)))return r;var h=Kr(r),y=bh(h,Kr(n))+1;return Ui(h,0,y).join("")}function aw(r,n,a){if(r=it(r),r&&(a||n===t))return r.replace(Pt,"");if(!r||!(n=Sr(n)))return r;var h=Kr(r),y=wh(h,Kr(n));return Ui(h,y).join("")}function cw(r,n){var a=W,h=se;if(Et(n)){var y="separator"in n?n.separator:y;a="length"in n?Me(n.length):a,h="omission"in n?Sr(n.omission):h}r=it(r);var m=r.length;if(Dn(r)){var P=Kr(r);m=P.length}if(a>=m)return r;var N=a-Sn(h);if(N<1)return h;var q=P?Ui(P,0,N).join(""):r.slice(0,N);if(y===t)return q+h;if(P&&(N+=q.length-N),Rc(y)){if(r.slice(N).search(y)){var X,Z=q;for(y.global||(y=Wa(y.source,it(Ar.exec(y))+"g")),y.lastIndex=0;X=y.exec(Z);)var ne=X.index;q=q.slice(0,ne===t?N:ne)}}else if(r.indexOf(Sr(y),N)!=N){var he=q.lastIndexOf(y);he>-1&&(q=q.slice(0,he))}return q+h}function uw(r){return r=it(r),r&&St.test(r)?r.replace(Oi,Mg):r}var hw=An(function(r,n,a){return r+(a?" ":"")+n.toUpperCase()}),Uc=ll("toUpperCase");function hf(r,n,a){return r=it(r),n=a?t:n,n===t?Ng(r)?zg(r):Sg(r):r.match(n)||[]}var lf=Ke(function(r,n){try{return kt(r,t,n)}catch(a){return Ac(a)?a:new Te(a)}}),lw=di(function(r,n){return Nr(n,function(a){a=ri(a),li(r,a,Cc(r[a],r))}),r});function fw(r){var n=r==null?0:r.length,a=me();return r=n?mt(r,function(h){if(typeof h[1]!="function")throw new $r(l);return[a(h[0]),h[1]]}):[],Ke(function(h){for(var y=-1;++y<n;){var m=r[y];if(kt(m[0],this,h))return kt(m[1],this,h)}})}function dw(r){return M0(Lr(r,b))}function Lc(r){return function(){return r}}function pw(r,n){return r==null||r!==r?n:r}var gw=dl(),yw=dl(!0);function _r(r){return r}function jc(r){return Hh(typeof r=="function"?r:Lr(r,b))}function vw(r){return kh(Lr(r,b))}function _w(r,n){return Vh(r,Lr(n,b))}var mw=Ke(function(r,n){return function(a){return as(a,r,n)}}),ww=Ke(function(r,n){return function(a){return as(r,a,n)}});function Mc(r,n,a){var h=Vt(n),y=Do(n,h);a==null&&!(Et(n)&&(y.length||!h.length))&&(a=n,n=r,r=this,y=Do(n,Vt(n)));var m=!(Et(a)&&"chain"in a)||!!a.chain,P=gi(r);return Nr(y,function(N){var q=n[N];r[N]=q,P&&(r.prototype[N]=function(){var X=this.__chain__;if(m||X){var Z=r(this.__wrapped__),ne=Z.__actions__=gr(this.__actions__);return ne.push({func:q,args:arguments,thisArg:r}),Z.__chain__=X,Z}return q.apply(r,Ci([this.value()],arguments))})}),r}function bw(){return Xe._===this&&(Xe._=Gg),this}function qc(){}function Ew(r){return r=Me(r),Ke(function(n){return Gh(n,r)})}var Dw=yc(mt),Sw=yc(ph),Iw=yc(za);function ff(r){return Dc(r)?Ba(ri(r)):ty(r)}function Ow(r){return function(n){return r==null?t:Xi(r,n)}}var xw=gl(),Pw=gl(!0);function Fc(){return[]}function zc(){return!1}function Cw(){return{}}function Tw(){return""}function Aw(){return!0}function Rw(r,n){if(r=Me(r),r<1||r>k)return[];var a=ie,h=Xt(r,ie);n=me(n),r-=ie;for(var y=ka(h,n);++a<r;)n(a);return y}function Nw(r){return Re(r)?mt(r,ri):Ir(r)?[r]:gr(Al(it(r)))}function $w(r){var n=++kg;return it(r)+n}var Uw=Co(function(r,n){return r+n},0),Lw=vc("ceil"),jw=Co(function(r,n){return r/n},1),Mw=vc("floor");function qw(r){return r&&r.length?Eo(r,_r,rc):t}function Fw(r,n){return r&&r.length?Eo(r,me(n,2),rc):t}function zw(r){return vh(r,_r)}function Bw(r,n){return vh(r,me(n,2))}function Hw(r){return r&&r.length?Eo(r,_r,oc):t}function Kw(r,n){return r&&r.length?Eo(r,me(n,2),oc):t}var kw=Co(function(r,n){return r*n},1),Vw=vc("round"),Gw=Co(function(r,n){return r-n},0);function Ww(r){return r&&r.length?Ka(r,_r):0}function Jw(r,n){return r&&r.length?Ka(r,me(n,2)):0}return _.after=v_,_.ary=Bl,_.assign=nm,_.assignIn=rf,_.assignInWith=Bo,_.assignWith=sm,_.at=om,_.before=Hl,_.bind=Cc,_.bindAll=lw,_.bindKey=Kl,_.castArray=C_,_.chain=ql,_.chunk=My,_.compact=qy,_.concat=Fy,_.cond=fw,_.conforms=dw,_.constant=Lc,_.countBy=Wv,_.create=am,_.curry=kl,_.curryRight=Vl,_.debounce=Gl,_.defaults=cm,_.defaultsDeep=um,_.defer=__,_.delay=m_,_.difference=zy,_.differenceBy=By,_.differenceWith=Hy,_.drop=Ky,_.dropRight=ky,_.dropRightWhile=Vy,_.dropWhile=Gy,_.fill=Wy,_.filter=Yv,_.flatMap=Zv,_.flatMapDeep=e_,_.flatMapDepth=t_,_.flatten=Ul,_.flattenDeep=Jy,_.flattenDepth=Yy,_.flip=w_,_.flow=gw,_.flowRight=yw,_.fromPairs=Qy,_.functions=ym,_.functionsIn=vm,_.groupBy=r_,_.initial=Zy,_.intersection=ev,_.intersectionBy=tv,_.intersectionWith=rv,_.invert=mm,_.invertBy=wm,_.invokeMap=n_,_.iteratee=jc,_.keyBy=s_,_.keys=Vt,_.keysIn=vr,_.map=Lo,_.mapKeys=Em,_.mapValues=Dm,_.matches=vw,_.matchesProperty=_w,_.memoize=Mo,_.merge=Sm,_.mergeWith=nf,_.method=mw,_.methodOf=ww,_.mixin=Mc,_.negate=qo,_.nthArg=Ew,_.omit=Im,_.omitBy=Om,_.once=b_,_.orderBy=o_,_.over=Dw,_.overArgs=E_,_.overEvery=Sw,_.overSome=Iw,_.partial=Tc,_.partialRight=Wl,_.partition=a_,_.pick=xm,_.pickBy=sf,_.property=ff,_.propertyOf=Ow,_.pull=ov,_.pullAll=jl,_.pullAllBy=av,_.pullAllWith=cv,_.pullAt=uv,_.range=xw,_.rangeRight=Pw,_.rearg=D_,_.reject=h_,_.remove=hv,_.rest=S_,_.reverse=xc,_.sampleSize=f_,_.set=Cm,_.setWith=Tm,_.shuffle=d_,_.slice=lv,_.sortBy=y_,_.sortedUniq=_v,_.sortedUniqBy=mv,_.split=Zm,_.spread=I_,_.tail=wv,_.take=bv,_.takeRight=Ev,_.takeRightWhile=Dv,_.takeWhile=Sv,_.tap=qv,_.throttle=O_,_.thru=Uo,_.toArray=Zl,_.toPairs=of,_.toPairsIn=af,_.toPath=Nw,_.toPlainObject=tf,_.transform=Am,_.unary=x_,_.union=Iv,_.unionBy=Ov,_.unionWith=xv,_.uniq=Pv,_.uniqBy=Cv,_.uniqWith=Tv,_.unset=Rm,_.unzip=Pc,_.unzipWith=Ml,_.update=Nm,_.updateWith=$m,_.values=$n,_.valuesIn=Um,_.without=Av,_.words=hf,_.wrap=P_,_.xor=Rv,_.xorBy=Nv,_.xorWith=$v,_.zip=Uv,_.zipObject=Lv,_.zipObjectDeep=jv,_.zipWith=Mv,_.entries=of,_.entriesIn=af,_.extend=rf,_.extendWith=Bo,Mc(_,_),_.add=Uw,_.attempt=lf,_.camelCase=qm,_.capitalize=cf,_.ceil=Lw,_.clamp=Lm,_.clone=T_,_.cloneDeep=R_,_.cloneDeepWith=N_,_.cloneWith=A_,_.conformsTo=$_,_.deburr=uf,_.defaultTo=pw,_.divide=jw,_.endsWith=Fm,_.eq=Vr,_.escape=zm,_.escapeRegExp=Bm,_.every=Jv,_.find=Qv,_.findIndex=Nl,_.findKey=hm,_.findLast=Xv,_.findLastIndex=$l,_.findLastKey=lm,_.floor=Mw,_.forEach=Fl,_.forEachRight=zl,_.forIn=fm,_.forInRight=dm,_.forOwn=pm,_.forOwnRight=gm,_.get=Nc,_.gt=U_,_.gte=L_,_.has=_m,_.hasIn=$c,_.head=Ll,_.identity=_r,_.includes=i_,_.indexOf=Xy,_.inRange=jm,_.invoke=bm,_.isArguments=tn,_.isArray=Re,_.isArrayBuffer=j_,_.isArrayLike=yr,_.isArrayLikeObject=Nt,_.isBoolean=M_,_.isBuffer=Li,_.isDate=q_,_.isElement=F_,_.isEmpty=z_,_.isEqual=B_,_.isEqualWith=H_,_.isError=Ac,_.isFinite=K_,_.isFunction=gi,_.isInteger=Jl,_.isLength=Fo,_.isMap=Yl,_.isMatch=k_,_.isMatchWith=V_,_.isNaN=G_,_.isNative=W_,_.isNil=Y_,_.isNull=J_,_.isNumber=Ql,_.isObject=Et,_.isObjectLike=Tt,_.isPlainObject=ds,_.isRegExp=Rc,_.isSafeInteger=Q_,_.isSet=Xl,_.isString=zo,_.isSymbol=Ir,_.isTypedArray=Nn,_.isUndefined=X_,_.isWeakMap=Z_,_.isWeakSet=em,_.join=iv,_.kebabCase=Hm,_.last=Mr,_.lastIndexOf=nv,_.lowerCase=Km,_.lowerFirst=km,_.lt=tm,_.lte=rm,_.max=qw,_.maxBy=Fw,_.mean=zw,_.meanBy=Bw,_.min=Hw,_.minBy=Kw,_.stubArray=Fc,_.stubFalse=zc,_.stubObject=Cw,_.stubString=Tw,_.stubTrue=Aw,_.multiply=kw,_.nth=sv,_.noConflict=bw,_.noop=qc,_.now=jo,_.pad=Vm,_.padEnd=Gm,_.padStart=Wm,_.parseInt=Jm,_.random=Mm,_.reduce=c_,_.reduceRight=u_,_.repeat=Ym,_.replace=Qm,_.result=Pm,_.round=Vw,_.runInContext=M,_.sample=l_,_.size=p_,_.snakeCase=Xm,_.some=g_,_.sortedIndex=fv,_.sortedIndexBy=dv,_.sortedIndexOf=pv,_.sortedLastIndex=gv,_.sortedLastIndexBy=yv,_.sortedLastIndexOf=vv,_.startCase=ew,_.startsWith=tw,_.subtract=Gw,_.sum=Ww,_.sumBy=Jw,_.template=rw,_.times=Rw,_.toFinite=yi,_.toInteger=Me,_.toLength=ef,_.toLower=iw,_.toNumber=qr,_.toSafeInteger=im,_.toString=it,_.toUpper=nw,_.trim=sw,_.trimEnd=ow,_.trimStart=aw,_.truncate=cw,_.unescape=uw,_.uniqueId=$w,_.upperCase=hw,_.upperFirst=Uc,_.each=Fl,_.eachRight=zl,_.first=Ll,Mc(_,function(){var r={};return ei(_,function(n,a){nt.call(_.prototype,a)||(r[a]=n)}),r}(),{chain:!1}),_.VERSION=s,Nr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){_[r].placeholder=_}),Nr(["drop","take"],function(r,n){Je.prototype[r]=function(a){a=a===t?1:Kt(Me(a),0);var h=this.__filtered__&&!n?new Je(this):this.clone();return h.__filtered__?h.__takeCount__=Xt(a,h.__takeCount__):h.__views__.push({size:Xt(a,ie),type:r+(h.__dir__<0?"Right":"")}),h},Je.prototype[r+"Right"]=function(a){return this.reverse()[r](a).reverse()}}),Nr(["filter","map","takeWhile"],function(r,n){var a=n+1,h=a==E||a==ee;Je.prototype[r]=function(y){var m=this.clone();return m.__iteratees__.push({iteratee:me(y,3),type:a}),m.__filtered__=m.__filtered__||h,m}}),Nr(["head","last"],function(r,n){var a="take"+(n?"Right":"");Je.prototype[r]=function(){return this[a](1).value()[0]}}),Nr(["initial","tail"],function(r,n){var a="drop"+(n?"":"Right");Je.prototype[r]=function(){return this.__filtered__?new Je(this):this[a](1)}}),Je.prototype.compact=function(){return this.filter(_r)},Je.prototype.find=function(r){return this.filter(r).head()},Je.prototype.findLast=function(r){return this.reverse().find(r)},Je.prototype.invokeMap=Ke(function(r,n){return typeof r=="function"?new Je(this):this.map(function(a){return as(a,r,n)})}),Je.prototype.reject=function(r){return this.filter(qo(me(r)))},Je.prototype.slice=function(r,n){r=Me(r);var a=this;return a.__filtered__&&(r>0||n<0)?new Je(a):(r<0?a=a.takeRight(-r):r&&(a=a.drop(r)),n!==t&&(n=Me(n),a=n<0?a.dropRight(-n):a.take(n-r)),a)},Je.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},Je.prototype.toArray=function(){return this.take(ie)},ei(Je.prototype,function(r,n){var a=/^(?:filter|find|map|reject)|While$/.test(n),h=/^(?:head|last)$/.test(n),y=_[h?"take"+(n=="last"?"Right":""):n],m=h||/^find/.test(n);y&&(_.prototype[n]=function(){var P=this.__wrapped__,N=h?[1]:arguments,q=P instanceof Je,X=N[0],Z=q||Re(P),ne=function(Ge){var Ze=y.apply(_,Ci([Ge],N));return h&&he?Ze[0]:Ze};Z&&a&&typeof X=="function"&&X.length!=1&&(q=Z=!1);var he=this.__chain__,ye=!!this.__actions__.length,Ee=m&&!he,ze=q&&!ye;if(!m&&Z){P=ze?P:new Je(this);var De=r.apply(P,N);return De.__actions__.push({func:Uo,args:[ne],thisArg:t}),new Ur(De,he)}return Ee&&ze?r.apply(this,N):(De=this.thru(ne),Ee?h?De.value()[0]:De.value():De)})}),Nr(["pop","push","shift","sort","splice","unshift"],function(r){var n=oo[r],a=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",h=/^(?:pop|shift)$/.test(r);_.prototype[r]=function(){var y=arguments;if(h&&!this.__chain__){var m=this.value();return n.apply(Re(m)?m:[],y)}return this[a](function(P){return n.apply(Re(P)?P:[],y)})}}),ei(Je.prototype,function(r,n){var a=_[n];if(a){var h=a.name+"";nt.call(Pn,h)||(Pn[h]=[]),Pn[h].push({name:n,func:a})}}),Pn[Po(t,te).name]=[{name:"wrapper",func:t}],Je.prototype.clone=u0,Je.prototype.reverse=h0,Je.prototype.value=l0,_.prototype.at=Fv,_.prototype.chain=zv,_.prototype.commit=Bv,_.prototype.next=Hv,_.prototype.plant=kv,_.prototype.reverse=Vv,_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=Gv,_.prototype.first=_.prototype.head,es&&(_.prototype[es]=Kv),_},In=Bg();Rt?((Rt.exports=In)._=In,ct._=In):Xe._=In}).call(ws)})(Fu,Fu.exports);var DO=Object.defineProperty,SO=Object.defineProperties,IO=Object.getOwnPropertyDescriptors,kd=Object.getOwnPropertySymbols,OO=Object.prototype.hasOwnProperty,xO=Object.prototype.propertyIsEnumerable,Vd=(i,e,t)=>e in i?DO(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Go=(i,e)=>{for(var t in e||(e={}))OO.call(e,t)&&Vd(i,t,e[t]);if(kd)for(var t of kd(e))xO.call(e,t)&&Vd(i,t,e[t]);return i},PO=(i,e)=>SO(i,IO(e));function qi(i,e,t){var s;const o=oS(i);return((s=e.rpcMap)==null?void 0:s[o.reference])||`${EO}?chainId=${o.namespace}:${o.reference}&projectId=${t}`}function pn(i){return i.includes(":")?i.split(":")[1]:i}function vg(i){return i.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function CO(i,e){const t=Object.keys(e.namespaces).filter(o=>o.includes(i));if(!t.length)return[];const s=[];return t.forEach(o=>{const c=e.namespaces[o].accounts;s.push(...c)}),s}function Gd(i={},e={}){const t=Wd(i),s=Wd(e);return Fu.exports.merge(t,s)}function Wd(i){var e,t,s,o;const c={};if(!Ts(i))return c;for(const[l,f]of Object.entries(i)){const g=nh(l)?[l]:f.chains,p=f.methods||[],v=f.events||[],b=f.rpcMap||{},D=bs(l);c[D]=PO(Go(Go({},c[D]),f),{chains:Zc(g,(e=c[D])==null?void 0:e.chains),methods:Zc(p,(t=c[D])==null?void 0:t.methods),events:Zc(v,(s=c[D])==null?void 0:s.events),rpcMap:Go(Go({},b),(o=c[D])==null?void 0:o.rpcMap)})}return c}function TO(i){return i.includes(":")?i.split(":")[2]:i}function AO(i){const e={};for(const[t,s]of Object.entries(i)){const o=s.methods||[],c=s.events||[],l=s.accounts||[],f=nh(t)?[t]:s.chains?s.chains:vg(s.accounts);e[t]={chains:f,methods:o,events:c,accounts:l}}return e}function au(i){return typeof i=="number"?i:i.includes("0x")?parseInt(i,16):(i=i.includes(":")?i.split(":")[1]:i,isNaN(Number(i))?i:Number(i))}const _g={},wt=i=>_g[i],cu=(i,e)=>{_g[i]=e};class RO{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ii.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=pn(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||qi(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new zi(s,wt("disableProviderPing")))}}class NO{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(Ii.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const s=t||qi(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new zi(s,wt("disableProviderPing")))}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=parseInt(pn(t));e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,s;let o=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";o=o.startsWith("0x")?o:`0x${o}`;const c=parseInt(o,16);if(this.isChainApproved(c))this.setDefaultChain(`${c}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:o}]},chainId:(s=this.namespace.chains)==null?void 0:s[0]}),this.setDefaultChain(`${c}`);else throw new Error(`Failed to switch to chain 'eip155:${c}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class $O{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ii.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=pn(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||qi(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new zi(s,wt("disableProviderPing")))}}class UO{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ii.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=pn(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||qi(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new zi(s,wt("disableProviderPing")))}}class LO{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ii.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const s=this.getCardanoRPCUrl(t),o=pn(t);e[o]=this.createHttpProvider(o,s)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new zi(s,wt("disableProviderPing")))}}class jO{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ii.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=pn(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||qi(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new zi(s,wt("disableProviderPing")))}}class MO{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ii.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=pn(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||qi(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new zi(s,wt("disableProviderPing")))}}class qO{constructor(e){this.name="near",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||qi(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Ii.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||qi(e,this.namespace);return typeof s>"u"?void 0:new Si(new zi(s,wt("disableProviderPing")))}}var FO=Object.defineProperty,zO=Object.defineProperties,BO=Object.getOwnPropertyDescriptors,Jd=Object.getOwnPropertySymbols,HO=Object.prototype.hasOwnProperty,KO=Object.prototype.propertyIsEnumerable,Yd=(i,e,t)=>e in i?FO(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Wo=(i,e)=>{for(var t in e||(e={}))HO.call(e,t)&&Yd(i,t,e[t]);if(Jd)for(var t of Jd(e))KO.call(e,t)&&Yd(i,t,e[t]);return i},uu=(i,e)=>zO(i,BO(e));class fh{constructor(e){this.events=new ku,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ye.pino(Ye.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Hd})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new fh(e);return await t.initialize(),t}async request(e,t,s){const[o,c]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(o).request({request:Wo({},e),chainId:`${o}:${c}`,topic:this.session.topic,expiry:s})}sendAsync(e,t,s,o){const c=new Date().getTime();this.request(e,s,o).then(l=>t(null,da(c,l))).catch(l=>t(l,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Dt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:o}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await o().then(c=>{this.session=c;const l=AO(c.namespaces);this.namespaces=Gd(this.namespaces,l),this.persist("namespaces",this.namespaces)}).catch(c=>{if(c.message!==gg)throw c;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[s,o]=this.validateChain(e);this.getProvider(s).setDefaultChain(o,t)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(cn(t)){for(const s of t)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await fO.init({logger:this.providerOpts.logger||Hd,relayUrl:this.providerOpts.relayUrl||mO,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>bs(t)))];cu("client",this.client),cu("events",this.events),cu("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const s=CO(t,this.session),o=vg(s),c=Gd(this.namespaces,this.optionalNamespaces),l=uu(Wo({},c[t]),{accounts:s,chains:o});switch(t){case"eip155":this.rpcProviders[t]=new NO({namespace:l});break;case"solana":this.rpcProviders[t]=new $O({namespace:l});break;case"cosmos":this.rpcProviders[t]=new UO({namespace:l});break;case"polkadot":this.rpcProviders[t]=new RO({namespace:l});break;case"cip34":this.rpcProviders[t]=new LO({namespace:l});break;case"elrond":this.rpcProviders[t]=new jO({namespace:l});break;case"multiversx":this.rpcProviders[t]=new MO({namespace:l});break;case"near":this.rpcProviders[t]=new qO({namespace:l});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:s}=t;if(s.name==="accountsChanged"){const o=s.data;o&&cn(o)&&this.events.emit("accountsChanged",o.map(TO))}else if(s.name==="chainChanged"){const o=t.chainId,c=t.event.data,l=bs(o),f=au(o)!==au(c)?`${l}:${au(c)}`:o;this.onChainChanged(f)}else this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var s;const{namespaces:o}=t,c=(s=this.client)==null?void 0:s.session.get(e);this.session=uu(Wo({},c),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",uu(Wo({},Dt("USER_DISCONNECTED")),{data:e.topic}))}),this.on(Ii.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:s,sessionProperties:o}=e;t&&Object.keys(t).length&&(this.namespaces=t),s&&Object.keys(s).length&&(this.optionalNamespaces=s),this.sessionProperties=o,this.persist("namespaces",t),this.persist("optionalNamespaces",s)}validateChain(e){const[t,s]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,s];if(t&&!Object.keys(this.namespaces||{}).map(l=>bs(l)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&s)return[t,s];const o=bs(Object.keys(this.namespaces)[0]),c=this.rpcProviders[o].getDefaultChain();return[o,c]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){if(!this.namespaces)return;const[s,o]=this.validateChain(e);o&&(t||this.getProvider(s).setDefaultChain(o),this.namespaces[s]?this.namespaces[s].defaultChain=o:this.namespaces[`${s}:${o}`]?this.namespaces[`${s}:${o}`].defaultChain=o:this.namespaces[`${s}:${o}`]={defaultChain:o},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",o))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${Kd}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${Kd}/${e}`)}}const kO=fh,VO="wc",GO="ethereum_provider",WO=`${VO}@2:${GO}:`,JO="https://rpc.walletconnect.com/v1/",zu=["eth_sendTransaction","personal_sign"],YO=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],Bu=["chainChanged","accountsChanged"],QO=["chainChanged","accountsChanged","message","disconnect","connect"];var XO=Object.defineProperty,ZO=Object.defineProperties,ex=Object.getOwnPropertyDescriptors,Qd=Object.getOwnPropertySymbols,tx=Object.prototype.hasOwnProperty,rx=Object.prototype.propertyIsEnumerable,Xd=(i,e,t)=>e in i?XO(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ds=(i,e)=>{for(var t in e||(e={}))tx.call(e,t)&&Xd(i,t,e[t]);if(Qd)for(var t of Qd(e))rx.call(e,t)&&Xd(i,t,e[t]);return i},Zd=(i,e)=>ZO(i,ex(e));function na(i){return Number(i[0].split(":")[1])}function hu(i){return`0x${i.toString(16)}`}function ix(i){const{chains:e,optionalChains:t,methods:s,optionalMethods:o,events:c,optionalEvents:l,rpcMap:f}=i;if(!bu(e))throw new Error("Invalid chains");const g={chains:e,methods:s||zu,events:c||Bu,rpcMap:Ds({},e.length?{[na(e)]:f[na(e)]}:{})},p=c==null?void 0:c.filter(O=>!Bu.includes(O)),v=s==null?void 0:s.filter(O=>!zu.includes(O));if(!t&&!l&&!o&&!(p!=null&&p.length)&&!(v!=null&&v.length))return{required:e.length?g:void 0};const b=(p==null?void 0:p.length)&&(v==null?void 0:v.length)||!t,D={chains:[...new Set(b?g.chains.concat(t||[]):t)],methods:[...new Set(g.methods.concat(o!=null&&o.length?o:YO))],events:[...new Set(g.events.concat(l!=null&&l.length?l:QO))],rpcMap:f};return{required:e.length?g:void 0,optional:t.length?D:void 0}}class dh{constructor(){this.events=new zr.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=WO,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new dh;return await t.initialize(e),t}async request(e,t){return await this.signer.request(e,this.formatChainId(this.chainId),t)}sendAsync(e,t,s){this.signer.sendAsync(e,t,this.formatChainId(this.chainId),s)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:s}=ix(this.rpc);try{const o=await new Promise(async(l,f)=>{var g;this.rpc.showQrModal&&((g=this.modal)==null||g.subscribeModal(p=>{!p.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),f(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(Zd(Ds({namespaces:Ds({},t&&{[this.namespace]:t})},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(p=>{l(p)}).catch(p=>{f(new Error(p.message))})});if(!o)return;const c=xE(o.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:c),this.setAccounts(c),this.events.emit("connect",{chainId:hu(this.chainId)})}catch(o){throw this.signer.logger.error(o),o}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:s}=t;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",hu(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",Zd(Ds({},CE("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,s;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(s=this.modal)==null||s.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",hu(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,s,o]=e.split(":");return{chainId:`${t}:${s}`,address:o}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,s;const o=(t=e==null?void 0:e.chains)!=null?t:[],c=(s=e==null?void 0:e.optionalChains)!=null?s:[],l=o.concat(c);if(!l.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const f=o.length?(e==null?void 0:e.methods)||zu:[],g=o.length?(e==null?void 0:e.events)||Bu:[],p=(e==null?void 0:e.optionalMethods)||[],v=(e==null?void 0:e.optionalEvents)||[],b=(e==null?void 0:e.rpcMap)||this.buildRpcMap(l,e.projectId),D=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:o==null?void 0:o.map(O=>this.formatChainId(O)),optionalChains:c.map(O=>this.formatChainId(O)),methods:f,events:g,optionalMethods:p,optionalEvents:v,rpcMap:b,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:D,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const s={};return e.forEach(o=>{s[o]=this.getRpcUrl(o,t)}),s}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?na(this.rpc.chains):na(this.rpc.optionalChains),this.signer=await kO.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:s}=await Qw(()=>import("./index-0oy81giI.js").then(o=>o.i),__vite__mapDeps([0,1,2]));t=s}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(Ds({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:s,rpcMap:o}=e;t&&bu(t)&&(this.rpc.chains=t.map(c=>this.formatChainId(c)),t.forEach(c=>{this.rpc.rpcMap[c]=(o==null?void 0:o[c])||this.getRpcUrl(c)})),s&&bu(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s==null?void 0:s.map(c=>this.formatChainId(c)),s.forEach(c=>{this.rpc.rpcMap[c]=(o==null?void 0:o[c])||this.getRpcUrl(c)}))}getRpcUrl(e,t){var s;return((s=this.rpc.rpcMap)==null?void 0:s[e])||`${JO}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t==null?void 0:t.accounts),this.setAccounts(t==null?void 0:t.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}const Dx=dh;export{Dx as EthereumProvider,QO as OPTIONAL_EVENTS,YO as OPTIONAL_METHODS,Bu as REQUIRED_EVENTS,zu as REQUIRED_METHODS,dh as default};
